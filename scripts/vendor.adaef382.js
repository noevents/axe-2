webpackJsonp([1],{GYcQ:function(e,t,n){var i=String.fromCharCode,a=function(d){var l=Math.floor,p=Math.ceil,c=Math.tan,_=Math.min,g=Math.acos,u=Math.atan2,h=Math.PI,m=Math.sin,f=Math.cos,y=Math.max,C=Math.sqrt,S=Math.abs,x=Math.round,b=Math.pow;d=d||n(0);var v=d.window,w=d.document,A=new function(){function e(e,i,a,s,d){function l(n,l){l=l||(l=r(i,n))&&(l.get?l:l.value),'string'==typeof l&&'#'===l[0]&&(l=e[l.substring(1)]||l);var c='function'==typeof l,_=l,g=d||c&&!l.base?l&&l.get?n in e:e[n]:null,u;d&&g||(c&&g&&(l.base=g),c&&!1!==s&&(u=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(p[u[3].toLowerCase()+u[4]]=u[2]),(!_||c||!_.get||'function'!=typeof _.get||!t.isPlainObject(_))&&(_={value:_,writable:!0}),(r(e,n)||{configurable:!0}).configurable&&(_.configurable=!0,_.enumerable=null==a?!u:a),o(e,n,_))}var p={};if(i){for(var c in i)i.hasOwnProperty(c)&&!n.test(c)&&l(c);for(var c in p){var _=p[c],g=e['set'+_],u=e['get'+_]||g&&e['is'+_];u&&(!0===s||0===u.length)&&l(c,{get:u,set:g})}}return e}function t(){for(var e=0,t=arguments.length,n;e<t;e++)n=arguments[e],n&&p(this,n);return this}var n=/^(statics|enumerable|beans|preserve)$/,i=[],a=i.slice,s=Object.create,r=Object.getOwnPropertyDescriptor,o=Object.defineProperty,d=i.forEach||function(e,t){for(var n=0,i=this.length;n<i;n++)e.call(t,this[n],n,this)},l=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},p=Object.assign||function(e){for(var t=1,n=arguments.length,i;t<n;t++)for(var a in i=arguments[t],i)i.hasOwnProperty(a)&&(e[a]=i[a]);return e},c=function(e,t,n){if(e){var i=r(e,'length');(i&&'number'==typeof i.value?d:l).call(e,t,n=n||e)}return n};return e(t,{inject:function(t){if(t){var n=!0===t.statics?t:t.statics,a=t.beans,s=t.preserve;n!==t&&e(this.prototype,t,t.enumerable,a,s),e(this,n,null,a,s)}for(var r=1,i=arguments.length;r<i;r++)this.inject(arguments[r]);return this},extend:function(){for(var t=this,n=0,i=arguments.length,a,r,d;n<i&&!(a&&r);n++)d=arguments[n],a=a||d.initialize,r=r||d.prototype;return a=a||function(){t.apply(this,arguments)},r=a.prototype=r||s(this.prototype),o(r,'constructor',{value:a,writable:!0,configurable:!0}),e(a,this),arguments.length&&this.inject.apply(a,arguments),a.base=t,a}}).inject({enumerable:!1,initialize:t,set:t,inject:function(){for(var t=0,n=arguments.length,i;t<n;t++)i=arguments[t],i&&e(this,i,i.enumerable,i.beans,i.preserve);return this},extend:function(){var e=s(this);return e.inject.apply(e,arguments)},each:function(e,t){return c(this,e,t)},clone:function(){return new this.constructor(this)},statics:{set:p,each:c,create:s,define:o,describe:r,clone:function(e){return p(new e.constructor,e)},isPlainObject:function(e){var n=null!=e&&e.constructor;return n&&(n===Object||n===t||'Object'===n.name)},pick:function(e,t){return void 0===e?t:e},slice:function(e,t,n){return a.call(e,t,n)}}})};e.exports=A,A.inject({enumerable:!1,toString:function(){return null==this._id?'{ '+A.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+': '+('number'==n?I.instance.number(e):'string'==n?'\''+e+'\'':e))}},[]).join(', ')+' }':(this._class||'Object')+(this._name?' \''+this._name+'\'':' @'+this._id)},getClassName:function(){return this._class||''},importJSON:function(e){return A.importJSON(e,this)},exportJSON:function(e){return A.exportJSON(this,e)},toJSON:function(){return A.serialize(this)},set:function(e,t){return e&&A.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!A.exports[n]&&(A.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&'object'==typeof e&&'object'==typeof t){if(Array.isArray(e)&&Array.isArray(t)){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(!A.equals(e[n],t[n]))return!1}else{var i=Object.keys(e),n=i.length;if(n!==Object.keys(t).length)return!1;for(;n--;){var a=i[n];if(!(t.hasOwnProperty(a)&&A.equals(e[a],t[a])))return!1}}return!0}return!1},read:function(e,t,n,i){if(this===A){var a=this.peek(e,t);return e.__index++,a}var s=this.prototype,r=s._readIndex,o=t||r&&e.__index||0,d=e.length,l=e[o];if(i=i||d-o,l instanceof this||n&&n.readNull&&null==l&&1>=i)return r&&(e.__index=o+1),l&&n&&n.clone?l.clone():l;if(l=A.create(s),r&&(l.__read=!0),l=l.initialize.apply(l,0<o||o+i<d?A.slice(e,o,o+i):e)||l,r){e.__index=o+l.__read;var p=l.__filtered;p&&(e.__filtered=p,l.__filtered=void 0),l.__read=void 0}return l},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,a){for(var s=[],r=t||0,o=a?r+a:e.length,d=r,i;d<o;d++)s.push(Array.isArray(i=e[d])?this.read(i,0,n):this.read(e,d,n,1));return s},readNamed:function(e,t,n,i,a){var s=this.getNamed(e,t),r=void 0!==s;if(r){var o=e.__filtered;o||(o=e.__filtered=A.create(e[0]),o.__unfiltered=e[0]),o[t]=void 0}var d=r?[s]:e,l=this.read(d,n,i,a);return l},getNamed:function(e,t){var n=e[0];if(void 0===e._hasObject&&(e._hasObject=1===e.length&&A.isPlainObject(n)),e._hasObject)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,a){function s(i){if(!(n&&i in n)&&!(r&&i in r)){var a=t[i];void 0!==a&&(e[i]=a)}}var r;if(a){for(var o={},d=0,i=a.length,l;d<i;d++)(l=a[d])in t&&(s(l),o[l]=!0);r=o}return Object.keys(t.__unfiltered||t).forEach(s),e},isPlainValue:function(e,t){return A.isPlainObject(e)||Array.isArray(e)||t&&'string'==typeof e},serialize:function(e,t,n,a){t=t||{};var s=!a,r;if(s&&(t.formatter=new I(t.precision),a={length:0,definitions:{},references:{},add:function(e,t){var n='#'+e._id,i=this.references[n];if(!i){this.length++;var a=t.call(e),s=e._class;s&&a[0]!==s&&a.unshift(s),this.definitions[n]=a,i=this.references[n]=[n]}return i}}),e&&e._serialize){r=e._serialize(t,a);var o=e._class;o&&!e._compactSerialize&&(s||!n)&&r[0]!==o&&r.unshift(o)}else if(Array.isArray(e)){r=[];for(var d=0,i=e.length;d<i;d++)r[d]=A.serialize(e[d],t,n,a)}else if(A.isPlainObject(e)){r={};for(var l=Object.keys(e),d=0,i=l.length,p;d<i;d++)p=l[d],r[p]=A.serialize(e[p],t,n,a)}else r='number'==typeof e?t.formatter.number(e,t.precision):e;return s&&0<a.length?[['dictionary',a.definitions],r]:r},deserialize:function(e,t,n,a,s){var r=e,o=!n,d=o&&e&&e.length&&'dictionary'===e[0][0];if(n=n||{},Array.isArray(e)){var p=e[0],c='dictionary'===p;if(1==e.length&&/^#/.test(p))return n.dictionary[p];p=A.exports[p],r=[];for(var _=p?1:0,i=e.length;_<i;_++)r.push(A.deserialize(e[_],t,n,c,d));if(p){var l=r;t?r=t(p,l,o||s):(r=A.create(p.prototype),p.apply(r,l))}}else if(A.isPlainObject(e))for(var g in r={},a&&(n.dictionary=r),e)r[g]=A.deserialize(e[g],t,n);return d?r[1]:r},exportJSON:function(e,t){var n=A.serialize(e,t);return t&&!1==t.asString?n:JSON.stringify(n)},importJSON:function(e,t){return A.deserialize('string'==typeof e?JSON.parse(e):e,function(e,n,i){var a=i&&t&&t.constructor===e,s=a?t:A.create(e.prototype);if(1===n.length&&s instanceof q&&(a||!(s instanceof U))){var r=n[0];A.isPlainObject(r)&&(r.insert=!1)}return(a?s.set:e).apply(s,n),a&&(t=null),s})},splice:function(e,t,n,a){var s=t&&t.length,r=void 0===n;n=r?e.length:n,n>e.length&&(n=e.length);for(var o=0;o<s;o++)t[o]._index=n+o;if(r)return e.push.apply(e,t),[];var i=[n,a];t&&i.push.apply(i,t);for(var d=e.splice.apply(e,i),o=0,p=d.length;o<p;o++)d[o]._index=void 0;for(var o=n+s,p=e.length;o<p;o++)e[o]._index=o;return d},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase()}}});var k={on:function(e,t){if('string'!=typeof e)A.each(e,function(e,t){this.on(t,e)},this);else{var n=this._eventTypes,i=n&&n[e],a=this._callbacks=this._callbacks||{};a=a[e]=a[e]||[],-1===a.indexOf(t)&&(a.push(t),i&&i.install&&1===a.length&&i.install.call(this,e))}return this},off:function(e,t){if('string'!=typeof e)return void A.each(e,function(e,t){this.off(t,e)},this);var n=this._eventTypes,i=n&&n[e],a=this._callbacks&&this._callbacks[e],s;return a&&(t&&(-1===(s=a.indexOf(t))||1!==a.length)?-1!==s&&a.splice(s,1):(i&&i.uninstall&&i.uninstall.call(this,e),delete this._callbacks[e])),this},once:function(e,t){return this.on(e,function(){t.apply(this,arguments),this.off(e,t)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var a=A.slice(arguments,1),s=t&&t.target&&!t.currentTarget;n=n.slice(),s&&(t.currentTarget=this);for(var r=0,i=n.length;r<i;r++)if(!1==n[r].apply(this,a)){t&&t.stop&&t.stop();break}return s&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:'#on',detach:'#off',fire:'#emit',_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,i=e?'install':'uninstall';if(t)for(var a in n)if(0<n[a].length){var s=t[a],r=s&&s[i];r&&r.call(this,a)}},statics:{inject:function e(t){var n=t._events;if(n){var i={};A.each(n,function(e,n){var a='string'==typeof e,s=a?e:n,r=A.capitalize(s),o=s.substring(2).toLowerCase();i[o]=a?{}:e,s='_'+s,t['get'+r]=function(){return this[s]},t['set'+r]=function(e){var t=this[s];t&&this.off(o,t),e&&this.on(o,e),this[s]=e}}),t._eventTypes=i}return e.base.apply(this,arguments)}}},P=A.extend({_class:'PaperScope',initialize:function e(){a=this,this.settings=new A({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=ve.getContext(1,1)||{};t.support={nativeDash:'setLineDash'in n||'mozDash'in n,nativeBlendModes:Ce.nativeModes},ve.release(n)}if(!this.agent){var i=d.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],r='darwin'===s?'mac':s,o=t.agent=t.browser={platform:r};r&&(o[r]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(e,t,n,i,a){if(!o.chrome){var s='opera'===t?i:/^(node|trident)$/.test(t)?a:n;o.version=s,o.versionNumber=parseFloat(s),t='trident'===t?'msie':t,o.name=t,o[t]=!0}}),o.chrome&&delete o.webkit,o.atom&&delete o.chrome}},version:'0.11.5',getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){a.PaperScript.execute(e,this,t),_e.updateFocus()},install:function(e){var t=this;for(var n in A.each(['project','view','tool'],function(n){A.define(e,n,{configurable:!0,get:function(){return t[n]}})}),this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return a=this,this.project=new F(e),this},createCanvas:function(e,t){return ve.getCanvas(e,t)},activate:function(){a=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;0<=n;n--)e[n].remove();for(var n=t.length-1;0<=n;n--)t[n].remove()},remove:function(){this.clear(),delete P._scopes[this._id]},statics:new function(){function e(e){return e+='Attribute',function(t,n){return t[e](n)||t[e]('data-paper-'+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e('get'),hasAttribute:e('has')}}}),T=A.extend(k,{initialize:function(e){this._scope=a,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit('deactivate'),this._scope[this._reference]=this,this.emit('activate',e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(A.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),I=A.extend({initialize:function(e){this.precision=A.pick(e,5),this.multiplier=b(10,this.precision)},number:function(e){return 16>this.precision?x(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||',')+this.number(t)},point:function(e,t){return this.number(e.x)+(t||',')+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||',')+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||',')+this.size(e,t)}});I.instance=new I;var E=new function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e,t,n){function a(e){var t=134217729*e,n=e-t+t;return[n,e-n]}var s=t*t-e*n;if(3*i(s)<t*t+e*n){var r=a(e),o=a(t),d=a(n),l=t*t,p=o[0]*o[0]-l+2*o[0]*o[1]+o[1]*o[1],c=e*n,_=r[0]*d[0]-c+r[0]*d[1]+r[1]*d[0]+r[1]*d[1];s=l-c+(p-_)}return s}function n(){var e=y.apply(Math,arguments);return e&&(1e-8>e||1e8<e)?l(2,-x(a(e))):0}var s=[[0.5773502691896257],[0,0.7745966692414834],[0.33998104358485626,0.8611363115940526],[0,0.5384693101056831,0.906179845938664],[0.2386191860831969,0.6612093864662645,0.932469514203152],[0,0.4058451513773972,0.7415311855993945,0.9491079123427585],[0.1834346424956498,0.525532409916329,0.7966664774136267,0.9602898564975363],[0,0.3242534234038089,0.6133714327005904,0.8360311073266358,0.9681602395076261],[0.14887433898163122,0.4333953941292472,0.6794095682990244,0.8650633666889845,0.9739065285171717],[0,0.26954315595234496,0.5190961292068118,0.7301520055740494,0.8870625997680953,0.978228658146057],[0.1252334085114689,0.3678314989981802,0.5873179542866175,0.7699026741943047,0.9041172563704749,0.9815606342467192],[0,0.2304583159551348,0.44849275103644687,0.6423493394403402,0.8015780907333099,0.9175983992229779,0.9841830547185881],[0.10805494870734367,0.31911236892788974,0.5152486363581541,0.6872929048116855,0.827201315069765,0.9284348836635735,0.9862838086968123],[0,0.20119409399743451,0.3941513470775634,0.5709721726085388,0.7244177313601701,0.8482065834104272,0.937273392400706,0.9879925180204854],[0.09501250983763744,0.2816035507792589,0.45801677765722737,0.6178762444026438,0.755404408355003,0.8656312023878318,0.9445750230732326,0.9894009349916499]],r=[[1],[0.8888888888888888,0.5555555555555556],[0.6521451548625461,0.34785484513745385],[0.5688888888888889,0.47862867049936647,0.23692688505618908],[0.46791393457269104,0.3607615730481386,0.17132449237917036],[0.4179591836734694,0.3818300505051189,0.27970539148927664,0.1294849661688697],[0.362683783378362,0.31370664587788727,0.22238103445337448,0.10122853629037626],[0.3302393550012598,0.31234707704000286,0.26061069640293544,0.1806481606948574,0.08127438836157441],[0.29552422471475287,0.26926671930999635,0.21908636251598204,0.1494513491505806,0.06667134430868814],[0.2729250867779006,0.26280454451024665,0.23319376459199048,0.18629021092773426,0.1255803694649046,0.05566856711617366],[0.24914704581340277,0.2334925365383548,0.20316742672306592,0.16007832854334622,0.10693932599531843,0.04717533638651183],[0.2325515532308739,0.22628318026289723,0.2078160475368885,0.17814598076194574,0.13887351021978725,0.09212149983772845,0.04048400476531588],[0.2152638534631578,0.2051984637212956,0.18553839747793782,0.15720316715819355,0.12151857068790319,0.08015808715976021,0.03511946033175186],[0.2025782419255613,0.19843148532711158,0.1861610000155622,0.16626920581699392,0.13957067792615432,0.10715922046717194,0.07036604748810812,0.03075324199611727],[0.1894506104550685,0.18260341504492358,0.16915651939500254,0.14959598881657674,0.12462897125553388,0.09515851168249279,0.062253523938647894,0.027152459411754096]],i=S,o=C,l=b,a=Math.log2||function(e){return Math.log(e)*Math.LOG2E},p=1e-12,d=1.12e-16;return{EPSILON:p,MACHINE_EPSILON:d,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(o(2)-1)/3,isZero:function(e){return e>=-p&&e<=p},clamp:e,integrate:function(e,t,a,o){for(var n=s[o-2],d=r[o-2],l=0.5*(a-t),p=l+t,c=0,i=1&o?d[c++]*e(p):0,_;c<o+1>>1;)_=l*n[c],i+=d[c++]*(e(p+_)+e(p-_));return l*i},findRoot:function(t,s,r,o,a,d,n){for(var l=0;l<d;l++){var p=t(r),c=p/s(r),_=r-c;if(i(c)<n){r=_;break}0<p?(a=r,r=_<=o?0.5*(o+a):_):(o=r,r=_>=a?0.5*(o+a):_)}return e(r,o,a)},solveQuadratic:function(s,a,r,l,_,g){var u=Infinity,h;if(i(s)<p){if(i(a)<p)return i(r)<p?-1:0;h=-r/a}else{a*=-0.5;var m=t(s,a,r);if(m&&i(m)<d){var y=n(i(s),i(a),i(r));y&&(s*=y,a*=y,r*=y,m=t(s,a,r))}if(m>=-d){var f=0>m?0:o(m),x=a+(0>a?-f:f);0===x?(h=r/s,u=-h):(h=x/s,u=r/x)}}var b=0,v=null==_,C=_-p,S=g+p;return isFinite(h)&&(v||h>C&&h<S)&&(l[b++]=v?h:e(h,_,g)),u!==h&&isFinite(u)&&(v||u>C&&u<S)&&(l[b++]=v?u:e(u,_,g)),b},solveCubic:function(_,a,g,c,u,h,m){function b(e){f=e;var t=_*f;x=t+a,C=x*f+g,S=(t+x)*f+C,w=C*f+c}var v=n(i(_),i(a),i(g),i(c)),f,x,C,S,w;if(v&&(_*=v,a*=v,g*=v,c*=v),i(_)<p)_=a,x=g,C=c,f=Infinity;else if(i(c)<p)x=a,C=g,f=0;else{b(-(a/_)/3);var k=w/_,t=l(i(k),1/3),r=0>k?-1:1,s=-S/_,A=0<s?1.324717957244746*y(t,o(s)):t,P=f-r*A;if(P!==f){do b(P),P=0===S?f:f-w/S/(1+d);while(r*P>r*f);i(_)*f*f>i(c/f)&&(C=-c/f,x=(C-g)/f)}}var T=E.solveQuadratic(_,x,C,u,h,m),I=null==h;return isFinite(f)&&(0===T||0<T&&f!==u[0]&&f!==u[1])&&(I||f>h-p&&f<m+p)&&(u[T++]=I?f:e(f,h,m)),T}}},L={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},O=A.extend({_class:'Point',_readIndex:!0,initialize:function(e,t){var n=typeof e,i=this.__read,a=0;if('number'==n){var s='number'==typeof t;this._set(e,s?t:e),i&&(a=s?2:1)}else if('undefined'==n||null===e)this._set(0,0),i&&(a=null===e?1:0);else{var r='string'==n?e.split(/[\s,]+/)||[]:e;a=1,Array.isArray(r)?this._set(+r[0],+(1<r.length?r[1]:r[0])):'x'in r?this._set(r.x||0,r.y||0):'width'in r?this._set(r.width||0,r.height||0):'angle'in r?(this._set(r.length||0,0),this.setAngle(r.angle||0)):(this._set(0,0),a=0)}return i&&(this.__read=a),this},set:'#initialize',_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new O(this.x,this.y)},toString:function(){var e=I.instance;return'{ x: '+e.number(this.x)+', y: '+e.number(this.y)+' }'},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return C(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(f(t)*e,m(t)*e)}else{var n=e/this.getLength();E.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/h},setAngle:function(e){this.setAngleInRadians.call(this,e*h/180)},getAngleInDegrees:'#getAngle',setAngleInDegrees:'#setAngle',getAngleInRadians:function(){if(!arguments.length)return this.isZero()?this._angle||0:this._angle=u(this.y,this.x);var e=O.read(arguments),t=this.getLength()*e.getLength();if(E.isZero(t))return NaN;var n=this.dot(e)/t;return g(-1>n?-1:1<n?1:n)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(f(e)*t,m(e)*t)}},getQuadrant:function(){return 0<=this.x?0<=this.y?1:4:0<=this.y?2:3}},{beans:!1,getDirectedAngle:function(){var e=O.read(arguments);return 180*u(this.cross(e),this.dot(e))/h},getDistance:function(){var e=O.read(arguments),t=e.x-this.x,n=e.y-this.y,i=t*t+n*n,a=A.read(arguments);return a?i:C(i)},normalize:function(e){void 0===e&&(e=1);var t=this.getLength(),n=0===t?0:e/t,i=new O(this.x*n,this.y*n);return 0<=n&&(i._angle=this._angle),i},rotate:function(e,t){if(0===e)return this.clone();e=e*h/180;var n=t?this.subtract(t):this,i=m(e),a=f(e);return n=new O(n.x*a-n.y*i,n.x*i+n.y*a),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=O.read(arguments);return new O(this.x+e.x,this.y+e.y)},subtract:function(){var e=O.read(arguments);return new O(this.x-e.x,this.y-e.y)},multiply:function(){var e=O.read(arguments);return new O(this.x*e.x,this.y*e.y)},divide:function(){var e=O.read(arguments);return new O(this.x/e.x,this.y/e.y)},modulo:function(){var e=O.read(arguments);return new O(this.x%e.x,this.y%e.y)},negate:function(){return new O(-this.x,-this.y)},isInside:function(){return B.read(arguments).contains(this)},isClose:function(){var e=O.read(arguments),t=A.read(arguments);return this.getDistance(e)<=t},isCollinear:function(){var e=O.read(arguments);return O.isCollinear(this.x,this.y,e.x,e.y)},isColinear:'#isCollinear',isOrthogonal:function(){var e=O.read(arguments);return O.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=E.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return 0<=this.x*(1<e&&4>e?-1:1)&&0<=this.y*(2<e?-1:1)},dot:function(){var e=O.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=O.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=O.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new O(e.x*t,e.y*t)},statics:{min:function(){var e=O.read(arguments),t=O.read(arguments);return new O(_(e.x,t.x),_(e.y,t.y))},max:function(){var e=O.read(arguments),t=O.read(arguments);return new O(y(e.x,t.x),y(e.y,t.y))},random:function(){return new O(Math.random(),Math.random())},isCollinear:function(e,t,n,i){return S(e*i-t*n)<=1e-8*C((e*e+t*t)*(n*n+i*i))},isOrthogonal:function(e,t,n,i){return S(e*n+t*i)<=1e-8*C((e*e+t*t)*(n*n+i*i))}}},A.each(['round','ceil','floor','abs'],function(e){var t=Math[e];this[e]=function(){return new O(t(this.x),t(this.y))}},{})),N=O.extend({initialize:function(e,t,n,i){this._x=e,this._y=t,this._owner=n,this._setter=i},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return'setPosition'===this._setter?4:0}}),z=A.extend({_class:'Size',_readIndex:!0,initialize:function(e,t){var n=typeof e,i=this.__read,a=0;if('number'==n){var s='number'==typeof t;this._set(e,s?t:e),i&&(a=s?2:1)}else if('undefined'==n||null===e)this._set(0,0),i&&(a=null===e?1:0);else{var r='string'==n?e.split(/[\s,]+/)||[]:e;a=1,Array.isArray(r)?this._set(+r[0],+(1<r.length?r[1]:r[0])):'width'in r?this._set(r.width||0,r.height||0):'x'in r?this._set(r.x||0,r.y||0):(this._set(0,0),a=0)}return i&&(this.__read=a),this},set:'#initialize',_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new z(this.width,this.height)},toString:function(){var e=I.instance;return'{ width: '+e.number(this.width)+', height: '+e.number(this.height)+' }'},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=z.read(arguments);return new z(this.width+e.width,this.height+e.height)},subtract:function(){var e=z.read(arguments);return new z(this.width-e.width,this.height-e.height)},multiply:function(){var e=z.read(arguments);return new z(this.width*e.width,this.height*e.height)},divide:function(){var e=z.read(arguments);return new z(this.width/e.width,this.height/e.height)},modulo:function(){var e=z.read(arguments);return new z(this.width%e.width,this.height%e.height)},negate:function(){return new z(-this.width,-this.height)},isZero:function(){var e=E.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new z(_(e.width,t.width),_(e.height,t.height))},max:function(e,t){return new z(y(e.width,t.width),y(e.height,t.height))},random:function(){return new z(Math.random(),Math.random())}}},A.each(['round','ceil','floor','abs'],function(e){var t=Math[e];this[e]=function(){return new z(t(this.width),t(this.height))}},{})),R=z.extend({initialize:function(e,t,n,i){this._width=e,this._height=t,this._owner=n,this._setter=i},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),B=A.extend({_class:'Rectangle',_readIndex:!0,beans:!0,initialize:function(e,t,n,i){var a=typeof e,s;if('number'==a?(this._set(e,t,n,i),s=4):'undefined'==a||null===e?(this._set(0,0,0,0),s=null===e?1:0):1===arguments.length&&(Array.isArray(e)?(this._set.apply(this,e),s=1):void 0!==e.x||void 0!==e.width?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),s=1):void 0===e.from&&void 0===e.to&&(this._set(0,0,0,0),A.filter(this,e),s=1)),void 0===s){var r=O.readNamed(arguments,'from'),o=A.peek(arguments),d=r.x,l=r.y,p,c;if(o&&void 0!==o.x||A.hasNamed(arguments,'to')){var _=O.readNamed(arguments,'to');p=_.x-d,c=_.y-l,0>p&&(d=_.x,p=-p),0>c&&(l=_.y,c=-c)}else{var g=z.read(arguments);p=g.width,c=g.height}this._set(d,l,p,c),s=arguments.__index;var u=arguments.__filtered;u&&(this.__filtered=u)}return this.__read&&(this.__read=s),this},set:'#initialize',_set:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this},clone:function(){return new B(this.x,this.y,this.width,this.height)},equals:function(e){var t=A.isPlainValue(e)?B.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=I.instance;return'{ x: '+e.number(this.x)+', y: '+e.number(this.y)+', width: '+e.number(this.width)+', height: '+e.number(this.height)+' }'},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?O:N;return new t(this.x,this.y,this,'setPoint')},setPoint:function(){var e=O.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?z:R;return new t(this.width,this.height,this,'setSize')},_fw:1,_fh:1,setSize:function(){var e=z.read(arguments),t=this._sx,n=this._sy,i=e.width,a=e.height;t&&(this.x+=(this.width-i)*t),n&&(this.y+=(this.height-a)*n),this.width=i,this.height=a,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=0.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=0.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=0.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=0.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||0.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=0.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||0.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=0.5,this._fh=0},getCenter:function(e){var t=e?O:N;return new t(this.getCenterX(),this.getCenterY(),this,'setCenter')},setCenter:function(){var e=O.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&void 0!==e.width||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(B.read(arguments)):this._containsPoint(O.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=B.read(arguments),t=A.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=B.read(arguments),t=y(this.x,e.x),n=y(this.y,e.y),i=_(this.x+this.width,e.x+e.width),a=_(this.y+this.height,e.y+e.height);return new B(t,n,i-t,a-n)},unite:function(){var e=B.read(arguments),t=_(this.x,e.x),n=_(this.y,e.y),i=y(this.x+this.width,e.x+e.width),a=y(this.y+this.height,e.y+e.height);return new B(t,n,i-t,a-n)},include:function(){var e=O.read(arguments),t=_(this.x,e.x),n=_(this.y,e.y),i=y(this.x+this.width,e.x),a=y(this.y+this.height,e.y);return new B(t,n,i-t,a-n)},expand:function(){var e=z.read(arguments),t=e.width,n=e.height;return new B(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(void 0===t?e:t)-this.height)}},A.each([['Top','Left'],['Top','Right'],['Bottom','Left'],['Bottom','Right'],['Left','Center'],['Top','Center'],['Right','Center'],['Bottom','Center']],function(e,t){var n=e.join(''),i=/^[RL]/.test(n);4<=t&&(e[1]+=i?'Y':'X');var a=e[i?0:1],s=e[i?1:0],r='set'+n;this['get'+n]=function(e){var t=e?O:N;return new t(this['get'+a](),this['get'+s](),this,r)},this[r]=function(){var e=O.read(arguments);this['set'+a](e.x),this['set'+s](e.y)}},{beans:!0})),V=B.extend({initialize:function(e,t,n,i,a,s){this._set(e,t,n,i,!0),this._owner=a,this._setter=s},_set:function(e,t,n,i,a){return this._x=e,this._y=t,this._width=n,this._height=i,a||this._owner[this._setter](this),this}},new function(){var e=B.prototype;return A.each(['x','y','width','height'],function(e){var t=A.capitalize(e),n='_'+e;this['get'+t]=function(){return this[n]},this['set'+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}},A.each(['Point','Size','Center','Left','Top','Right','Bottom','CenterX','CenterY','TopLeft','TopRight','BottomLeft','BottomRight','LeftCenter','TopCenter','RightCenter','BottomCenter'],function(t){var n='set'+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),M=A.extend({_class:'Matrix',initialize:function e(t,n){var i=arguments.length,a=!0;if(6<=i?this._set.apply(this,arguments):1===i||2===i?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):a=!1:i?a=!1:this.reset(),!a)throw new Error('Unsupported matrix parameters');return this},set:'#initialize',_set:function(e,t,n,i,a,s,r){return this._a=e,this._b=t,this._c=n,this._d=i,this._tx=a,this._ty=s,r||this._changed(),this},_serialize:function(e,t){return A.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(9))},clone:function(){return new M(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=I.instance;return'[['+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(', ')+'], ['+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(', ')+']]'},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,!0,A.pick(e,!0),t),this.isIdentity())},translate:function(){var e=O.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=O.read(arguments),t=O.read(arguments,0,{readNull:!0});return t&&this.translate(t),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this._changed(),this},rotate:function(e){e*=h/180;var t=O.read(arguments,1),n=t.x,i=t.y,s=f(e),r=m(e),o=n-n*s+i*r,l=i-n*r-i*s,p=this._a,a=this._b,_=this._c,c=this._d;return this._a=s*p+r*_,this._b=s*a+r*c,this._c=-r*p+s*_,this._d=-r*a+s*c,this._tx+=o*p+l*_,this._ty+=o*a+l*c,this._changed(),this},shear:function(){var e=O.read(arguments),t=O.read(arguments,0,{readNull:!0});t&&this.translate(t);var n=this._a,i=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*n,this._d+=e.x*i,t&&this.translate(t.negate()),this._changed(),this},skew:function(){var e=O.read(arguments),t=O.read(arguments,0,{readNull:!0}),n=h/180,i=new O(c(e.x*n),c(e.y*n));return this.shear(i,t)},append:function(e,t){if(e){var n=this._a,i=this._b,a=this._c,s=this._d,r=e._a,o=e._c,d=e._b,l=e._d,p=e._tx,c=e._ty;this._a=r*n+d*a,this._c=o*n+l*a,this._b=r*i+d*s,this._d=o*i+l*s,this._tx+=p*n+c*a,this._ty+=p*i+c*s,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,i=this._b,a=this._c,s=this._d,r=this._tx,o=this._ty,d=e._a,l=e._c,p=e._b,c=e._d,_=e._tx,g=e._ty;this._a=d*n+l*i,this._c=d*a+l*s,this._b=p*n+c*i,this._d=p*a+c*s,this._tx=d*r+l*o+_,this._ty=p*r+c*o+g,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,i=this._d,a=this._tx,s=this._ty,r=e*i-t*n,o=null;return r&&!isNaN(r)&&isFinite(a)&&isFinite(s)&&(this._a=i/r,this._b=-t/r,this._c=-n/r,this._d=e/r,this._tx=(n*s-i*a)/r,this._ty=(t*a-e*s)/r,o=this),o},inverted:function(){return this.clone().invert()},concatenate:'#append',preConcatenate:'#prepend',chain:'#appended',_shiftless:function(){return new M(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return 3>arguments.length?this._transformPoint(O.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var i=e.x,a=e.y;return t||(t=new O),t._set(i*this._a+a*this._c+this._tx,i*this._b+a*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var a=0;a<2*n;a+=2){var i=e[a],s=e[a+1];t[a]=i*this._a+s*this._c+this._tx,t[a+1]=i*this._b+s*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,i=t+e.width,a=n+e.height,s=[t,n,i,n,i,a,t,a];return this._transformCoordinates(s,s,4)},_transformBounds:function(e,t,n){for(var a=this._transformCorners(e),s=a.slice(0,2),r=s.slice(),o=2;8>o;o++){var i=a[o],d=1&o;i<s[d]?s[d]=i:i>r[d]&&(r[d]=i)}return t||(t=new B),t._set(s[0],s[1],r[0]-s[0],r[1]-s[1],n)},inverseTransform:function(){return this._inverseTransform(O.read(arguments))},_inverseTransform:function(e,t,n){var i=this._a,a=this._b,s=this._c,r=this._d,o=this._tx,d=this._ty,l=i*r-a*s,p=null;if(l&&!isNaN(l)&&isFinite(o)&&isFinite(d)){var c=e.x-this._tx,_=e.y-this._ty;t||(t=new O),p=t._set((c*r-_*s)/l,(_*i-c*a)/l,n)}return p},decompose:function(){var e=this._a,t=this._b,n=this._c,i=this._d,a=e*i-t*n,o=C,d=u,l=180/h,p,c,_;if(0!==e||0!==t){var m=o(e*e+t*t);p=g(e/m)*(0<t?1:-1),c=[m,a/m],_=[d(e*n+t*i,m*m),0]}else if(0!==n||0!==i){var r=o(n*n+i*i);p=Math.asin(n/r)*(0<i?1:-1),c=[a/r,r],_=[0,d(e*n+t*i,r*r)]}else p=0,_=c=[0,0];return{translation:this.getTranslation(),rotation:p*l,scaling:new O(c),skewing:new O(_[0]*l,_[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new O(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},A.each(['a','b','c','d','tx','ty'],function(e){var t=A.capitalize(e),n='_'+e;this['get'+t]=function(){return this[n]},this['set'+t]=function(e){this[n]=e,this._changed()}},{})),D=A.extend({_class:'Line',initialize:function(e,t,n,i,a){var s=!1;4<=arguments.length?(this._px=e,this._py=t,this._vx=n,this._vy=i,s=a):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new O(this._px,this._py)},getVector:function(){return new O(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return D.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return D.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return S(this.getSignedDistance(e))},getSignedDistance:function(e){return D.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return O.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return O.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,i,a,s,r,o,d,l){d||(n-=e,i-=t,r-=a,o-=s);var p=n*o-i*r;if(!E.isZero(p)){var c=e-a,_=t-s,g=(r*_-o*c)/p,u=(n*_-i*c)/p,h=1e-12,m=-h,f=1+h;if(l||m<g&&g<f&&m<u&&u<f)return l||(g=0>=g?0:1<=g?1:g),new O(e+g*n,t+g*i)}},getSide:function(e,t,n,i,a,s,r,o){r||(n-=e,i-=t);var d=a-e,l=d*i-(s-t)*n;return!o&&E.isZero(l)&&(l=(d*n+d*n)/(n*n+i*i),0<=l&&1>=l&&(l=0)),0>l?-1:0<l?1:0},getSignedDistance:function(e,t,n,i,a,s,r){return r||(n-=e,i-=t),0===n?0<i?a-e:e-a:0===i?0>n?s-t:t-s:((a-e)*i-(s-t)*n)/C(n*n+i*i)},getDistance:function(e,t,n,i,a,s,r){return S(D.getSignedDistance(e,t,n,i,a,s,r))}}}),F=T.extend({_class:'Project',_list:'projects',_reference:'project',_compactSerialize:!0,initialize:function(e){T.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new le(null,null,this),this._view=_e.create(this,e||ve.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return A.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&t){var a=this._changesById,s=t._id,r=a[s];r?r.flags|=e:i.push(a[s]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;0<=t;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new U({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:Z,match:function(n){var i=n._definition,a=i._id;return t[a]||(t[a]=!0,e.push(i)),!1}}),e},getSymbols:'getSymbolDefinitions',getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var i=e[n],a=i._selection;1&a&&i.isInserted()?t.push(i):!a&&this._updateSelection(i)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(void 0,e)},insertLayer:function(e,t){if(t instanceof U){t._remove(!1,!0),A.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(void 0,new U(q.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return q._getItems(this,e)},getItem:function(e){return q._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return A.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){'mouseup'===e&&(t.mousedrag=null);var n=t[e];if(n){for(var i in n){var a=n[i];for(var s in t){var r=t[s];r&&r!=n&&delete r[a._id]}a.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var a=this._children,s=new A({offset:new O(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new M],updateMatrix:!0}),r=0,i=a.length;r<i;r++)a[r].draw(e,s);if(e.restore(),0<this._selectionCount){e.save(),e.strokeWidth=1;var o=this._selectionItems,d=this._scope.settings.handleSize,l=this._updateVersion;for(var p in o)o[p]._drawSelection(e,t,d,o,l);e.restore()}}}),q=A.extend(k,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=A.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:'Item',_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:'normal',_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new M,pivot:null,visible:!0,blendMode:'normal',opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:['applyMatrix']},new function(){var e=['onMouseDown','onMouseUp','onMouseDrag','onClick','onDoubleClick','onMouseMove','onMouseEnter','onMouseLeave'];return A.each(e,function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&A.isPlainObject(e),i=n&&!0===e.internal,s=this._matrix=new M,r=n&&e.project||a.project,o=a.settings;return this._id=i?null:L.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,t&&s.translate(t),s._owner=this,this._style=new le(r._currentStyle,this,r),i||n&&!1==e.insert||!o.insertItems&&!(n&&!0===e.insert)?this._setProject(r):(n&&e.parent||r)._insertItem(void 0,this,!0),n&&e!==q.NO_INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){function n(n){for(var s in n){var r=a[s];A.equals(r,'leading'==s?1.2*n.fontSize:n[s])||(i[s]=A.serialize(r,e,'data'!=s,t))}}var i={},a=this;return n(this._serializeFields),this instanceof j||n(this._style._defaults),[this._class,i]},_changed:function(e){var t=this._symbol,n=this._parent||t,i=this._project;8&e&&(this._bounds=this._position=this._decomposed=this._globalMatrix=void 0),n&&40&e&&q._clearBoundsCache(n),2&e&&q._clearBoundsCache(this),i&&i._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+'')throw new Error('Names consisting only of numbers are not supported.');var t=this._getOwner();if(e&&t){var n=t._children,i=t._namedChildren;(i[e]=i[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||void 0,this._changed(128)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},A.each(['locked','visible','blendMode','opacity','guide'],function(e){var t=A.capitalize(e),n='_'+e,i={locked:128,visible:137};this['get'+t]=function(){return this[n]},this['set'+t]=function(t){t!=this[n]&&(this[n]=t,this._changed(i[e]||129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(129))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,i=e.length;n<i;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,i=t.length;n<i;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=this._position,n=e?O:N;if(!t){var i=this._pivot;t=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0)}return new n(t.x,t.y,this,'setPosition')},setPosition:function(){this.translate(O.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var e=this._pivot;return e?new N(e.x,e.y,this,'setPivot'):null},setPivot:function(){this._pivot=O.read(arguments,0,{clone:!0,readNull:!0}),this._position=void 0}},A.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(t){return this.getBounds(t,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof M,i=A.set({},n?t:e,this._boundsOptions);(!i.stroke||this.getStrokeScaling())&&(i.cacheItem=this);var a=this._getCachedBounds(n&&e,i).rect;return arguments.length?a:new V(a.x,a.y,a.width,a.height,this,'setBounds')},setBounds:function(){var e=B.read(arguments),t=this.getBounds(),n=this._matrix,i=new M,a=e.getCenter();i.translate(a),(e.width!=t.width||e.height!=t.height)&&(!n.isInvertible()&&(n.set(n._backup||new M().translate(n.getTranslation())),t=this.getBounds()),i.scale(0===t.width?0:e.width/t.width,0===t.height?0:e.height/t.height)),a=t.getCenter(),i.translate(-a.x,-a.y),this.transform(i)},_getBounds:function(e,t){var n=this._children;return n&&n.length?(q._updateBoundsCache(this,t.cacheItem),q._getBounds(n,e,t)):new B},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join('')},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var i=t.internal&&!n,a=t.cacheItem,s=i?null:this._matrix._orNullIfIdentity(),r=a&&(!e||e.equals(s))&&this._getBoundsCacheKey(t,i),o=this._bounds;if(q._updateBoundsCache(this._parent||this._symbol,a),r&&o&&r in o){var d=o[r];return{rect:d.rect.clone(),nonscaling:d.nonscaling}}var l=this._getBounds(e||s,t),p=l.rect||l,c=this._style,_=l.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(r){o||(this._bounds=o={});var d=o[r]={rect:p.clone(),nonscaling:_,internal:i}}return{rect:p,nonscaling:_}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():e;return i&&i._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,i=e._boundsCache=e._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(t),i.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=void 0;for(var n=0,i=t.list,a=i.length,s;n<a;n++)s=i[n],s!==e&&(s._bounds=s._position=void 0,s._boundsCache&&q._clearBoundsCache(s))}},_getBounds:function(e,t,n){var a=Infinity,s=-a,r=a,o=s,d=!1;n=n||{};for(var p=0,i=e.length,l;p<i;p++)if(l=e[p],l._visible&&!l.isEmpty()){var c=l._getCachedBounds(t&&t.appended(l._matrix),n,!0),g=c.rect;a=_(g.x,a),r=_(g.y,r),s=y(g.x+g.width,s),o=y(g.y+g.height,o),c.nonscaling&&(d=!0)}return{rect:isFinite(a)?new B(a,r,s-a,o-r):new B,nonscaling:d}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new N(t?t.x:1,t?t.y:1,this,'setScaling')},setScaling:function(){var e=this.getScaling(),t=O.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),i=this._decomposed,a=new M,s=this.getPosition(!0);a.translate(s),n&&a.rotate(n),a.scale(t.x/e.x,t.y/e.y),n&&a.rotate(-n),a.translate(s.negate()),this.transform(a),i&&(i.scaling=t,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix,n=this._project._updateVersion;if(t&&t._updateVersion!==n&&(t=null),!t){t=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&t.prepend(i.getGlobalMatrix(!0)),t._updateVersion=n}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:'#getApplyMatrix',setTransformContent:'#setApplyMatrix'},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,a=0,i=n&&n.length;a<i;a++)n[a]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,a=0,i=n&&n.length;a<i;a++)n[a]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof U)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:'#getParent',getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return A.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(q.NO_INSERT),n=this._children,a=A.pick(e?e.insert:void 0,void 0===e||!0===e),s=A.pick(e?e.deep:void 0,!0);n&&t.copyAttributes(this),(!n||s)&&t.copyContent(this),n||t.copyAttributes(this),a&&t.insertAbove(this);var r=this._name,o=this._parent;if(r&&o){for(var n=o._children,d=r,l=1;n[r];)r=d+' '+l++;r!==d&&t.setName(r)}return t},copyContent:function(e){for(var t=e._children,n=0,i=t&&t.length;n<i;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=['_locked','_visible','_blendMode','_opacity','_clipMask','_guide'],a=0,i=n.length,s;a<i;a++)s=n[a],e.hasOwnProperty(s)&&(this[s]=e[s]);t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var r=e._data,o=e._name;this._data=r?A.clone(r):null,o&&this.setName(o)},rasterize:function(e,t){var n=this.getStrokeBounds(),i=(e||this.getView().getResolution())/72,a=n.getTopLeft().floor(),s=n.getBottomRight().ceil(),r=new z(s.subtract(a)),o=new W(q.NO_INSERT);if(!r.isZero()){var d=ve.getCanvas(r.multiply(i)),l=d.getContext('2d'),p=new M().scale(i).translate(a.negate());l.save(),p.applyToContext(l),this.draw(l,new A({matrices:[p]})),l.restore(),o.setCanvas(d)}return o.transform(new M().translate(a.add(r.divide(2))).scale(1/i)),(void 0===t||t)&&o.insertAbove(this),o},contains:function(){return!!this._contains(this._matrix._inverseTransform(O.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;0<=n;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return B.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new ee.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return!!(e instanceof q)&&0<this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length}},new function(){function e(){return this._hitTest(O.read(arguments),X.getOptions(arguments))}function t(){var e=O.read(arguments),t=X.getOptions(arguments),n=[];return this._hitTest(e,A.set({all:n},t)),n}function n(e,t,n,a){var s=this._children;if(s)for(var r=s.length-1;0<=r;r--){var i=s[r],o=i!==a&&i._hitTest(e,t,n);if(o&&!t.all)return o}return null}return F.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){function a(e){return e&&c&&!c(e)&&(e=null),e&&t.all&&t.all.push(e),e}function s(t,n){var i=n?m['get'+n]():_.getPosition();if(1>=e.subtract(i).divide(l).length)return new X(t,_,{name:n?A.hyphenate(n):t,point:i})}if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,o=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),d=y(t.tolerance,1e-12),l=t._tolerancePadding=new z(ee._getStrokePadding(d,r._shiftless().invert()));if(e=r._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(l.multiply(2))._containsPoint(e))return null;var p=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==A.hyphenate(this._class)||t.class&&!(this instanceof t.class)),c=t.match,_=this,g=t.position,u=t.center,h=t.bounds,m,f;if(p&&this._parent&&(g||u||h)){if((u||h)&&(m=this.getInternalBounds()),f=g&&s('position')||u&&s('center','Center'),!f&&h)for(var x=['TopLeft','TopRight','BottomLeft','BottomRight','LeftCenter','TopCenter','RightCenter','BottomCenter'],b=0;8>b&&!f;b++)f=s('bounds',x[b]);f=a(f)}return f||(f=this._hitTestChildren(e,t,o)||p&&a(this._hitTestSelf(e,t,o,this.getStrokeScaling()?null:o._shiftless().invert()))||null),f&&f.point&&(f.point=r.transform(f.point)),f},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new X('fill',this)},matches:function(e,t){function n(e,t){for(var a in e)if(e.hasOwnProperty(a)){var i=e[a],s=t[a];if(A.isPlainObject(i)&&A.isPlainObject(s)){if(!n(i,s))return!1;}else if(!A.equals(i,s))return!1}return!0}var i=typeof e;if('object'==i){for(var a in e)if(e.hasOwnProperty(a)&&!this.matches(a,e[a]))return!1;return!0}if('function'==i)return e(this);if('match'===e)return t(this);var s=/^(empty|editable)$/.test(e)?this['is'+A.capitalize(e)]():'type'===e?A.hyphenate(this._class):this[e];if('class'===e){if('function'==typeof t)return this instanceof t;s=this._class}if('function'==typeof t)return!!t(s);if(t){if(t.test)return t.test(s);if(A.isPlainObject(t))return n(t,s)}return A.equals(s,t)},getItems:function(e){return q._getItems(this,e,this._matrix)},getItem:function(e){return q._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,a,s,r){if(!s){var o='object'==typeof n&&n,d=o&&o.overlapping,p=o&&o.inside,c=d||p,_=c&&B.read([c]);s={items:[],recursive:o&&!1!==o.recursive,inside:!!p,overlapping:!!d,rect:_,path:d&&new ee.Rectangle({rectangle:_,insert:!1})},o&&(n=A.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var g=t._children,u=s.items,_=s.rect;a=_&&(a||new M);for(var h=0,i=g&&g.length;h<i;h++){var l=g[h],m=a&&a.appended(l._matrix),f=!0;if(_){var c=l.getBounds(m);if(!_.intersects(c))continue;_.contains(c)||s.overlapping&&(c.contains(_)||s.path.intersects(l,m))||(f=!1)}if(f&&l.matches(n)&&(u.push(l),r))break;if(!1!==s.recursive&&e(l,n,m,s,r),r&&0<u.length)break}return u}}},{importJSON:function(e){var t=A.importJSON(e,this);return t===this?t:this.addChild(t)},addChild:function(e){return this.insertChild(void 0,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&0<t.length){t=A.slice(t);for(var a={},s=t.length-1;0<=s;s--){var i=t[s],r=i&&i._id;!i||a[r]?t.splice(s,1):(i._remove(!1,!0),a[r]=!0)}A.splice(n,t,e,0);for(var o=this._project,d=o._changes,s=0,p=t.length;s<p;s++){var i=t[s],l=i._name;i._parent=this,i._setProject(o,!0),l&&i.setName(l),d&&i._changed(5)}this._changed(11)}else t=null;return t},_insertItem:'#insertChild',_insertAt:function(e,t){var n=e&&e._getOwner(),i=e!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(e._index+t,i)),i},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(void 0,this):null},appendTop:'#addChild',appendBottom:function(e){return this.insertChild(0,e)},moveAbove:'#insertAbove',moveBelow:'#insertBelow',addTo:function(e){return e._insertItem(void 0,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,i=this._name,a=n[i],s=a?a.indexOf(this):-1;-1!==s&&(t[i]==this&&delete t[i],a.splice(s,1),a.length?t[i]=a[0]:delete n[i])}},_remove:function(e,t){var n=this._getOwner(),i=this._project,a=this._index;return!!n&&(this._name&&this._removeNamed(),null!=a&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),A.splice(n._children,null,a,1)),this._installEvents(!1),e&&i._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=A.pick(t,this._children.length);for(var n=A.splice(this._children,null,e,t-e),a=n.length-1;0<=a;a--)n[a]._remove(!0,!1);return 0<n.length&&this._changed(11),n},clear:'#removeChildren',reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(){var e=this._children;return!e||!e.length},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do t.unshift(e);while(e=e._parent);return t}for(var n=t(this),a=t(e),s=0,i=_(n.length,a.length);s<i;s++)if(n[s]!=a[s])return n[s]._index<a[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&0<this._children.length},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},A.each(['rotate','scale','shear','skew'],function(e){this[e]=function(){var t=('rotate'===e?A:O).read(arguments),n=O.read(arguments,0,{readNull:!0});return this.transform(new M()[e](t,n||this.getPosition(!0)))}},{translate:function(){var e=new M;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n,i){var a=this._matrix,s=e&&!e.isIdentity(),r=(t||this._applyMatrix)&&(!a.isIdentity()||s||t&&n&&this._children);if(!s&&!r)return this;if(s){!e.isInvertible()&&a.isInvertible()&&(a._backup=a.getValues()),a.prepend(e,!0);var o=this._style,d=o.getFillColor(!0),l=o.getStrokeColor(!0);d&&d.transform(e),l&&l.transform(e)}if(r&&(r=this._transformContent(a,n,i))){var p=this._pivot;p&&a._transformPoint(p,p,!0),a.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,_=this._position;(s||r)&&this._changed(9);var g=s&&c&&e.decompose();if(g&&g.skewing.isZero()&&0==g.rotation%90){for(var u in c){var h=c[u];if(h.nonscaling)delete c[u];else if(r||!h.internal){var m=h.rect;e._transformBounds(m,m)}}this._bounds=c;var f=c[this._getBoundsCacheKey(this._boundsOptions||{})];f&&(this._position=f.rect.getCenter(!0))}else s&&_&&this._pivot&&(this._position=e._transformPoint(_,_));return this},_transformContent:function(e,t,n){var a=this._children;if(a){for(var s=0,i=a.length;s<i;s++)a[s].transform(e,!0,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(O.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(O.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(O.read(arguments))},localToParent:function(){return this._matrix._transformPoint(O.read(arguments))},fitBounds:function(e,t){e=B.read(arguments);var n=this.getBounds(),i=n.height/n.width,a=e.height/e.width,s=(t?i>a:i<a)?e.width/n.width:e.height/n.height,r=new B(new O(),new z(n.width*s,n.height*s));r.setCenter(e.getCenter()),this.setBounds(r)}}),{_setStyles:function(e,t,n){var i=this._style,s=this._matrix;if(i.hasFill()&&(e.fillStyle=i.getFillColor().toCanvasStyle(e,s)),i.hasStroke()){e.strokeStyle=i.getStrokeColor().toCanvasStyle(e,s),e.lineWidth=i.getStrokeWidth();var r=i.getStrokeJoin(),o=i.getStrokeCap(),d=i.getMiterLimit();if(r&&(e.lineJoin=r),o&&(e.lineCap=o),d&&(e.miterLimit=d),a.support.nativeDash){var l=i.getDashArray(),p=i.getDashOffset();l&&l.length&&('setLineDash'in e?(e.setLineDash(l),e.lineDashOffset=p):(e.mozDash=l,e.mozDashOffset=p))}}if(i.hasShadow()){var c=t.pixelRatio||1,_=n._shiftless().prepend(new M().scale(c,c)),g=_.transform(new O(i.getShadowBlur(),0)),u=_.transform(this.getShadowOffset());e.shadowColor=i.getShadowColor().toCanvasStyle(e),e.shadowBlur=g.getLength(),e.shadowOffsetX=u.x,e.shadowOffsetY=u.y}},draw:function(e,t,n){var i=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var a=t.matrices,s=t.viewMatrix,r=this._matrix,o=a[a.length-1].appended(r);if(o.isInvertible()){s=s?s.appended(o):o,a.push(o),t.updateMatrix&&(o._updateVersion=i,this._globalMatrix=o);var d=this._blendMode,l=this._opacity,p='normal'===d,c=Ce.nativeModes[d],_=p&&1===l||t.dontStart||t.clip||(c||p&&1>l)&&this._canComposite(),g=t.pixelRatio||1,u,h,m;if(!_){var f=this.getStrokeBounds(s);if(!f.width||!f.height)return;m=t.offset,h=t.offset=f.getTopLeft().floor(),u=e,e=ve.getContext(f.getSize().ceil().add(1).multiply(g)),1!==g&&e.scale(g,g)}e.save();var y=n?n.appended(r):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,x=!_&&t.clipItem,b=!y||x;if(_?(e.globalAlpha=l,c&&(e.globalCompositeOperation=d)):b&&e.translate(-h.x,-h.y),b&&(_?r:s).applyToContext(e),x&&t.clipItem.draw(e,t.extend({clip:!0})),y){e.setTransform(g,0,0,g,0,0);var v=t.offset;v&&e.translate(-v.x,-v.y)}this._draw(e,t,s,y),e.restore(),a.pop(),t.clip&&!t.dontFinish&&e.clip(),_||(Ce.process(d,e,u,l,h.subtract(m).multiply(g)),ve.release(e),t.offset=m)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof te)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,a,s){var r=this._selection,o=1&r,d=2&r||o&&this._selectBounds,l=4&r;if(this._drawSelected||(o=!1),(o||d||l)&&this._isUpdated(s)){var p=this.getSelectedColor(!0)||(g=this.getLayer())&&g.getSelectedColor(!0),c=t.appended(this.getGlobalMatrix(!0)),_=n/2,g;if(e.strokeStyle=e.fillStyle=p?p.toCanvasStyle(e):'#009dec',o&&this._drawSelected(e,c,a),l){var u=this.getPosition(!0),m=u.x,f=u.y;e.beginPath(),e.arc(m,f,_,0,2*h,!0),e.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],x=_,b=n+1,v=0;4>v;v++){var i=y[v],C=i[0],S=i[1];e.moveTo(m+C*x,f+S*x),e.lineTo(m+C*b,f+S*b),e.stroke()}}if(d){var w=c._transformCorners(this.getInternalBounds());e.beginPath();for(var v=0;8>v;v++)e[v?'lineTo':'moveTo'](w[v],w[++v]);e.closePath(),e.stroke();for(var v=0;8>v;v++)e.fillRect(w[v]-_,w[++v]-_,n,n)}}},_canComposite:function(){return!1}},A.each(['down','drag','up','move'],function(e){this['removeOn'+A.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n='mouse'+t,i=this._project,a=i._removeSets=i._removeSets||{};a[n]=a[n]||{},a[n][this._id]=this}return this}})),j=q.extend({_class:'Group',_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(t){e.base.call(this,t),1026&t&&(this._clipItem=void 0)},_getClipItem:function(){var e=this._clipItem;if(void 0===e){e=null;for(var t=this._children,n=0,i=t.length;n<i;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var i=this._getClipItem();return i?i._getCachedBounds(t&&t.appended(i._matrix),A.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,i){var a=this._getClipItem();return(!a||a.contains(t))&&e.base.call(this,t,n,i,a)},_draw:function(e,t){var n=t.clip,a=!n&&this._getClipItem();t=t.extend({clipItem:a,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):a&&a.draw(e,t.extend({clip:!0}));for(var s=this._children,r=0,i=s.length,o;r<i;r++)o=s[r],o!==a&&o.draw(e,t)}}),U=j.extend({_class:'Layer',initialize:function(){j.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),H=q.extend({_class:'Shape',_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&A.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:'#getType',setShape:'#setType',getSize:function(){var e=this._size;return new R(e.width,e.height,this,'setSize')},setSize:function(){var e=z.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,n=e.width,i=e.height;'rectangle'===t?this._radius.set(z.min(this._radius,e.divide(2))):'circle'===t?(n=i=(n+i)/2,this._radius=n/2):'ellipse'===t&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}},getRadius:function(){var e=this._radius;return'circle'===this._type?e:new R(e.width,e.height,this,'setRadius')},setRadius:function(e){var t=this._type;if('circle'===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size._set(n,n)}else if(e=z.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),'rectangle'===t){var n=z.max(this._size,e.multiply(2));this._size.set(n)}else'ellipse'===t&&this._size._set(2*e.width,2*e.height)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new ee[A.capitalize(this._type)]({center:new O,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),a.settings.applyMatrix&&t.setApplyMatrix(!0),(void 0===e||e)&&t.insertAbove(this),t},toShape:'#clone',_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,i){var a=this._style,s=a.hasFill(),r=a.hasStroke(),o=t.dontFinish||t.clip,d=!i;if(s||r||o){var l=this._type,p=this._radius,_='circle'===l;if(t.dontStart||e.beginPath(),d&&_)e.arc(0,0,p,0,2*h,!0);else{var g=_?p:p.width,u=_?p:p.height,m=this._size,f=m.width,b=m.height;if(d&&'rectangle'===l&&0===g&&0===u)e.rect(-f/2,-b/2,f,b);else{var v=f/2,C=b/2,S=1-0.5522847498307936,w=g*S,k=u*S,A=[-v,-C+u,-v,-C+k,-v+w,-C,-v+g,-C,v-g,-C,v-w,-C,v,-C+k,v,-C+u,v,C-u,v,C-k,v-w,C,v-g,C,-v+g,C,-v+w,C,-v,C-k,-v,C-u];i&&i.transform(A,A,32),e.moveTo(A[0],A[1]),e.bezierCurveTo(A[2],A[3],A[4],A[5],A[6],A[7]),v!==g&&e.lineTo(A[8],A[9]),e.bezierCurveTo(A[10],A[11],A[12],A[13],A[14],A[15]),C!==u&&e.lineTo(A[16],A[17]),e.bezierCurveTo(A[18],A[19],A[20],A[21],A[22],A[23]),v!==g&&e.lineTo(A[24],A[25]),e.bezierCurveTo(A[26],A[27],A[28],A[29],A[30],A[31])}}e.closePath()}!o&&(s||r)&&(this._setStyles(e,t,n),s&&(e.fill(a.getFillRule()),e.shadowColor='rgba(0,0,0,0)'),r&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new B(this._size).setCenter(0,0),i=this._style,a=t.stroke&&i.hasStroke()&&i.getStrokeWidth();return e&&(n=e._transformBounds(n)),a?n.expand(ee._getStrokePadding(a,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var i=e._radius;if(!i.isZero())for(var a=e._size.divide(2),s=1;4>=s;s++){var r=new O(1<s&&4>s?-1:1,2<s?-1:1),o=r.multiply(a),d=o.subtract(r.multiply(i)),l=new B(n?o.add(r.multiply(n)):o,d);if(l.contains(t))return{point:d,quadrant:s}}}function t(e,t,n,i){var a=e.divide(t);return(!i||a.isInQuadrant(i))&&1>=a.subtract(a.normalize()).multiply(t).divide(n).length}return{_contains:function t(n){if('rectangle'===this._type){var i=e(this,n);return i?1>=n.subtract(i.point).divide(this._radius).getLength():t.base.call(this,n)}return 0.5>=n.divide(this.size).getLength()},_hitTestSelf:function n(i,a,s,r){var o=!1,d=this._style,l=a.stroke&&d.hasStroke(),p=a.fill&&d.hasFill();if(l||p){var c=this._type,_=this._radius,g=l?d.getStrokeWidth()/2:0,u=a._tolerancePadding.add(ee._getStrokePadding(g,!d.getStrokeScaling()&&r));if('rectangle'===c){var h=u.multiply(2),m=e(this,i,h);if(m)o=t(i.subtract(m.point),_,u,m.quadrant);else{var f=new B(this._size).setCenter(0,0),y=f.expand(h),x=f.expand(h.negate());o=y._containsPoint(i)&&!x._containsPoint(i)}}else o=t(i,_,u)}return o?new X(l?'stroke':'fill',this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,i,a){var s=new H(A.getNamed(a),t);return s._type=e,s._size=n,s._radius=i,s}return{Circle:function(){var t=O.readNamed(arguments,'center'),n=A.readNamed(arguments,'radius');return e('circle',t,new z(2*n),n,arguments)},Rectangle:function(){var t=B.readNamed(arguments,'rectangle'),n=z.min(z.readNamed(arguments,'radius'),t.getSize(!0).divide(2));return e('rectangle',t.getCenter(!0),t.getSize(!0),n,arguments)},Ellipse:function(){var t=H._readEllipse(arguments),n=t.radius;return e('ellipse',t.center,n.multiply(2),n,arguments)},_readEllipse:function(e){var t,n;if(A.hasNamed(e,'radius'))t=O.readNamed(e,'center'),n=z.readNamed(e,'radius');else{var i=B.readNamed(e,'rectangle');t=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),W=q.extend({_class:'Raster',_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:['crossOrigin'],initialize:function(e,t){if(!this._initialize(e,void 0!==t&&O.read(arguments,1))){var n='string'==typeof e?w.getElementById(e):e;n?this.setImage(n):this.setSource(e)}this._size||(this._size=new z,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var i=ve.getCanvas(e._size);i.getContext('2d').drawImage(n,0,0),this._setImage(i)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new R(e?e.width:0,e?e.height:0,this,'setSize')},setSize:function(){var e=z.read(arguments);if(!e.equals(this._size))if(0<e.width&&0<e.height){var t=this.getElement();this._setImage(ve.getCanvas(e)),t&&this.getContext(!0).drawImage(t,0,0,e.width,e.height)}else this._canvas&&ve.release(this._canvas),this._size=e.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new O(0,0).transform(e),n=new O(1,0).transform(e).subtract(t),i=new O(0,1).transform(e).subtract(t);return new z(72/n.getLength(),72/i.getLength())},getPpi:'#getResolution',getImage:function(){return this._image},setImage:function(e){function t(e){var t=n.getView(),i=e&&e.type||'load';t&&n.responds(i)&&(a=t._scope,n.emit(i,new ue(e)))}var n=this;this._setImage(e),this._loaded?setTimeout(t,0):e&&ce.add(e,{load:function(i){n._setImage(e),t(i)},error:t})},_setImage:function(e){this._canvas&&ve.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new z(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var e=ve.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){ve.release(e)}}return this._canvas},setCanvas:'#setImage',getContext:function(e){return this._context||(this._context=this.getCanvas().getContext('2d')),e&&(this._image=null,this._changed(513)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new d.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),t.src=e,this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||''},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=B.read(arguments),t=ve.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=B.read(arguments),t=new W(q.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=O.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof $?(n=e,t=e.getBounds()):'object'==typeof e&&('width'in e?t=new B(e):'x'in e&&(t=new B(e.x-0.5,e.y-0.5,1,1))):t=this.getBounds(),!t)return null;var a=32,s=_(t.width,a),r=_(t.height,a),o=W._sampleContext;o?o.clearRect(0,0,a+1,a+1):o=W._sampleContext=ve.getContext(new z(a)),o.save();var d=new M().scale(s/t.width,r/t.height).translate(-t.x,-t.y);d.applyToContext(o),n&&n.draw(o,new A({clip:!0,matrices:[d]})),this._matrix.applyToContext(o);var c=this.getElement(),g=this._size;c&&o.drawImage(c,-g.width/2,-g.height/2),o.restore();for(var u=o.getImageData(0.5,0.5,p(s),p(r)).data,h=[0,0,0],m=0,f=0,i=u.length,l;f<i;f+=4)l=u[f+3],m+=l,l/=255,h[0]+=u[f]*l,h[1]+=u[f+1]*l,h[2]+=u[f+2]*l;for(var f=0;3>f;f++)h[f]/=m;return m?re.read(h):null},getPixel:function(){var e=O.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new re('rgb',[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=O.read(arguments),t=re.read(arguments),n=t._convert('rgb'),i=t._alpha,a=this.getContext(!0),s=a.createImageData(1,1),r=s.data;r[0]=255*n[0],r[1]=255*n[1],r[2]=255*n[2],r[3]=null==i?255:255*i,a.putImageData(s,e.x,e.y)},createImageData:function(){var e=z.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=B.read(arguments);return e.isEmpty()&&(e=new B(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e){var t=O.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e){var t=new B(this._size).setCenter(0,0);return e?e._transformBounds(t):t},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new X('pixel',t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e){var t=this.getElement();t&&(e.globalAlpha=this._opacity,e.drawImage(t,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),Z=q.extend({_class:'SymbolItem',_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,void 0!==t&&O.read(arguments,1))||this.setDefinition(e instanceof G?e:new G(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:'#getDefinition',setSymbol:'#setDefinition',isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var i=this._definition._item._hitTest(e,t,n);return i&&(i.item=this),i},_draw:function(e,t){this._definition._item.draw(e,t)}}),G=A.extend({_class:'SymbolDefinition',initialize:function(e,t){this._id=L.get(),this.project=a.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,function(){return A.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){8&e&&q._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new O),e._symbol=this,this._changed(9)},getDefinition:'#getItem',setDefinition:'#setItem',place:function(e){return new Z(this,e)},clone:function(){return new G(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),X=A.extend({_class:'HitResult',initialize:function(e,t,n){this.type=e,this.item=t,n&&this.inject(n)},statics:{getOptions:function(e){var t=e&&A.read(e);return A.set({type:null,tolerance:a.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),Y=A.extend({_class:'Segment',beans:!0,_selection:0,initialize:function(e,t,n,i,a,s){var r=arguments.length,o,d,l,p;0<r&&(null==e||'object'==typeof e?1===r&&e&&'point'in e?(o=e.point,d=e.handleIn,l=e.handleOut,p=e.selection):(o=e,d=t,l=n,p=i):(o=[e,t],d=void 0===n?null:[n,i],l=void 0===a?null:[a,s])),new J(o,this,'_point'),new J(d,this,'_handleIn'),new J(l,this,'_handleOut'),p&&this.setSelection(p)},_serialize:function(e,t){var n=this._point,i=this._selection,a=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&a.push(i),A.serialize(a,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n=t._curves,i=this._index,a;n&&((!e||e===this._point||e===this._handleIn)&&(a=0<i?n[i-1]:t._closed?n[n.length-1]:null)&&a._changed(),(!e||e===this._point||e===this._handleOut)&&(a=n[i])&&a._changed()),t._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(O.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(O.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(O.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(129))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return void 0===this._index?null:this._index},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(0<t&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new Q(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,n,i){var s=e||{},r=s.type,o=s.factor,d=this.getPrevious(),l=this.getNext(),p=(d||this)._point,c=this._point,_=(l||this)._point,g=p.getDistance(c),u=c.getDistance(_);if(!r||'catmull-rom'===r){var h=void 0===o?0.5:o,a=b(g,h),m=a*a,f=b(u,h),y=f*f;if(!n&&d){var x=2*y+3*f*a+m,v=3*f*(f+a);this.setHandleIn(0==v?new O:new O((y*p._x+x*c._x-m*_._x)/v-c._x,(y*p._y+x*c._y-m*_._y)/v-c._y))}if(!i&&l){var x=2*m+3*a*f+y,v=3*a*(a+f);this.setHandleOut(0==v?new O:new O((m*_._x+x*c._x-y*p._x)/v-c._x,(m*_._y+x*c._y-y*p._y)/v-c._y))}}else if('geometric'!==r)throw new Error('Smoothing method \''+r+'\' not supported.');else if(d&&l){var C=p.subtract(_),S=void 0===o?0.4:o,t=S*g/(g+u);n||this.setHandleIn(C.multiply(t)),i||this.setHandleOut(C.multiply(t-S))}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new Y(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new Y(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=['point: '+this._point];return this._handleIn.isZero()||e.push('handleIn: '+this._handleIn),this._handleOut.isZero()||e.push('handleOut: '+this._handleOut),'{ '+e.join(', ')+' }'},transform:function(e){this._transformCoordinates(e,[,,,,,,],!0),this._changed()},interpolate:function(e,t,n){var i=1-n,a=n,s=e._point,r=t._point,o=e._handleIn,d=t._handleIn,l=t._handleOut,p=e._handleOut;this._point._set(i*s._x+a*r._x,i*s._y+a*r._y,!0),this._handleIn._set(i*o._x+a*d._x,i*o._y+a*d._y,!0),this._handleOut._set(i*p._x+a*l._x,i*p._y+a*l._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var a=this._point,s=n&&this._handleIn.isZero()?null:this._handleIn,r=n&&this._handleOut.isZero()?null:this._handleOut,o=a._x,d=a._y,l=2;return t[0]=o,t[1]=d,s&&(t[l++]=s._x+o,t[l++]=s._y+d),r&&(t[l++]=r._x+o,t[l++]=r._y+d),e&&(e._transformCoordinates(t,t,l/2),o=t[0],d=t[1],n?(a._x=o,a._y=d,l=2,s&&(s._x=t[l++]-o,s._y=t[l++]-d),r&&(r._x=t[l++]-o,r._y=t[l++]-d)):(!s&&(t[l++]=o,t[l++]=d),!r&&(t[l++]=o,t[l++]=d))),t}}),J=O.extend({initialize:function(e,t,n){var i,a,s;if(!e)i=a=0;else if(void 0!==(i=e[0]))a=e[1];else{var r=e;void 0===(i=r.x)&&(r=O.read(arguments),i=r.x),a=r.y,s=r.selected}this._x=i,this._y=a,this._owner=t,t[n]=this,s&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=E.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),K=A.extend({_class:'Curve',beans:!0,initialize:function(e,t,n,i,a,s,r,o){var d=arguments.length,l,p,c,_,g,u;3===d?(this._path=e,l=t,p=n):d?1===d?'segment1'in e?(l=new Y(e.segment1),p=new Y(e.segment2)):'point1'in e?(c=e.point1,g=e.handle1,u=e.handle2,_=e.point2):Array.isArray(e)&&(c=[e[0],e[1]],_=[e[6],e[7]],g=[e[2]-e[0],e[3]-e[1]],u=[e[4]-e[6],e[5]-e[7]]):2===d?(l=new Y(e),p=new Y(t)):4===d?(c=e,g=t,u=n,_=i):8===d&&(c=[e,t],_=[r,o],g=[n-e,i-t],u=[a-r,s-o]):(l=new Y,p=new Y),this._segment1=l||new Y(c,null,g),this._segment2=p||new Y(_,u,null)},_serialize:function(e,t){return A.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=void 0},clone:function(){return new K(this._segment1,this._segment2)},toString:function(){var e=['point1: '+this._segment1._point];return this._segment1._handleOut.isZero()||e.push('handle1: '+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push('handle2: '+this._segment2._handleIn),e.push('point2: '+this._segment2._point),'{ '+e.join(', ')+' }'},classify:function(){return K.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(O.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(O.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(O.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(O.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return K.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;8>n;n+=2)t.push(new O(e[n],e[n+1]));return t}},{getLength:function(){return null==this._length&&(this._length=K.getLength(this.getValues(),0,1)),this._length},getArea:function(){return K.getArea(this.getValues())},getLine:function(){return new D(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new K(K.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return K.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=1e-8,i=null;if(e>=n&&e<=1-n){var a=K.subdivide(this.getValues(),e),s=a[0],r=a[1],o=t||this.hasHandles(),d=this._segment1,l=this._segment2,p=this._path;o&&(d._handleOut._set(s[2]-s[0],s[3]-s[1]),l._handleIn._set(r[4]-r[6],r[5]-r[7]));var c=s[6],_=s[7],g=new Y(new O(c,_),o&&new O(s[4]-c,s[5]-_),o&&new O(r[2]-c,r[3]-_));p?(p.insert(d._index+1,g),i=this.getNext()):(this._segment2=g,this._changed(),i=new K(g,l))}return i},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(void 0===e?0.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(void 0===e?0.5:t?e:this.getTimeAt(e))},reversed:function(){return new K(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,i){var a=e._point,s=e._handleOut,r=t._handleIn,o=t._point,d=a.x,l=a.y,p=o.x,c=o.y,_=i?[d,l,d,l,p,c,p,c]:[d,l,d+s._x,l+s._y,p+r._x,c+r._y,p,c];return n&&n._transformCoordinates(_,_,4),_},subdivide:function(e,n){var t=e[0],i=e[1],a=e[2],s=e[3],r=e[4],o=e[5],d=e[6],l=e[7];void 0===n&&(n=0.5);var p=1-n,c=p*t+n*a,_=p*i+n*s,g=p*a+n*r,u=p*s+n*o,h=p*r+n*d,m=p*o+n*l,f=p*c+n*g,y=p*_+n*u,x=p*g+n*h,b=p*u+n*m,v=p*f+n*x,C=p*y+n*b;return[[t,i,c,_,f,y,v,C],[v,C,x,b,h,m,d,l]]},getMonoCurves:function(e,i){var a=[],s=i?0:1,r=e[s+0],o=e[s+2],d=e[s+4],l=e[s+6];if(r>=o==o>=d&&o>=d==d>=l||K.isStraight(e))a.push(e);else{var p=1e-8,c=[],_=E.solveQuadratic(3*(o-d)-r+l,2*(r+d)-4*o,o-r,c,p,1-p);if(!_)a.push(e);else{c.sort();var g=c[0],t=K.subdivide(e,g);a.push(t[0]),1<_&&(g=(c[1]-g)/(1-g),t=K.subdivide(t[1],g),a.push(t[0])),a.push(t[1])}}return a},solveCubic:function(e,t,n,i,a,s){var r=e[t],o=e[t+2],d=e[t+4],l=e[t+6],p=0;if(!(r<n&&l<n&&o<n&&d<n||r>n&&l>n&&o>n&&d>n)){var _=3*(o-r),c=3*(d-o)-_;p=E.solveCubic(l-r-_-c,c,_,r-n,i,a,s)}return p},getTimeOf:function(e,n){var a=new O(e[0],e[1]),s=new O(e[6],e[7]),r=1e-12,o=1e-7,d=n.isClose(a,r)?0:n.isClose(s,r)?1:null;if(null===d)for(var t=[n.x,n.y],l=[],p=0,c;2>p;p++){c=K.solveCubic(e,p,t[p],l,0,1);for(var _=0,i;_<c;_++)if(i=l[_],n.isClose(K.getPoint(e,i),o))return i}return n.isClose(a,o)?0:n.isClose(s,o)?1:null},getNearestTime:function(e,n){function t(i){if(0<=i&&1>=i){var t=n.getDistance(K.getPoint(e,i),!0);if(t<g)return g=t,u=i,!0}}if(K.isStraight(e)){var a=e[0],s=e[1],r=e[6],o=e[7],d=r-a,l=o-s,p=d*d+l*l;if(0==p)return 0;var c=((n.x-a)*d+(n.y-s)*l)/p;return 1e-12>c?0:0.999999999999<c?1:K.getTimeOf(e,new O(a+c*d,s+c*l))}for(var _=100,g=Infinity,u=0,h=0;h<=_;h++)t(h/_);for(var i=1/(2*_);1e-8<i;)t(u-i)||t(u+i)||(i/=2);return u},getPart:function(e,t,n){var i=t>n;if(i){var a=t;t=n,n=a}return 0<t&&(e=K.subdivide(e,t)[1]),1>n&&(e=K.subdivide(e,(n-t)/(1-t))[0]),i?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],i=e[1],a=e[2],s=e[3],r=e[4],o=e[5],d=e[6],l=e[7],p=3*a-2*n-d,c=3*s-2*i-l,_=3*r-2*d-n,g=3*o-2*l-i;return y(p*p,_*_)+y(c*c,g*g)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],r=e[5],o=e[6],d=e[7];return 3*((d-n)*(i+s)-(o-t)*(a+r)+a*(t-s)-i*(n-r)+d*(s+t/3)-o*(r+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),a=[0,0],s=0;2>s;s++)K._addBounds(e[s],e[s+2],e[s+4],e[s+6],s,0,t,n,a);return new B(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,n,a,s,r,o,d,l,p){function c(e,t){var n=e-t,i=e+t;n<d[r]&&(d[r]=n),i>l[r]&&(l[r]=i)}o/=2;var _=d[r]-o,g=l[r]+o;if(e<_||n<_||a<_||s<_||e>g||n>g||a>g||s>g)if(n<e!=n<s&&a<e!=a<s)c(e,o),c(s,o);else{var h=E.solveQuadratic(3*(n-a)-e+s,2*(e+a)-4*n,n-e,p),m=1e-8;c(s,0);for(var f=0;f<h;f++){var i=p[f],t=1-i;m<=i&&i<=1-m&&c(t*t*t*e+3*t*t*i*n+3*t*i*i*a+i*i*i*s,o)}}}}},A.each(['getBounds','getStrokeBounds','getHandleBounds'],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=ee[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),A.each({isStraight:function(e,t,n,i){if(t.isZero()&&n.isZero())return!0;var a=i.subtract(e);if(a.isZero())return!1;if(a.isCollinear(t)&&a.isCollinear(n)){var s=new D(e,i),r=1e-7;if(s.getDistance(e.add(t))<r&&s.getDistance(i.add(n))<r){var o=a.dot(a),d=a.dot(t)/o,l=a.dot(n)/o;return 0<=d&&1>=d&&0>=l&&-1<=l}}return!1},isLinear:function(e,t,n,i){var a=i.subtract(e).divide(3);return t.equals(a)&&n.negate().equals(a)}},function(e,t){this[t]=function(t){var n=this._segment1,i=this._segment2;return e(n._point,n._handleOut,i._handleIn,i._point,t)},this.statics[t]=function(t,n){var i=t[0],a=t[1],s=t[6],r=t[7];return e(new O(i,a),new O(t[2]-i,t[3]-a),new O(t[4]-s,t[5]-r),new O(s,r),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&1e-8>S(this.getTangentAtTime(0.5).y)},isVertical:function(){return this.isStraight()&&1e-8>S(this.getTangentAtTime(0.5).x)}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&0<=e&&1>=e?new Q(this,e):null},getTimeAt:function(e,t){return K.getTimeAt(this.getValues(),e,t)},getParameterAt:'#getTimeAt',getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(O.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return K.getTimeOf(this.getValues(),O.read(arguments))},getParameterOf:'#getTimeOf',getNearestLocation:function(){var e=O.read(arguments),n=this.getValues(),i=K.getNearestTime(n,e),t=K.getPoint(n,i);return new Q(this,i,t,null,e.getDistance(t))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e}},new function(){var e=['getPoint','getTangent','getNormal','getWeightedTangent','getWeightedNormal','getCurvature'];return A.each(e,function(e){this[e+'At']=function(t,n){var i=this.getValues();return K[e](i,n?t:K.getTimeAt(i,t))},this[e+'AtTime']=function(t){return K[e](this.getValues(),t)}},{statics:{_evaluateMethods:e}})},new function(){function e(e){var n=e[0],i=e[1],a=e[2],s=e[3],r=e[4],o=e[5],d=e[6],l=e[7];return function(e){var t=((9*(a-r)+3*(d-n))*e+(6*(n+r)-12*a))*e+3*(a-n),p=((9*(s-o)+3*(l-i))*e+(6*(i+o)-12*s))*e+3*(s-i);return C(t*t+p*p)}}function n(e,t){return y(2,_(16,p(32*S(t-e))))}function i(e,n,t,i){if(null==n||0>n||1<n)return null;var a=e[0],s=e[1],r=e[2],o=e[3],l=e[4],p=e[5],c=e[6],_=e[7],g=E.isZero;g(r-a)&&g(o-s)&&(r=a,o=s),g(l-c)&&g(p-_)&&(l=c,p=_);var u=3*(r-a),h=3*(l-r)-u,m=c-a-u-h,f=3*(o-s),v=3*(p-o)-f,S=_-s-f-v,w,k;if(0===t)w=0===n?a:1===n?c:((m*n+h)*n+u)*n+a,k=0===n?s:1===n?_:((S*n+v)*n+f)*n+s;else{var y=1e-8,A=1-y;if(n<y?(w=u,k=f):n>A?(w=3*(c-l),k=3*(_-p)):(w=(3*m*n+2*h)*n+u,k=(3*S*n+2*v)*n+f),i){0===w&&0===k&&(n<y||n>A)&&(w=l-r,k=p-o);var P=C(w*w+k*k);P&&(w/=P,k/=P)}if(3===t){var l=6*m*n+2*h,p=6*S*n+2*v,T=b(w*w+k*k,3/2);w=0===T?0:(w*p-k*l)/T,k=0}}return 2===t?new O(k,-w):new O(w,k)}return{statics:{classify:function(e){function t(e,t,n){var i=void 0!==t,a=i&&0<t&&1>t,s=i&&0<n&&1>n;return!i||(a||s)&&('loop'!==e||a&&s)||(e='arch',a=s=!1),{type:e,roots:a||s?a&&s?t<n?[t,n]:[n,t]:[a?t:n]:null}}var n=e[0],i=e[1],a=e[2],r=e[3],o=e[4],p=e[5],c=e[6],_=e[7],g=a*(i-_)+r*(c-n)+n*_-i*c,u=3*(o*(r-i)+p*(n-a)+a*i-r*n),h=u-g,m=h-g+(n*(_-p)+i*(o-c)+c*p-_*o),f=C(m*m+h*h+u*u),l=0===f?0:1/f,s=E.isZero,y='serpentine';if(m*=l,h*=l,u*=l,s(m))return s(h)?t(s(u)?'line':'quadratic'):t(y,u/(3*h));var x=3*h*h-4*m*u;if(s(x))return t('cusp',h/(2*m));var b=0<x?C(x/3):C(-x),v=2*m;return t(0<x?y:'loop',(h+b)/v,(h-b)/v)},getLength:function(t,i,a,s){if(void 0===i&&(i=0),void 0===a&&(a=1),K.isStraight(t)){var r=t;1>a&&(r=K.subdivide(r,a)[0],i/=a),0<i&&(r=K.subdivide(r,i)[1]);var o=r[6]-r[0],d=r[7]-r[1];return C(o*o+d*d)}return E.integrate(s||e(t),i,a,n(i,a))},getTimeAt:function(t,i,s){if(void 0===s&&(s=0>i?1:0),0===i)return s;var r=S,o=1e-12,d=0<i,l=d?s:0,a=d?1:s,p=e(t),c=K.getLength(t,l,a,p),_=r(i)-c;if(r(_)<o)return d?a:l;if(_>o)return null;var g=0;return E.findRoot(function(e){return g+=E.integrate(p,s,e,n(s,e)),s=e,g-i},p,s+i/c,l,a,32,1e-12)},getPoint:function(e,n){return i(e,n,0,!1)},getTangent:function(e,n){return i(e,n,1,!0)},getWeightedTangent:function(e,n){return i(e,n,1,!1)},getNormal:function(e,n){return i(e,n,2,!0)},getWeightedNormal:function(e,n){return i(e,n,2,!1)},getCurvature:function(e,n){return i(e,n,3,!1).x},getPeaks:function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],r=e[5],o=e[6],d=e[7],l=-t+3*i-3*s+o,p=3*t-6*i+3*s,c=-3*t+3*i,_=-n+3*a-3*r+d,g=3*n-6*a+3*r,u=-3*n+3*a,h=1e-8,m=[];return E.solveCubic(9*(l*l+_*_),9*(l*p+g*_),2*(p*p+g*g)+3*(c*l+u*_),c*p+g*u,m,h,1-h),m.sort()}}}},new function(){function e(e,t,n,i,a,s,r){var o=!r&&n.getPrevious()===a,d=!r&&n!==a&&n.getNext()===a,l=1e-8,p=1-l;if(null!==i&&i>=(o?l:0)&&i<=(d?p:1)&&null!==s&&s>=(d?l:0)&&s<=(o?p:1)){var c=new Q(n,i,null,r),_=new Q(a,s,null,r);c._intersection=_,_._intersection=c,(!t||t(c))&&Q.insert(e,c,!0)}}function n(s,r,o,d,l,p,c,g,h,m,f,x,b){if(4096<=++h||40<=++g)return h;var v=1e-9,C=r[0],S=r[1],w=r[6],k=r[7],A=D.getSignedDistance,P=A(C,S,w,k,r[2],r[3]),T=A(C,S,w,k,r[4],r[5]),I=0<P*T?3/4:4/9,E=I*_(0,P,T),L=I*y(0,P,T),N=A(C,S,w,k,s[0],s[1]),O=A(C,S,w,k,s[2],s[3]),z=A(C,S,w,k,s[4],s[5]),R=A(C,S,w,k,s[6],s[7]),B=i(N,O,z,R),V=B[0],M=B[1],F,j;if(0===P&&0===T&&0===N&&0===O&&0===z&&0===R||null==(F=a(V,M,E,L))||null==(j=a(V.reverse(),M.reverse(),E,L)))return h;var q=m+(f-m)*F,U=m+(f-m)*j;if(y(b-x,U-q)<v){var H=(q+U)/2,t=(x+b)/2;e(l,p,c?d:o,c?t:H,c?o:d,c?H:t)}else if(s=K.getPart(s,F,j),!(0.8<j-F))h=b-x>=v?n(r,s,d,o,l,p,!c,g,h,x,b,q,U):n(s,r,o,d,l,p,c,g,h,q,U,x,b);else if(U-q>b-x){var u=K.subdivide(s,0.5),H=(q+U)/2;h=n(r,u[0],d,o,l,p,!c,g,h,x,b,q,H),h=n(r,u[1],d,o,l,p,!c,g,h,x,b,H,U)}else{var u=K.subdivide(r,0.5),t=(x+b)/2;h=n(u[0],s,d,o,l,p,!c,g,h,x,t,q,U),h=n(u[1],s,d,o,l,p,!c,g,h,t,b,q,U)}return h}function i(e,t,n,i){var a=[0,e],s=[1/3,t],r=[2/3,n],o=[1,i],d=t-(2*e+i)/3,l=n-(e+2*i)/3,p;if(0>d*l)p=[[a,s,o],[a,r,o]];else{var c=d/l;p=[2<=c?[a,s,o]:0.5>=c?[a,r,o]:[a,s,r,o],[a,o]]}return 0>(d||l)?p.reverse():p}function a(e,n,i,a){return e[0][1]<i?t(e,!0,i):n[0][1]>a?t(n,!1,a):e[0][0]}function t(e,t,n){for(var a=e[0][0],s=e[0][1],r=1,i=e.length;r<i;r++){var o=e[r][0],d=e[r][1];if(t?d>=n:d<=n)return d===n?o:a+(n-s)*(o-a)/(d-s);a=o,s=d}return null}function s(e,n,a,s,r){var o=E.isZero;if(o(s)&&o(r)){var d=K.getTimeOf(e,new O(n,a));return null===d?[]:[d]}for(var t=u(-r,s),l=m(t),p=f(t),c=[],_=[],g=0;8>g;g+=2){var i=e[g]-n,h=e[g+1]-a;c.push(i*p-h*l,i*l+h*p)}return K.solveCubic(c,1,0,_,0,1),_}function r(t,n,a,r,o,d,p){for(var c=n[0],_=n[1],g=n[6],u=n[7],h=s(t,c,_,g-c,u-_),m=0,i=h.length;m<i;m++){var l=h[m],f=K.getPoint(t,l),y=K.getTimeOf(n,f);null!==y&&e(o,d,p?r:a,p?y:l,p?a:r,p?l:y)}}function o(t,n,i,a,s,r){var o=D.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);o&&e(s,r,i,K.getTimeOf(t,o),a,K.getTimeOf(n,o))}function d(t,a,s,d,l,c){var g=1e-12,u=_,h=y;if(h(t[0],t[2],t[4],t[6])+g>u(a[0],a[2],a[4],a[6])&&u(t[0],t[2],t[4],t[6])-g<h(a[0],a[2],a[4],a[6])&&h(t[1],t[3],t[5],t[7])+g>u(a[1],a[3],a[5],a[7])&&u(t[1],t[3],t[5],t[7])-g<h(a[1],a[3],a[5],a[7])){var m=p(t,a);if(m)for(var f=0,i;2>f;f++)i=m[f],e(l,c,s,i[0],d,i[1],!0);else{var x=K.isStraight(t),b=K.isStraight(a),v=x&&b,C=x&&!b,S=l.length;if((v?o:x||b?r:n)(C?a:t,C?t:a,C?d:s,C?s:d,l,c,C,0,0,0,1,0,1),!v||l.length===S)for(var f=0;4>f;f++){var w=f>>1,k=1&f,A=6*w,P=6*k,T=new O(t[A],t[A+1]),I=new O(a[P],a[P+1]);T.isClose(I,g)&&e(l,c,s,w,d,k)}}}return l}function l(t,n,i,a){var s=K.classify(t);if('loop'===s.type){var r=s.roots;e(i,a,n,r[0],n,r[1])}return i}function p(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var a=S,s=D.getDistance,r=1e-8,o=1e-7,d=K.isStraight(e),l=K.isStraight(t),p=d&&l,c=n(e)<n(t),_=c?t:e,g=c?e:t,u=_[0],h=_[1],m=_[6]-u,f=_[7]-h;if(s(u,h,m,f,g[0],g[1],!0)<o&&s(u,h,m,f,g[6],g[7],!0)<o)!p&&s(u,h,m,f,_[2],_[3],!0)<o&&s(u,h,m,f,_[4],_[5],!0)<o&&s(u,h,m,f,g[2],g[3],!0)<o&&s(u,h,m,f,g[4],g[5],!0)<o&&(d=l=p=!0);else if(p)return null;if(d^l)return null;for(var y=[e,t],x=[],b=0;4>b&&2>x.length;b++){var i=1&b,v=1^i,C=b>>1,w=K.getTimeOf(y[i],new O(y[v][C?6:0],y[v][C?7:1]));if(null!=w){var k=i?[C,w]:[w,C];(!x.length||a(k[0]-x[0][0])>r&&a(k[1]-x[0][1])>r)&&x.push(k)}if(2<b&&!x.length)break}if(2!==x.length)x=null;else if(!p){var A=K.getPart(e,x[0][0],x[1][0]),P=K.getPart(t,x[0][1],x[1][1]);(a(P[2]-A[2])>o||a(P[3]-A[3])>o||a(P[4]-A[4])>o||a(P[5]-A[5])>o)&&(x=null)}return x}return{getIntersections:function(e){var t=this.getValues(),n=e&&e!==this&&e.getValues();return n?d(t,n,this,e,[]):l(t,this,[])},statics:{getOverlaps:p,getIntersections:function(e,t,n,a,s,r){var o=!t;o&&(t=e);for(var p=e.length,c=t.length,_=[],g=[],u=0,i,h;u<c;u++)_[u]=t[u].getValues(s);for(var u=0;u<p;u++){var m=e[u],f=o?_[u]:m.getValues(a),y=m.getPath();y!==h&&(h=y,i=[],g.push(i)),o&&l(f,m,i,n);for(var x=o?u+1:0;x<c;x++){if(r&&i.length)return i;d(f,_[x],m,t[x],i,n)}}i=[];for(var u=0,b=g.length;u<b;u++)i.push.apply(i,g[u]);return i},getCurveLineIntersections:s}}}),Q=A.extend({_class:'CurveLocation',initialize:function(e,t,n,i,a){if(0.99999999<=t){var s=e.getNext();s&&(t=0,e=s)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=i,this._distance=a,this._intersection=this._next=this._previous=null},_setCurve:function(e){var t=e._path;this._path=t,this._version=t?t._version:0,this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){this._setCurve(e.getCurve()),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){function e(e){var t=e&&e.getCurve();if(t&&null!=(n._time=t.getTimeOf(n._point)))return n._setCurve(t),t}var t=this._path,n=this;return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||e(this._segment)||e(this._segment1)||e(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:'#getTime',getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var a=t.getCurves(),s=0;s<n;s++)e+=a[s].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=null!=n&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof Q){var i=this.getCurve(),a=e.getCurve(),s=i._path,r=a._path;if(s===r){var o=S,d=1e-7,l=o(this.getOffset()-e.getOffset()),p=!t&&this._intersection,c=!t&&e._intersection;n=(l<d||s&&o(s.getLength()-l)<d)&&(!p&&!c||p&&c&&p.equals(c,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=I.instance;t&&e.push('point: '+t);var i=this.getIndex();null!=i&&e.push('index: '+i);var a=this.getTime();return null!=a&&e.push('time: '+n.number(a)),null!=this._distance&&e.push('distance: '+n.number(this._distance)),'{ '+e.join(', ')+' }'},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function e(e,n){var i=e.getValues(),a=K.classify(i).roots||K.getPeaks(i),s=a.length,r=n&&1<s?a[s-1]:0<s?a[0]:0.5;u.push(K.getLength(i,n?r:0,n?1:r)/2)}function t(e,t,n){return t<n?e>t&&e<n:e>t||e<n}var n=this._intersection;if(!n)return!1;var i=this.getTime(),a=n.getTime(),s=1e-8,r=1-s,o=i>=s&&i<=r,d=a>=s&&a<=r;if(o&&d)return!this.isTouching();var l=this.getCurve(),p=i<s?l.getPrevious():l,c=n.getCurve(),g=a<s?c.getPrevious():c;if(i>r&&(l=l.getNext()),a>r&&(c=c.getNext()),!p||!l||!g||!c)return!1;var u=[];o||(e(p,!0),e(l,!1)),d||(e(g,!0),e(c,!1));var h=this.getPoint(),m=_.apply(Math,u),f=o?l.getTangentAtTime(i):l.getPointAt(m).subtract(h),y=o?f.negate():p.getPointAt(-m).subtract(h),x=d?c.getTangentAtTime(a):c.getPointAt(m).subtract(h),b=d?x.negate():g.getPointAt(-m).subtract(h),v=y.getAngle(),C=f.getAngle(),S=b.getAngle(),w=x.getAngle();return o?!!(t(v,S,w)^t(C,S,w)&&t(v,w,S)^t(C,w,S)):!!(t(S,v,C)^t(w,v,C)&&t(S,C,v)^t(w,C,v))},hasOverlap:function(){return!!this._overlap}},A.each(K._evaluateMethods,function(e){this[e]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e+'At'](n,!0)}},{preserve:!0}),new function(){function e(e,t,n){function i(n,s){for(var r=n+s,i;-1<=r&&r<=a&&(i=e[(r%a+a)%a],!!t.getPoint().isClose(i.getPoint(),1e-7));r+=s)if(t.equals(i))return i;return null}for(var a=e.length,s=0,o=a-1;s<=o;){var r=s+o>>>1,d=e[r],l;if(n&&(l=t.equals(d)?d:i(r,-1)||i(r,1)))return t._overlap&&(l._overlap=l._intersection._overlap=!0),l;var p=t.getPath(),c=d.getPath(),_=p===c?t.getIndex()+t.getTime()-(d.getIndex()+d.getTime()):p._id-c._id;0>_?o=r-1:s=r+1}return e.splice(s,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),a=t.length-1;0<=a;a--)e(n,t[a]._intersection,!1);return n}}}}),$=q.extend({_class:'PathItem',_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,i;if(A.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:'string'==typeof e&&(t=e),n){var a=n[0];i=a&&Array.isArray(a[0])}else t&&(i=1<(t.match(/m/gi)||[]).length||/z\s*\S+/i.test(t));var s=i?te:ee;return new s(e)}},_asPathItem:function(){return this},isClockwise:function(){return 0<=this.getArea()},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){function t(e,t){var n=+d[e];return s&&(n+=r[t]),n}function n(e){return new O(t(e,'x'),t(e+1,'y'))}var a=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),s=!1,r=new O,o=new O,d,p,c;this.clear();for(var _=0,i=a&&a.length;_<i;_++){var l=a[_],g=l[0],u=g.toLowerCase();d=l.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var h=d&&d.length;switch(s=g===u,'z'!==p||/[mz]/.test(u)||this.moveTo(r),u){case'm':case'l':for(var m='m'===u,f=0;f<h;f+=2)this[m?'moveTo':'lineTo'](r=n(f)),m&&(o=r,m=!1);c=r;break;case'h':case'v':var y='h'===u?'x':'y';r=r.clone();for(var f=0;f<h;f++)r[y]=t(f,y),this.lineTo(r);c=r;break;case'c':for(var f=0;f<h;f+=6)this.cubicCurveTo(n(f),c=n(f+2),r=n(f+4));break;case's':for(var f=0;f<h;f+=4)this.cubicCurveTo(/[cs]/.test(p)?r.multiply(2).subtract(c):r,c=n(f),r=n(f+2)),p=u;break;case'q':for(var f=0;f<h;f+=4)this.quadraticCurveTo(c=n(f),r=n(f+2));break;case't':for(var f=0;f<h;f+=2)this.quadraticCurveTo(c=/[qt]/.test(p)?r.multiply(2).subtract(c):r,r=n(f)),p=u;break;case'a':for(var f=0;f<h;f+=7)this.arcTo(r=n(f+5),new z(+d[f],+d[f+1]),+d[f+2],+d[f+4],+d[f+3]);break;case'z':this.closePath(1e-12),r=o;}p=u}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||('evenodd'===this.getFillRule()?!!(1&t.windingL||1&t.windingR):!!t.winding)},getIntersections:function(e,t,n,i){var a=this===e||!e,s=this._matrix._orNullIfIdentity(),r=a?s:(n||e._matrix)._orNullIfIdentity();return a||this.getBounds(s).intersects(e.getBounds(r),1e-12)?K.getIntersections(this.getCurves(),!a&&e.getCurves(),t,s,r,i):[]},getCrossings:function(e){return this.getIntersections(e,function(e){return e.hasOverlap()||e.isCrossing()})},getNearestLocation:function(){for(var e=O.read(arguments),t=this.getCurves(),n=Infinity,a=null,s=0,i=t.length,r;s<i;s++)r=t[s].getNearestLocation(e),r._distance<n&&(n=r._distance,a=r);return a},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e},interpolate:function(e,t,n){var a=!this._children,s=a?'_segments':'_children',r=e[s],o=t[s],d=this[s];if(!r||!o||r.length!==o.length)throw new Error('Invalid operands in interpolate() call: '+e+', '+t);var l=d.length,p=o.length;if(l<p)for(var c=a?Y:ee,_=l;_<p;_++)this.add(new c);else l>p&&this[a?'removeSegments':'removeChildren'](p,l);for(var _=0;_<p;_++)d[_].interpolate(r[_],o[_],n);a&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],i=e._children?e._children.slice():[e],a=n.length,s=i.length,r=[],o=0;t=!0;for(var d=a-1,l;0<=d&&t;d--){l=n[d],t=!1;for(var p=s-1;0<=p&&!t;p--)l.compare(i[p])&&(r[p]||(r[p]=!0,o++),t=!0)}t=t&&o===s}return t}}),ee=$.extend({_class:'Path',_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=Array.isArray(e)?'object'==typeof e[0]?e:arguments:e&&void 0===e.size&&(void 0!==e.x||void 0!==e.point)?arguments:null;t&&0<t.length?this.setSegments(t):(this._curves=void 0,this._segmentSelection=0,!t&&'string'==typeof e&&(this.setPathData(e),e=null)),this._initialize(!t&&e)},_equals:function(e){return this._closed===e._closed&&A.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),!(8&t))32&t&&(this._bounds=void 0);else if(this._length=this._area=void 0,16&t)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()},getStyle:function(){var e=this._parent;return(e instanceof te?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=void 0,n){var i=e[n-1];'boolean'==typeof i&&(this.setClosed(i),n--),this._add(Y.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=Array(n);for(var a=0;a<n;a++)e[a]=new K(this,t[a],t[a+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new K(this,this._segments[t-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(e,t){function n(t,n){if(t._transformCoordinates(e,o),p=o[0],c=o[1],d)l.push('M'+r.pair(p,c)),d=!1;else if(u=o[2],h=o[3],u!==p||h!==c||m!=_||f!=g)l.push('c'+r.pair(m-_,f-g)+' '+r.pair(u-_,h-g)+' '+r.pair(p-_,c-g));else if(!n){var i=p-_,a=c-g;l.push(0==i?'v'+r.number(a):0==a?'h'+r.number(i):'l'+r.pair(i,a))}_=p,g=c,m=o[4],f=o[5]}var a=this._segments,s=a.length,r=new I(t),o=[,,,,,,],d=!0,l=[],p,c,_,g,u,h,m,f;if(!s)return'';for(var y=0;y<s;y++)n(a[y]);return this._closed&&0<s&&(n(a[0],!0),l.push('z')),l.join('')},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=[,,,,,,],a=0,i=t.length;a<i;a++)t[a]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,a=this._curves,s=e.length,r=null==t,t=r?n.length:t,o=0,i;o<s;o++)i=e[o],i._path&&(i=e[o]=i.clone()),i._path=this,i._index=t+o,i._selection&&this._updateSelection(i,0,i._selection);if(r)n.push.apply(n,e);else{n.splice.apply(n,[t,0].concat(e));for(var o=t+s,d=n.length;o<d;o++)n[o]._index=o}if(a){var l=this._countCurves(),p=0<t&&t+s-1===l?t-1:t,c=p,g=_(p+s,l);e._curves&&(a.splice.apply(a,[p,0].concat(e._curves)),c+=e._curves.length);for(var o=c;o<g;o++)a.splice(o,0,new K(this,null,null));this._adjustCurves(p,g)}return this._changed(25),e},_adjustCurves:function(e,t){for(var n=this._segments,a=this._curves,s=e,i;s<t;s++)i=a[s],i._path=this,i._segment1=n[s],i._segment2=n[s+1]||n[0],i._changed();(i=a[this._closed&&!e?n.length-1:e-1])&&(i._segment2=n[e]||n[0],i._changed()),(i=a[t])&&(i._segment1=n[t],i._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&0<e?e-1:e},add:function(e){return 1<arguments.length&&'number'!=typeof e?this._add(Y.readList(arguments)):this._add([Y.read(arguments)])[0]},insert:function(e,t){return 2<arguments.length&&'number'!=typeof t?this._add(Y.readList(arguments,1),e):this._add([Y.read(arguments,1)],e)[0]},addSegment:function(){return this._add([Y.read(arguments)])[0]},insertSegment:function(e){return this._add([Y.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(Y.readList(e))},insertSegments:function(e,t){return this._add(Y.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=A.pick(t,this._segments.length);var a=this._segments,s=this._curves,r=a.length,o=a.splice(e,t-e),d=o.length;if(!d)return o;for(var p=0,i;p<d;p++)i=o[p],i._selection&&this._updateSelection(i,i._selection,0),i._index=i._path=null;for(var p=e,c=a.length;p<c;p++)a[p]._index=p;if(s){for(var l=0<e&&t===r+(this._closed?1:0)?e-1:e,s=s.splice(l,d),p=s.length-1;0<=p;p--)s[p]._path=null;n&&(o._curves=s.slice(1)),this._adjustCurves(l,l)}return this._changed(25),o},clear:'#removeSegments',hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,n=this._closed;e=0;for(var a=0,i=t.length,s;a<i;a++)s=a+1===i,e+=K.getArea(K.getValues(t[a],t[s?0:a+1],null,s&&!n));this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&0<e&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,a=e?7:0;this._segmentSelection=a*n;for(var s=0;s<n;s++)t[s]._selection=a},_updateSelection:function(e,t,n){e._selection=n;var i=this._segmentSelection+=n-t;0<i&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),n;return t&&(n=t.getCurve().divideAt(t.getCurveOffset()))?n._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,i=t&&t.time,a=1e-8;i>1-a&&(n++,i=0);var s=this.getCurves();if(0<=n&&n<s.length){i>=a&&s[n++].divideAtTime(i);var r=this.removeSegments(n,this._segments.length,!0),o;return this._closed?(this.setClosed(!1),o=this):(o=new ee(q.NO_INSERT),o.insertAbove(this),o.copyAttributes(this)),o._add(r,0),this.addSegment(r[0]),o}return null},split:function(e,t){var n=void 0===t?e:(i=this.getCurves()[e])&&i.getLocationAtTime(t),i;return null==n?null:this.splitAt(n)},join:function(e,t){var n=t||0;if(e&&e!==this){var i=e._segments,a=this.getLastSegment(),s=e.getLastSegment();if(!s)return this;a&&a._point.isClose(s._point,n)&&e.reverse();var r=e.getFirstSegment();if(a&&a._point.isClose(r._point,n))a.setHandleOut(r._handleOut),this._add(i.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(r._point,n)&&e.reverse(),s=e.getLastSegment(),o&&o._point.isClose(s._point,n)?(o.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}e._closed&&this._add([i[0]]),e.remove()}var d=this.getFirstSegment(),l=this.getLastSegment();return d!==l&&d._point.isClose(l._point,n)&&(d.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,a=n?1e-7:0,s=t.length-1,i;0<=s;s--)i=t[s],!i.hasHandles()&&(!i.hasLength(a)||n&&i.isCollinear(i.getNext()))&&i.remove();return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new ne(this,e||0.25,256,!0),n=t.parts,a=n.length,s=[],r=0;r<a;r++)s.push(new Y(n[r].curve.slice(0,2)));!this._closed&&0<a&&s.push(new Y(n[a-1].curve.slice(6))),this.setSegments(s)},simplify:function(e){var t=new ie(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){function t(e,t){var n=e&&e.index;if(null!=n){var i=e.path;if(i&&i!==s)throw new Error(e._class+' '+n+' of '+i+' is not part of '+s);t&&e instanceof K&&n++}else n='number'==typeof e?e:t;return _(0>n&&p?n%l:0>n?n+l:n,l-1)}var s=this,r=e||{},o=r.type||'asymmetric',d=this._segments,l=d.length,p=this._closed,c=p&&void 0===r.from&&void 0===r.to,g=t(r.from,0),h=t(r.to,l-1);if(g>h)if(p)g-=l;else{var C=g;g=h,h=C}if(/^(?:asymmetric|continuous)$/.test(o)){var S='asymmetric'===o,w=_,k=h-g+1,A=k-1,n=c?w(k,4):1,P=n,T=n,I=[];if(p||(P=w(1,g),T=w(1,l-h-1)),A+=P+T,1>=A)return;for(var E=0,i=g-P;E<=A;E++,i++)I[E]=d[(0>i?i+l:i)%l]._point;for(var L=I[0]._x+2*I[1]._x,x=I[0]._y+2*I[1]._y,y=2,f=A-1,N=[L],O=[x],z=[y],R=[],B=[],E=1;E<A;E++){var V=E<f,M=V?1:S?1:2,a=V?4:S?2:7,b=V?4:S?3:8,u=V?2:S?0:1,v=M/y;y=z[E]=a-v,L=N[E]=b*I[E]._x+u*I[E+1]._x-v*L,x=O[E]=b*I[E]._y+u*I[E+1]._y-v*x}R[f]=N[f]/z[f],B[f]=O[f]/z[f];for(var E=A-2;0<=E;E--)R[E]=(N[E]-R[E+1])/z[E],B[E]=(O[E]-B[E+1])/z[E];R[A]=(3*I[A]._x-R[f])/2,B[A]=(3*I[A]._y-B[f])/2;for(var E=P,m=A-T,i=g;E<=m;E++,i++){var D=d[0>i?i+l:i],F=D._point,j=R[E]-F._x,q=B[E]-F._y;(c||E<m)&&D.setHandleOut(j,q),(c||E>P)&&D.setHandleIn(-j,-q)}}else for(var E=g;E<=h;E++)d[0>E?E+l:E].smooth(r,!c&&E===g,!c&&E===h)},toShape:function(e){function t(e,t){var n=a[e],i=n.getNext(),s=a[t],r=s.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&s._handleOut.isZero()&&r._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(r._point.subtract(s._point))}function n(e){var t=a[e],n=t.getNext(),i=t._handleOut,s=n._handleIn,r=0.5522847498307936;if(i.isOrthogonal(s)){var o=t._point,d=n._point,l=new D(o,i,!0).intersect(new D(d,s,!0),!0);return l&&E.isZero(i.getLength()/l.subtract(o).getLength()-r)&&E.isZero(s.getLength()/l.subtract(d).getLength()-r)}return!1}function i(e,t){return a[e]._point.getDistance(a[t]._point)}if(!this._closed)return null;var a=this._segments,s,r,o,d;if(!this.hasHandles()&&4===a.length&&t(0,2)&&t(1,3)&&function(e){var t=a[e],n=t.getPrevious(),i=t.getNext();return n._handleOut.isZero()&&t._handleIn.isZero()&&t._handleOut.isZero()&&i._handleIn.isZero()&&t._point.subtract(n._point).isOrthogonal(i._point.subtract(t._point))}(1)?(s=H.Rectangle,r=new z(i(0,3),i(0,1)),d=a[1]._point.add(a[2]._point).divide(2)):8===a.length&&n(0)&&n(2)&&n(4)&&n(6)&&t(1,5)&&t(3,7)?(s=H.Rectangle,r=new z(i(1,6),i(0,3)),o=r.subtract(new z(i(0,7),i(1,2))).divide(2),d=a[3]._point.add(a[4]._point).divide(2)):4===a.length&&n(0)&&n(1)&&n(2)&&n(3)&&(E.isZero(i(0,2)-i(1,3))?(s=H.Circle,o=i(0,2)/2):(s=H.Ellipse,o=new z(i(2,0)/2,i(3,1)/2)),d=a[1]._point),s){var l=this.getPosition(!0),p=new s({center:l,size:r,radius:o,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(d.subtract(l).getAngle()+90),(void 0===e||e)&&p.insertAbove(this),p}return null},toPath:'#clone',compare:function e(t){if(!t||t instanceof te)return e.base.call(this,t);var n=this.getCurves(),a=t.getCurves(),s=n.length,r=a.length;if(!s||!r)return s==r;for(var o=n[0].getValues(),d=[],l=0,p=0,c=0,_,g,u;c<r;c++){u=a[c].getValues(),d.push(u);var h=K.getOverlaps(o,u);if(h){_=!c&&0<h[0][0]?r-1:c,g=h[0][1];break}}for(var m=S,f=1e-8,u=d[_],y,h;o&&u;){if(h=K.getOverlaps(o,u),h){var x=h[0][0];if(m(x-p)<f){p=h[1][0],1===p&&(o=++l<s?n[l].getValues():null,p=0);var b=h[0][1];if(m(b-g)<f){if(y||(y=[_,b]),g=h[1][1],1===g&&(++_>=r&&(_=0),u=d[_]||a[_].getValues(),g=0),!o)return y[0]===_&&y[1]===g;continue}}}break}return!1},_hitTestSelf:function(e,t,n,a){function s(t,n){return 1>=e.subtract(t).divide(n).length}function r(e,n,i){if(!t.selected||n.isSelected()){var a=e._point;if(n!==a&&(n=n.add(a)),s(n,m))return new X(i,p,{segment:e,point:n})}}function o(e,n){return(n||t.segments)&&r(e,e._point,'segment')||!n&&t.handles&&(r(e,e._handleIn,'handle-in')||r(e,e._handleOut,'handle-out'))}function d(e){w.add(e)}function l(t){var n=u||0<t._index&&t._index<g-1;if('round'===(n?v:C))return s(t._point,m);if(w=new ee({internal:!0,closed:!0}),n?!t.isSmooth()&&ee._addBevelJoin(t,v,b,S,null,a,d,!0):'square'===C&&ee._addSquareCap(t,C,b,null,a,d,!0),!w.isEmpty()){var i;return w.contains(e)||(i=w.getNearestLocation(e))&&s(i.getPoint(),h)}}var p=this,c=this.getStyle(),_=this._segments,g=_.length,u=this._closed,h=t._tolerancePadding,m=h,f=t.stroke&&c.hasStroke(),y=t.fill&&c.hasFill(),x=t.curves,b=f?c.getStrokeWidth()/2:y&&0<t.tolerance||x?0:null,v,C,S,w,k,A;if(null!==b&&(0<b?(v=c.getStrokeJoin(),C=c.getStrokeCap(),S=c.getMiterLimit(),m=m.add(ee._getStrokePadding(b,a))):v=C='round'),t.ends&&!t.segments&&!u){if(A=o(_[0],!0)||o(_[g-1],!0))return A;}else if(t.segments||t.handles)for(var P=0;P<g;P++)if(A=o(_[P]))return A;if(null!==b){if(k=this.getNearestLocation(e),k){var i=k.getTime();0===i||1===i&&1<g?!l(k.getSegment())&&(k=null):!s(k.getPoint(),m)&&(k=null)}if(!k&&'miter'===v&&1<g)for(var P=0,T;P<g;P++)if(T=_[P],e.getDistance(T._point)<=S*b&&l(T)){k=T.getLocation();break}}return!k&&y&&this._contains(e)||k&&!f&&!x?new X('fill',this):k?new X(f?'stroke':'curve',this,{location:k,point:k.getPoint()}):null}},A.each(K._evaluateMethods,function(e){this[e+'At']=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=O.read(arguments),t=this.getCurves(),n=0,i=t.length,a;n<i;n++)if(a=t[n].getLocationOf(e),a)return a;return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if('number'==typeof e){for(var t=this.getCurves(),n=0,a=0,i=t.length;a<i;a++){var s=n,r=t[a];if(n+=r.getLength(),n>e)return r.getLocationAt(e-s)}if(0<t.length&&e<=this.getLength())return new Q(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null}}),new function(){function e(e,t,n,a){function s(t){var n=o[t],i=o[t+1];(l!=n||p!=i)&&(e.beginPath(),e.moveTo(l,p),e.lineTo(n,i),e.stroke(),e.beginPath(),e.arc(n,i,r,0,2*h,!0),e.fill())}for(var r=a/2,o=[,,,,,,],d=0,i=t.length,l,p;d<i;d++){var c=t[d],_=c._selection;if(c._transformCoordinates(n,o),l=o[0],p=o[1],2&_&&s(2),4&_&&s(4),e.fillRect(l-r,p-r,a,a),!(1&_)){var g=e.fillStyle;e.fillStyle='#ffffff',e.fillRect(l-r+1,p-r+1,a-2,a-2),e.fillStyle=g}}}function t(e,t,n){function a(t){if(n)t._transformCoordinates(n,o),i=o[0],p=o[1];else{var a=t._point;i=a._x,p=a._y}if(d)e.moveTo(i,p),d=!1;else{if(n)g=o[2],u=o[3];else{var s=t._handleIn;g=i+s._x,u=p+s._y}g===i&&u===p&&h==c&&m==_?e.lineTo(i,p):e.bezierCurveTo(h,m,g,u,i,p)}if(c=i,_=p,n)h=o[4],m=o[5];else{var s=t._handleOut;h=c+s._x,m=_+s._y}}for(var s=t._segments,r=s.length,o=[,,,,,,],d=!0,l=0,i,p,c,_,g,u,h,m;l<r;l++)a(s[l]);t._closed&&0<r&&a(s[0])}return{_draw:function(e,n,s,r){function o(e){return g[(e%u+u)%u]}var d=n.dontStart,l=n.dontFinish||n.clip,p=this.getStyle(),c=p.hasFill(),_=p.hasStroke(),g=p.getDashArray(),u=!a.support.nativeDash&&_&&g&&g.length;if(d||e.beginPath(),(c||_&&!u||l)&&(t(e,this,r),this._closed&&e.closePath()),!l&&(c||_)&&(this._setStyles(e,n,s),c&&(e.fill(p.getFillRule()),e.shadowColor='rgba(0,0,0,0)'),_)){if(u){d||e.beginPath();var h=new ne(this,0.25,32,!1,r),m=h.length,f=-p.getDashOffset(),x=0,i;for(f%=m;0<f;)f-=o(x--)+o(x--);for(;f<m;)i=f+o(x++),(0<f||0<i)&&h.drawPart(e,y(f,0),y(i,0)),f=i+o(x++)}e.stroke()}},_drawSelected:function(n,i){n.beginPath(),t(n,this,i),n.stroke(),e(n,this._segments,i,a.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(!t.length)throw new Error('Use a moveTo() command first');return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new Y(O.read(arguments))])},moveBy:function(){throw new Error('moveBy() is unsupported on Path items.')},lineTo:function(){this._add([new Y(O.read(arguments))])},cubicCurveTo:function(){var t=O.read(arguments),n=O.read(arguments),i=O.read(arguments),a=e(this);a.setHandleOut(t.subtract(a._point)),this._add([new Y(i,n.subtract(i))])},quadraticCurveTo:function(){var t=O.read(arguments),n=O.read(arguments),i=e(this)._point;this.cubicCurveTo(t.add(i.subtract(t).multiply(1/3)),t.add(n.subtract(t).multiply(1/3)),n)},curveTo:function(){var n=O.read(arguments),i=O.read(arguments),a=A.pick(A.read(arguments),0.5),t=1-a,s=e(this)._point,r=n.subtract(s.multiply(t*t)).subtract(i.multiply(a*a)).divide(2*a*t);if(r.isNaN())throw new Error('Cannot put a curve through points with parameter = '+a);this.quadraticCurveTo(r,i)},arcTo:function(){var t=S,n=C,a=e(this),s=a._point,r=O.read(arguments),o=A.peek(arguments),d=A.pick(o,!0),l,c,_,g,u;if('boolean'==typeof d)var b=s.add(r).divide(2),l=b.add(b.subtract(s).rotate(d?-90:90));else if(2>=A.remain(arguments))l=r,r=O.read(arguments);else{var v=z.read(arguments),w=E.isZero;if(w(v.width)||w(v.height))return this.lineTo(r);var k=A.read(arguments),d=!!A.read(arguments),P=!!A.read(arguments),b=s.add(r).divide(2),T=s.subtract(b).rotate(-k),I=T.x,x=T.y,y=t(v.width),L=t(v.height),N=y*y,R=L*L,B=I*I,V=x*x,F=n(B/N+V/R);if(1<F&&(y*=F,L*=F,N=y*y,R=L*L),F=(N*R-N*V-R*B)/(N*V+R*B),1e-12>t(F)&&(F=0),0>F)throw new Error('Cannot create an arc with the given arguments');c=new O(y*x/L,-L*I/y).multiply((P===d?-1:1)*n(F)).rotate(k).add(b),u=new M().translate(c).rotate(k).scale(y,L),g=u._inverseTransform(s),_=g.getDirectedAngle(u._inverseTransform(r)),!d&&0<_?_-=360:d&&0>_&&(_+=360)}if(l){var j=new D(s.add(l).divide(2),l.subtract(s).rotate(90),!0),q=new D(l.add(r).divide(2),r.subtract(l).rotate(90),!0),U=new D(s,r),H=U.getSide(l);if(c=j.intersect(q,!0),!c){if(!H)return this.lineTo(r);throw new Error('Cannot create an arc with the given arguments')}g=s.subtract(c),_=g.getDirectedAngle(r.subtract(c));var W=U.getSide(c);0===W?_=H*t(_):H===W&&(_+=0>_?360:-360)}for(var Z=t(_),G=360<=Z?4:p((Z-1e-7)/90),X=_/G,J=X*h/360,K=4/3*m(J)/(1+f(J)),Q=[],$=0;$<=G;$++){var T=r,ee=null;if($<G&&(ee=g.rotate(90).multiply(K),u?(T=u._transformPoint(g),ee=u._transformPoint(g.add(ee)).subtract(T)):T=c.add(g)),!$)a.setHandleOut(ee);else{var te=g.rotate(-90).multiply(K);u&&(te=u._transformPoint(g.add(te)).subtract(T)),Q.push(new Y(T,te,ee))}g=g.rotate(X)}this._add(Q)},lineBy:function(){var t=O.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=O.read(arguments),n=O.read(arguments),i=A.read(arguments),a=e(this)._point;this.curveTo(a.add(t),a.add(n),i)},cubicCurveBy:function(){var t=O.read(arguments),n=O.read(arguments),i=O.read(arguments),a=e(this)._point;this.cubicCurveTo(a.add(t),a.add(n),a.add(i))},quadraticCurveBy:function(){var t=O.read(arguments),n=O.read(arguments),i=e(this)._point;this.quadraticCurveTo(i.add(t),i.add(n))},arcBy:function(){var t=e(this)._point,n=t.add(O.read(arguments)),i=A.pick(A.peek(arguments),!0);'boolean'==typeof i?this.arcTo(n,i):this.arcTo(n,t.add(O.read(arguments)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?'getHandleBounds':t.stroke?'getStrokeBounds':'getBounds';return ee[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,a,s,r){function o(e){e._transformCoordinates(a,p);for(var t=0;2>t;t++)K._addBounds(c[t],c[t+4],p[t+2],p[t],t,r?r[t]:0,_,g,u);var n=c;c=p,p=n}var d=e[0];if(!d)return new B;for(var p=[,,,,,,],c=d._transformCoordinates(a,[,,,,,,]),_=c.slice(0,2),g=_.slice(),u=[,,],h=1,i=e.length;h<i;h++)o(e[h]);return t&&o(d),new B(_[0],_[1],g[0]-_[0],g[1]-_[1])},getStrokeBounds:function(e,t,n,a,s){function r(e){h=h.include(e)}function o(e){h=h.unite(b.setCenter(e._point.transform(a)))}function d(e,t){'round'===t||e.isSmooth()?o(e):ee._addBevelJoin(e,t,m,x,a,g,r)}function l(e,t){'round'===t?o(e):ee._addSquareCap(e,t,m,a,g,r)}var p=n.getStyle(),c=p.hasStroke(),_=p.getStrokeWidth(),g=c&&n._getStrokeMatrix(a,s),u=c&&ee._getStrokePadding(_,g),h=ee.getBounds(e,t,n,a,s,u);if(!c)return h;for(var m=_/2,f=p.getStrokeJoin(),y=p.getStrokeCap(),x=p.getMiterLimit(),b=new B(new z(u)),v=e.length-(t?0:1),C=1;C<v;C++)d(e[C],f);return t?d(e[0],f):0<v&&(l(e[0],y),l(e[e.length-1],y)),h},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new O(e,0).transform(t),i=new O(0,e).transform(t),s=n.getAngleInRadians(),r=n.getLength(),a=i.getLength(),o=m(s),d=f(s),l=c(s),p=u(a*l,r),_=u(a,l*r);return[S(r*f(p)*d+a*m(p)*o),S(a*m(_)*d+r*f(_)*o)]},_addBevelJoin:function(e,t,n,i,a,s,r,o){var d=e.getCurve(),l=d.getPrevious(),p=d.getPoint1().transform(a),c=l.getNormalAtTime(1).multiply(n).transform(s),_=d.getNormalAtTime(0).multiply(n).transform(s);if(0>c.getDirectedAngle(_)&&(c=c.negate(),_=_.negate()),o&&r(p),r(p.add(c)),'miter'===t){var g=new D(p.add(c),new O(-c.y,c.x),!0).intersect(new D(p.add(_),new O(-_.y,_.x),!0),!0);g&&p.getDistance(g)<=i*n&&r(g)}r(p.add(_))},_addSquareCap:function(e,t,n,i,a,s,r){var o=e._point.transform(i),d=e.getLocation(),l=d.getNormal().multiply(0===d.getTime()?n:-n).transform(a);'square'===t&&(r&&(s(o.subtract(l)),s(o.add(l))),o=o.add(l.rotate(-90))),s(o.add(l)),s(o.subtract(l))},getHandleBounds:function(e,t,n,a,s){var r=n.getStyle(),o=s.stroke&&r.hasStroke(),d,p;if(o){var c=n._getStrokeMatrix(a,s),_=r.getStrokeWidth()/2,g=_;'miter'===r.getStrokeJoin()&&(g=_*r.getMiterLimit()),'square'===r.getStrokeCap()&&(g=y(g,_*Math.SQRT2)),d=ee._getStrokePadding(_,c),p=ee._getStrokePadding(g,c)}for(var u=[,,,,,,],h=Infinity,m=-h,f=h,b=m,v=0,i=e.length,l;v<i;v++){l=e[v],l._transformCoordinates(a,u);for(var C=0;6>C;C+=2){var S=C?d:p,w=S?S[0]:0,k=S?S[1]:0,A=u[C],x=u[C+1],P=A-w,T=A+w,I=x-k,E=x+k;P<h&&(h=P),T>m&&(m=T),I<f&&(f=I),E>b&&(b=E)}}return new B(h,f,m-h,b-f)}}});ee.inject({statics:new function(){function e(e,t,n){var i=A.getNamed(n),a=new ee(i&&!1==i.insert&&q.NO_INSERT);return a._add(e),a._closed=t,a.set(i,{insert:!0})}function t(t,n,s){for(var r=[,,,,],o=0,i;4>o;o++)i=a[o],r[o]=new Y(i._point.multiply(n).add(t),i._handleIn.multiply(n),i._handleOut.multiply(n));return e(r,!0,s)}var n=0.5522847498307936,a=[new Y([-1,0],[0,n],[0,-n]),new Y([0,-1],[-n,0],[n,0]),new Y([1,0],[0,-n],[0,n]),new Y([0,1],[n,0],[-n,0])];return{Line:function(){return e([new Y(O.readNamed(arguments,'from')),new Y(O.readNamed(arguments,'to'))],!1,arguments)},Circle:function(){var e=O.readNamed(arguments,'center'),n=A.readNamed(arguments,'radius');return t(e,new z(n),arguments)},Rectangle:function(){var t=B.readNamed(arguments,'rectangle'),i=z.readNamed(arguments,'radius',0,{readNull:!0}),a=t.getBottomLeft(!0),s=t.getTopLeft(!0),r=t.getTopRight(!0),o=t.getBottomRight(!0),d;if(!i||i.isZero())d=[new Y(a),new Y(s),new Y(r),new Y(o)];else{i=z.min(i,t.getSize(!0).divide(2));var l=i.width,p=i.height,c=l*n,_=p*n;d=[new Y(a.add(l,0),null,[-c,0]),new Y(a.subtract(0,p),[0,_]),new Y(s.add(0,p),null,[0,-_]),new Y(s.add(l,0),[-c,0],null),new Y(r.subtract(l,0),null,[c,0]),new Y(r.add(0,p),[0,-_],null),new Y(o.subtract(0,p),null,[0,_]),new Y(o.subtract(l,0),[c,0])]}return e(d,!0,arguments)},RoundRectangle:'#Rectangle',Ellipse:function(){var e=H._readEllipse(arguments);return t(e.center,e.radius,arguments)},Oval:'#Ellipse',Arc:function(){var e=O.readNamed(arguments,'from'),t=O.readNamed(arguments,'through'),n=O.readNamed(arguments,'to'),i=A.getNamed(arguments),a=new ee(i&&!1==i.insert&&q.NO_INSERT);return a.moveTo(e),a.arcTo(t,n),a.set(i)},RegularPolygon:function(){for(var t=O.readNamed(arguments,'center'),n=A.readNamed(arguments,'sides'),a=A.readNamed(arguments,'radius'),s=0==n%3,r=new O(0,s?-a:a),o=s?-1:0.5,d=Array(n),l=0;l<n;l++)d[l]=new Y(t.add(r.rotate((l+o)*(360/n))));return e(d,!0,arguments)},Star:function(){for(var t=O.readNamed(arguments,'center'),n=2*A.readNamed(arguments,'points'),a=A.readNamed(arguments,'radius1'),s=A.readNamed(arguments,'radius2'),r=new O(0,-1),o=Array(n),d=0;d<n;d++)o[d]=new Y(t.add(r.rotate(360/n*d).multiply(d%2?s:a)));return e(o,!0,arguments)}}}});var te=$.extend({_class:'CompoundPath',_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||('string'==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n){var a=n,s=a[0];s&&'number'==typeof s[0]&&(a=[a]);for(var r=n.length-1,i;0<=r;r--)i=a[r],a!==n||i instanceof ee||(a=A.slice(a)),Array.isArray(i)?a[r]=new ee({segments:i,insert:!1}):i instanceof te&&(a.splice.apply(a,[r,1].concat(i.removeChildren())),i.remove());return e.base.call(this,t,a)},reduce:function e(t){for(var n=this._children,a=n.length-1,i;0<=a;a--)i=n[a].reduce(t),i.isEmpty()&&i.remove();if(!n.length){var i=new ee(q.NO_INSERT);return i.copyAttributes(this),i.insertAbove(this),this.remove(),i}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,i=e.length;n<i;n++)t.push.apply(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,a=[],s=0,i=n.length;s<i;s++){var r=n[s],o=r._matrix;a.push(r.getPathData(e&&!o.isIdentity()?e.appended(o):e,t))}return a.join('')},_hitTestChildren:function e(t,n,i){return e.base.call(this,t,n.class===ee||'path'===n.type?n:A.set({},n,{fill:!1}),i)},_draw:function(e,t,n,a){var s=this._children;if(s.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var r=0,i=s.length;r<i;r++)s[r].draw(e,t,a);if(!t.clip){this._setStyles(e,t,n);var o=this._style;o.hasFill()&&(e.fill(o.getFillRule()),e.shadowColor='rgba(0,0,0,0)'),o.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var a=this._children,s=0,i=a.length;s<i;s++){var r=a[s],o=r._matrix;n[r._id]||r._drawSelected(e,o.isIdentity()?t:t.appended(o))}}},new function(){function e(e,t){var n=e._children;if(t&&!n.length)throw new Error('Use a moveTo() command first');return n[n.length-1]}return A.each(['lineTo','cubicCurveTo','quadraticCurveTo','curveTo','arcTo','lineBy','cubicCurveBy','quadraticCurveBy','curveBy','arcBy'],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new ee(q.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),i=O.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(t){e(this,!0).closePath(t)}})},A.each(['reverse','flatten','simplify','smooth'],function(e){this[e]=function(t){for(var n=this._children,a=0,i=n.length,s;a<i;a++)s=n[a][e](t)||s;return s}},{}));$.inject(new function(){function e(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return t?n.resolveCrossings().reorient('nonzero'===n.getFillRule(),!0):n}function t(e,t,n,i,a){var s=new te(q.NO_INSERT);return s.addChildren(e,!0),s=s.reduce({simplify:t}),a&&!1==a.insert||s.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),s.copyAttributes(n,!0),s}function n(n,s,d,_){function g(e){for(var t=0,n=e.length,i;t<n;t++)i=e[t],v.push.apply(v,i._segments),C.push.apply(C,i.getCurves()),i._overlapsOnly=!0}if(_&&(!1==_.trace||_.stroke)&&/^(subtract|intersect)$/.test(d))return a(n,s,d);var u=e(n,!0),h=s&&n!==s&&e(s,!0),f=m[d];f[d]=!0,h&&(f.subtract||f.exclude)^(h.isClockwise()^u.isClockwise())&&h.reverse();var y=o(Q.expand(u.getCrossings(h))),x=u._children||[u],b=h&&(h._children||[h]),v=[],C=[],S;if(y.length){g(x),b&&g(b);for(var w=0,i=y.length;w<i;w++)p(y[w]._segment,u,h,C,f);for(var w=0,i=v.length;w<i;w++){var l=v[w],k=l._intersection;l._winding||p(l,u,h,C,f),k&&k._overlap||(l._path._overlapsOnly=!1)}S=c(v,f)}else S=r(b?x.concat(b):x.slice(),function(e){return!!f[e]});return t(S,!0,n,s,_)}function a(n,a,s){function r(e){if(!_[e._id]&&(c||d.contains(e.getPointAt(e.getLength()/2))^p))return g.unshift(e),_[e._id]=!0}for(var o=e(n),d=e(a),l=o.getCrossings(d),p='subtract'===s,c='divide'===s,_={},g=[],u=l.length-1,i;0<=u;u--)i=l[u].split(),i&&(r(i)&&i.getFirstSegment().setHandleIn(0,0),o.getLastSegment().setHandleOut(0,0));return r(o),t(g,!1,n,a)}function i(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function s(e){for(var t=e.length-1;0<=t;t--)e[t].clearHandles()}function r(e,t,n){var a=e&&e.length;if(a){var s=A.each(e,function(e,t){this[e._id]={container:null,winding:e.isClockwise()?1:-1,index:t}},{}),r=e.slice().sort(function(e,t){return h(t.getArea())-h(e.getArea())}),o=r[0];null==n&&(n=o.isClockwise());for(var d=0;d<a;d++){for(var i=r[d],l=s[i._id],p=i.getInteriorPoint(),c=0,_=d-1,g;0<=_;_--)if(g=r[_],g.contains(p)){var u=s[g._id];c=u.winding,l.winding+=c,l.container=u.exclude?u.container:g;break}if(t(l.winding)===t(c))l.exclude=!0,e[l.index]=null;else{var m=l.container;i.setClockwise(m?!m.isClockwise():n)}}}return e}function o(e,t,n){function a(e){return e._path._id+'.'+e._segment1._index}for(var r=t&&[],o=1e-8,d=1-o,p=!1,c=n||[],_=n&&{},g=(n&&n.length)-1,u,h,m,f;0<=g;g--)f=n[g],f._path&&(_[a(f)]=!0);for(var g=e.length-1;0<=g;g--){var y=e[g],x=y._time,b=x,v=t&&!t(y),f=y._curve,C;if(f&&(f===h?m>=o&&(x/=m):(p=!f.hasHandles()||_&&_[a(f)],u=[],m=null,h=f)),v){u&&u.push(y);continue}else t&&r.unshift(y);if(m=b,x<o)C=f._segment1;else if(x>d)C=f._segment2;else{var S=f.divideAtTime(x,!0);p&&c.push(f,S),C=S._segment1;for(var w=u.length-1,k;0<=w;w--)k=u[w],k._time=(k._time-x)/(1-x)}y._setSegment(C);var l=C._intersection,A=y._intersection;if(l){i(l,A);for(var P=l;P;)i(P._intersection,l),P=P._next}else C._intersection=A}return n||s(c),r||e}function d(e,n,s,r,o){function t(i){var _=i[c+0],h=i[c+6];if(!(f<g(_,h)||f>u(_,h))){var y=i[p+0],v=i[p+2],S=i[p+4],w=i[p+6];if(_===h)return void((y<C&&w>b||w<C&&y>b)&&(P=!0));var T=f===_?0:f===h?1:b>u(y,v,S,w)||C<g(y,v,S,w)?1:0<K.solveCubic(i,c,f,E,0,1)?E[0]:1,t=0===T?y:1===T?w:K.getPoint(i,T)[s?'y':'x'],a=_>h?1:-1,L=l[c]>l[c+6]?1:-1,N=l[p+6];return f===_?(a==L?y!=N&&(N<C&&t>C?(A+=a,P=!0):N>b&&t<b&&(k+=a,P=!0)):y<b?k+=a:y>C&&(A+=a),I=0):(t<b?k+=a:t>C?A+=a:P=!0,t>m-x&&t<m+x&&(I/=2)),l=i,!o&&t>b&&t<C&&0===K.getTangent(i,T)[s?'x':'y']&&d(e,n,!s,r,!0)}}function a(e){var n=e[c+0],a=e[c+2],r=e[c+4],o=e[c+6];if(f<=u(n,a,r,o)&&f>=g(n,a,r,o))for(var d=e[p+0],_=e[p+2],h=e[p+4],m=e[p+6],y=b>u(d,_,h,m)||C<g(d,_,h,m)?[e]:K.getMonoCurves(e,s),x=0,i=y.length,l;x<i;x++)if(l=t(y[x]))return l}for(var p=s?1:0,c=1^p,_=[e.x,e.y],m=_[p],f=_[c],y=1e-9,x=1e-6,b=m-y,C=m+y,S=0,w=0,k=0,A=0,P=!1,T=!1,I=1,E=[],L=0,N=n.length,l,O;L<N;L++){var z=n[L],R=z._path,B=z.getValues(),v;if((!L||n[L-1]._path!==R)&&(l=null,R._closed||(O=K.getValues(R.getLastCurve().getSegment2(),z.getSegment1(),null,!r),O[c]!==O[c+6]&&(l=O)),!l)){l=B;for(var V=R.getLastCurve(),M;V&&V!==z;){if(M=V.getValues(),M[c]!==M[c+6]){l=M;break}V=V.getPrevious()}}if(v=a(B))return v;if(L+1===N||n[L+1]._path!==R){if(O&&(v=a(O)))return v;!P||k||A||(k=A=R.isClockwise(r)^s?1:-1),S+=k,w+=A,k=A=0,P&&(T=!0,P=!1),O=null}}return S=h(S),w=h(w),{winding:u(S,w),windingL:S,windingR:w,quality:I,onPath:T}}function p(e,n,a,s,r){var o=[],p=e,c=0,_;do{var g=e.getCurve(),u=g.getLength();o.push({segment:e,curve:g,length:u}),c+=u,e=e.getNext()}while(e&&!e._intersection&&e!==p);for(var m=[0.5,0.25,0.75],_={winding:0,quality:-1},f=1e-8,y=0,u;y<m.length&&0.5>_.quality;y++){u=c*m[y];for(var i=0,x=o.length;i<x;i++){var l=o[i],b=l.length;if(u<=b){var g=l.curve,v=g._path,C=v._parent,S=C instanceof te?C:v,w=E.clamp(g.getTimeAt(u),f,1-f),t=g.getPointAtTime(w),k=h(g.getTangentAtTime(w).y)<Math.SQRT1_2,A=r.subtract&&a&&(S===n&&a._getWinding(t,k,!0).winding||S===a&&!n._getWinding(t,k,!0).winding)?{winding:0,quality:1}:d(t,s,k,!0);A.quality>_.quality&&(_=A);break}u-=b}}for(var i=o.length-1;0<=i;i--)o[i].segment._winding=_}function c(e,t){function n(e){var n;return!(!e||e._visited||t&&(!t[(n=e._winding||{}).winding]||t.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(e){if(e)for(var t=0,n=d.length;t<n;t++)if(e===d[t])return!0;return!1}function s(e){for(var t=e._segments,n=0,i=t.length;n<i;n++)t[n]._visited=!0}function r(e,t){function i(i,s){for(;i&&i!==s;){var r=i._segment,l=r&&r._path;if(l){var p=r.getNext()||l.getFirstSegment(),c=p._intersection;r!==e&&(a(r)||a(p)||p&&n(r)&&(n(p)||c&&n(c._segment)))&&o.push(r),t&&d.push(r)}i=i._next}}var s=e._intersection,r=s,o=[];if(t&&(d=[e]),s){for(i(s);s&&s._prev;)s=s._prev;i(s,r)}return o}var o=[],d;e.sort(function(e,t){var n=e._intersection,i=t._intersection,a=!!(n&&n._overlap),s=!!(i&&i._overlap),r=e._path,o=t._path;return a^s?a?1:-1:!n^!i?n?1:-1:r===o?e._index-t._index:r._id-o._id});for(var p=0,i=e.length;p<i;p++){var l=e[p],c=n(l),_=null,g=!1,u=!0,h=[],m,f,y;if(c&&l._path._overlapsOnly){var x=l._path,b=l._intersection._segment._path;x.compare(b)&&(x.getArea()&&o.push(x.clone(!1)),s(x),s(b),c=!1)}for(;c;){var v=!_,C=r(l,v),S=C.shift(),g=!v&&(a(l)||a(S)),w=!g&&S;if(v&&(_=new ee(q.NO_INSERT),m=null),g){(l.isFirst()||l.isLast())&&(u=l._path._closed),l._visited=!0;break}if(w&&m&&(h.push(m),m=null),m||(w&&C.push(l),m={start:_._segments.length,crossings:C,visited:f=[],handleIn:y}),w&&(l=S),!n(l)){_.removeSegments(m.start);for(var A=0,P=f.length;A<P;A++)f[A]._visited=!1;f.length=0;do l=m&&m.crossings.shift(),l&&l._path||(l=null,m=h.pop(),m&&(f=m.visited,y=m.handleIn));while(m&&!n(l));if(!l)break}var k=l.getNext();_.add(new Y(l._point,y,k&&l._handleOut)),l._visited=!0,f.push(l),l=k||l._path.getFirstSegment(),y=k&&k._handleIn}g&&(u&&(_.getFirstSegment().setHandleIn(y),_.setClosed(u)),0!==_.getArea()&&o.push(_))}return o}var g=_,u=y,h=S,m={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(e,t,n){return d(e,this.getCurves(),t,n)},unite:function(e,t){return n(this,e,'unite',t)},intersect:function(e,t){return n(this,e,'intersect',t)},subtract:function(e,t){return n(this,e,'subtract',t)},exclude:function(e,t){return n(this,e,'exclude',t)},divide:function(e,n){return n&&(!1==n.trace||n.stroke)?a(this,e,'divide'):t([this.subtract(e,n),this.intersect(e,n)],!0,this,e,n)},resolveCrossings:function(){function e(e,t){var n=e&&e._intersection;return n&&n._overlap&&n._path===t}var t=this._children,n=t||[this],a=!1,r=!1,d=this.getIntersections(null,function(e){return e.hasOverlap()&&(a=!0)||e.isCrossing()&&(r=!0)}),l=a&&r&&[];if(d=Q.expand(d),a)for(var p=o(d,function(e){return e.hasOverlap()},l),_=p.length-1;0<=_;_--){var i=p[_],g=i._path,u=i._segment,h=u.getPrevious(),m=u.getNext();e(h,g)&&e(m,g)&&(u.remove(),h._handleOut._set(0,0),m._handleIn._set(0,0),h!==u&&!h.getCurve().hasLength()&&(m._handleIn.set(h._handleIn),h.remove()))}r&&(o(d,a&&function(e){var t=e.getCurve(),n=e.getSegment(),i=e._intersection,a=i._curve,s=i._segment;return t&&a&&t._path&&a._path||void(n&&(n._intersection=null),s&&(s._intersection=null))},l),l&&s(l),n=c(A.each(n,function(e){this.push.apply(this,e._segments)},[])));var f=n.length,y;return 1<f&&t?(n!==t&&this.setChildren(n),y=this):1===f&&!t&&(n[0]!==this&&this.setSegments(n[0].removeSegments()),y=this),y||(y=new te(q.NO_INSERT),y.addChildren(n),y=y.reduce(),y.copyAttributes(this),this.replaceWith(y)),y},reorient:function(e,t){var n=this._children;return n&&n.length?this.setChildren(r(this.removeChildren(),function(t){return e?!!t:!!(1&t)},t)):void 0!==t&&this.setClockwise(t),this},getInteriorPoint:function(){var e=this.getBounds(),t=e.getCenter(!0);if(!this.contains(t)){for(var n=this.getCurves(),a=t.y,s=[],r=[],o=0,i=n.length;o<i;o++){var d=n[o].getValues(),l=d[1],p=d[3],c=d[5],_=d[7];if(a>=g(l,p,c,_)&&a<=u(l,p,c,_))for(var h=K.getMonoCurves(d),f=0,y=h.length;f<y;f++){var m=h[f],b=m[1],v=m[7];if(b!==v&&(a>=b&&a<=v||a>=v&&a<=b)){var C=a===b?m[0]:a===v?m[6]:1===K.solveCubic(m,1,a,r,0,1)?K.getPoint(m,r[0]).x:(m[0]+m[6])/2;s.push(C)}}}1<s.length&&(s.sort(function(e,t){return e-t}),t.x=(s[0]+s[1])/2)}return t}}});var ne=A.extend({_class:'PathFlattener',initialize:function(e,t,n,a,s){function r(e,t){var n=K.getValues(e,t,s);d.push(n),o(n,e._index,0,1)}function o(e,n,i,s){if(s-i>_&&!(a&&K.isStraight(e))&&!K.isFlatEnough(e,t||0.25)){var r=K.subdivide(e,0.5),d=(i+s)/2;o(r[0],n,i,d),o(r[1],n,d,s)}else{var l=e[6]-e[0],g=e[7]-e[1],u=C(l*l+g*g);0<u&&(c+=u,p.push({offset:c,curve:e,index:n,time:s}))}}for(var d=[],p=[],c=0,_=1/(n||32),g=e._segments,u=g[0],h=1,i=g.length,l;h<i;h++)l=g[h],r(u,l),u=l;e._closed&&r(l,g[0]),this.curves=d,this.parts=p,this.length=c,this.index=0},_get:function(e){for(var t=this.parts,n=t.length,a=this.index,s;;)if(s=a,!a||t[--a].offset<e)break;for(;s<n;s++){var i=t[s];if(i.offset>=e){this.index=s;var r=t[s-1],o=r&&r.index===i.index?r.time:0,d=r?r.offset:0;return{index:i.index,time:o+(i.time-o)*(e-d)/(i.offset-d)}}}return{index:t[n-1].index,time:1}},drawPart:function(e,t,n){for(var a=this._get(t),s=this._get(n),r=a.index,i=s.index,o;r<=i;r++)o=K.getPart(this.curves[r],r===a.index?a.time:0,r===s.index?s.time:1),r===a.index&&e.moveTo(o[0],o[1]),e.bezierCurveTo.apply(e,o.slice(2))}},A.each(K._evaluateMethods,function(e){this[e+'At']=function(t){var n=this._get(t);return K[e](this.curves[n.index],n.time)}},{})),ie=A.extend({initialize:function(e){for(var t=this.points=[],n=e._segments,a=e._closed,s=0,i=n.length,r,o;s<i;s++)o=n[s].point,r&&r.equals(o)||t.push(r=o.clone());a&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=a},fit:function(e){var t=this.points,n=t.length,i=null;return 0<n&&(i=[new Y(t[0])],1<n&&(this.fitCubic(i,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(e,t,n,a,s,r){var o=this.points;if(1==a-n){var d=o[n],l=o[a],p=d.getDistance(l)/3;return void this.addCurve(e,[d,d.add(s.normalize(p)),l.add(r.normalize(p)),l])}for(var c=this.chordLengthParameterize(n,a),_=y(t,t*t),g=!0,u=0,i;4>=u;u++){var h=this.generateBezier(n,a,c,s,r),m=this.findMaxError(n,a,h,c);if(m.error<t&&g)return void this.addCurve(e,h);if(i=m.index,m.error>=_)break;g=this.reparameterize(n,a,c,h),_=m.error}var f=o[i-1].subtract(o[i+1]);this.fitCubic(e,t,n,i,s,f),this.fitCubic(e,t,i,a,f.negate(),r)},addCurve:function(e,t){var n=e[e.length-1];n.setHandleOut(t[1].subtract(t[0])),e.push(new Y(t[3],t[2].subtract(t[3])))},generateBezier:function(e,n,a,s,r){for(var o=1e-12,d=S,l=this.points,p=l[e],c=l[n],_=[[0,0],[0,0]],g=[0,0],h=0;h<n-e+1;h++){var i=a[h],u=1-i,t=3*i*u,m=t*u,f=t*i,y=s.normalize(m),x=r.normalize(f),b=l[e+h].subtract(p.multiply(u*u*u+m)).subtract(c.multiply(f+i*i*i));_[0][0]+=y.dot(y),_[0][1]+=y.dot(x),_[1][0]=_[0][1],_[1][1]+=x.dot(x),g[0]+=y.dot(b),g[1]+=x.dot(b)}var v=_[0][0]*_[1][1]-_[1][0]*_[0][1],C,w;if(d(v)>o){var k=_[0][0]*g[1]-_[1][0]*g[0],A=g[0]*_[1][1]-g[1]*_[0][1];C=A/v,w=k/v}else{var P=_[0][0]+_[0][1],T=_[1][0]+_[1][1];C=w=d(P)>o?g[0]/P:d(T)>o?g[1]/T:0}var I=c.getDistance(p),E=o*I,L,N;if(C<E||w<E)C=w=I/3;else{var O=c.subtract(p);L=s.normalize(C),N=r.normalize(w),L.dot(O)-N.dot(O)>I*I&&(C=w=I/3,L=N=null)}return[p,p.add(L||s.normalize(C)),c.add(N||r.normalize(w)),c]},reparameterize:function(e,t,n,a){for(var s=e;s<=t;s++)n[s-e]=this.findRoot(a,this.points[s],n[s-e]);for(var s=1,i=n.length;s<i;s++)if(n[s]<=n[s-1])return!1;return!0},findRoot:function(e,t,n){for(var a=[],s=[],r=0;2>=r;r++)a[r]=e[r+1].subtract(e[r]).multiply(3);for(var r=0;1>=r;r++)s[r]=a[r+1].subtract(a[r]).multiply(2);var i=this.evaluate(3,e,n),o=this.evaluate(2,a,n),d=this.evaluate(1,s,n),l=i.subtract(t),p=o.dot(o)+l.dot(d);return E.isZero(p)?n:n-l.dot(o)/p},evaluate:function(e,n,a){for(var t=n.slice(),s=1;s<=e;s++)for(var i=0;i<=e-s;i++)t[i]=t[i].multiply(1-a).add(t[i+1].multiply(a));return t[0]},chordLengthParameterize:function(e,t){for(var n=[0],a=e+1;a<=t;a++)n[a-e]=n[a-e-1]+this.points[a].getDistance(this.points[a-1]);for(var a=1,i=t-e;a<=i;a++)n[a]/=n[i];return n},findMaxError:function(e,t,n,a){for(var s=l((t-e+1)/2),r=0,o=e+1;o<t;o++){var i=this.evaluate(3,n,a[o-e]),d=i.subtract(this.points[o]),p=d.x*d.x+d.y*d.y;p>=r&&(r=p,s=o)}return{error:r,index:s}}}),ae=q.extend({_class:'TextItem',_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content='',this._lines=[];var t=e&&A.isPlainObject(e)&&void 0===e.x&&void 0===e.y;this._initialize(t&&e,!t&&O.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=''+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:'#getStyle',setCharacterStyle:'#setStyle',getParagraphStyle:'#getStyle',setParagraphStyle:'#setStyle'}),se=ae.extend({_class:'PointText',initialize:function(){ae.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new N(e.x,e.y,this,'setPoint')},setPoint:function(){var e=O.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var a=this._lines,s=this._style,r=s.hasFill(),o=s.hasStroke(),d=s.getLeading(),p=e.shadowColor;e.font=s.getFontStyle(),e.textAlign=s.getJustification();for(var c=0,i=a.length;c<i;c++){e.shadowColor=p;var l=a[c];r&&(e.fillText(l,0,0),e.shadowColor='rgba(0,0,0,0)'),o&&e.strokeText(l,0,0),e.translate(0,d)}}},_getBounds:function(e){var t=this._style,n=this._lines,i=n.length,a=t.getJustification(),s=t.getLeading(),r=this.getView().getTextWidth(t.getFontStyle(),n),o=0;'left'!==a&&(o-=r/('center'===a?2:1));var d=new B(o,i?-0.75*s:0,r,i*s);return e?e._transformBounds(d,d):d}}),re=A.extend(new function(){function e(e){var t=e.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/),n;if(t){n=[0,0,0];for(var a=0,s;3>a;a++)s=t[a+1],n[a]=parseInt(1==s.length?s+s:s,16)/255}else if(t=e.match(/^rgba?\((.*)\)$/)){n=t[1].split(',');for(var a=0,o=n.length,s;a<o;a++)s=+n[a],n[a]=3>a?s/255:s}else if(v){var d=i[e];if(!d){r||(r=ve.getContext(1,1),r.globalCompositeOperation='copy'),r.fillStyle='rgba(0,0,0,0)',r.fillStyle=e,r.fillRect(0,0,1,1);var l=r.getImageData(0,0,1,1).data;d=i[e]=[l[0]/255,l[1]/255,l[2]/255]}n=d.slice()}else n=[0,0,0];return n}var t={gray:['gray'],rgb:['red','green','blue'],hsb:['hue','saturation','brightness'],hsl:['hue','saturation','lightness'],gradient:['gradient','origin','destination','highlight']},n={},i={},a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],s={"rgb-hsb":function(e,t,n){var i=y(e,t,n),a=_(e,t,n),s=i-a,r=0==s?0:60*(i==e?(t-n)/s+(t<n?6:0):i==t?(n-e)/s+2:(e-t)/s+4);return[r,0===i?0:s/i,i]},"hsb-rgb":function(e,t,n){e=(e/60%6+6)%6;var s=l(e),i=e-s,s=a[s],r=[n,n*(1-t),n*(1-t*i),n*(1-t*(1-i))];return[r[s[0]],r[s[1]],r[s[2]]]},"rgb-hsl":function(e,t,n){var i=y(e,t,n),a=_(e,t,n),r=i-a,o=0==r,d=o?0:60*(i==e?(t-n)/r+(t<n?6:0):i==t?(n-e)/r+2:(e-t)/r+4),p=(i+a)/2,l=o?0:0.5>p?r/(i+a):r/(2-i-a);return[d,l,p]},"hsl-rgb":function(e,t,n){if(e=(e/360%1+1)%1,0===t)return[n,n,n];for(var a=[e+1/3,e,e-1/3],s=0.5>n?n*(1+t):n+t-n*t,r=2*n-s,o=[],d=0,i;3>d;d++)i=a[d],0>i&&(i+=1),1<i&&(i-=1),o[d]=1>6*i?r+6*(s-r)*i:1>2*i?s:2>3*i?r+6*((s-r)*(2/3-i)):r;return o},"rgb-gray":function(e,t,n){return[0.2989*e+0.587*t+0.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}},r;return A.each(t,function(e,i){n[i]=[],A.each(e,function(e,a){var s=A.capitalize(e),r=/^(hue|saturation)$/.test(e),o=n[i][a]='gradient'===e?function(e){var t=this._components[0];return e=oe.read(Array.isArray(e)?e:arguments,0,{readNull:!0}),t!==e&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:'gradient'===i?function(){return O.read(arguments,0,{readNull:'highlight'==e,clone:!0})}:function(e){return null==e||isNaN(e)?0:e};this['get'+s]=function(){return this._type===i||r&&/^hs[bl]$/.test(this._type)?this._components[a]:this._convert(i)[a]},this['set'+s]=function(e){this._type===i||r&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=t[i],this._type=i),this._components[a]=o.call(this,e),this._changed()}},this)},{_class:'Color',_readIndex:!0,initialize:function a(s){var r=arguments,o=this.__read,d=0,p,c,_,g;Array.isArray(s)&&(r=s,s=r[0]);var u=null!=s&&typeof s;if('string'===u&&s in t&&(p=s,s=r[1],Array.isArray(s)?(c=s,_=r[2]):(o&&(d=1),r=A.slice(r,1),u=typeof s)),!c){if(g='number'===u?r:'object'===u&&null!=s.length?s:null,g){p||(p=3<=g.length?'rgb':'gray');var h=t[p].length;_=g[h],o&&(d+=g===arguments?h+(null==_?0:1):1),g.length>h&&(g=A.slice(g,0,h))}else if('string'===u)p='rgb',c=e(s),4===c.length&&(_=c[3],c.length--);else if('object'===u)if(s.constructor===a){if(p=s._type,c=s._components.slice(),_=s._alpha,'gradient'===p)for(var m=1,f=c.length,l;m<f;m++)l=c[m],l&&(c[m]=l.clone());}else if(s.constructor===oe)p='gradient',g=r;else{p='hue'in s?'lightness'in s?'hsl':'hsb':'gradient'in s||'stops'in s||'radial'in s?'gradient':'gray'in s?'gray':'rgb';var y=t[p],x=n[p];this._components=c=[];for(var m=0,f=y.length,b;m<f;m++)b=s[y[m]],null==b&&!m&&'gradient'===p&&'stops'in s&&(b={stops:s.stops,radial:s.radial}),b=x[m].call(this,b),null!=b&&(c[m]=b);_=s.alpha}o&&p&&(d=1)}if(this._type=p||'rgb',!c){this._components=c=[];for(var x=n[this._type],m=0,f=x.length,b;m<f;m++)b=x[m].call(this,g&&g[m]),null!=b&&(c[m]=b)}return this._components=c,this._properties=t[this._type],this._alpha=_,o&&(this.__read=d),this},set:'#initialize',_serialize:function(e,t){var n=this.getComponents();return A.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(e){var t;return this._type===e?this._components.slice():(t=s[this._type+'-'+e])?t.apply(this,this._components):s['rgb-'+e].apply(this,s[this._type+'-rgb'].apply(this,this._components))},convert:function(e){return new re(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=t[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null==this._alpha?1:this._alpha},setAlpha:function(e){this._alpha=null==e?null:_(y(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=A.isPlainValue(e,!0)?re.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this.getAlpha()===t.getAlpha()&&A.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n='gradient'===this._type,a=I.instance,s=0,i=e.length,r;s<i;s++)r=this._components[s],null!=r&&t.push(e[s]+': '+(n?r:a.number(r)));return null!=this._alpha&&t.push('alpha: '+a.number(this._alpha)),'{ '+t.join(', ')+' }'},toCSS:function(e){function t(e){return x(255*(0>e?0:1<e?1:e))}var n=this._convert('rgb'),i=e||null==this._alpha?1:this._alpha;return n=[t(n[0]),t(n[1]),t(n[2])],1>i&&n.push(0>i?0:i),e?'#'+(16777216+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?'rgba(':'rgb(')+n.join(',')+')'},toCanvasStyle:function(e,t){if(this._canvasStyle)return this._canvasStyle;if('gradient'!==this._type)return this._canvasStyle=this.toCSS();var n=this._components,a=n[0],s=a._stops,r=n[1],o=n[2],d=n[3],p=t&&t.inverted(),c;if(p&&(r=p._transformPoint(r),o=p._transformPoint(o),d&&(d=p._transformPoint(d))),a._radial){var _=o.getDistance(r);if(d){var g=d.subtract(r);g.getLength()>_&&(d=r.add(g.normalize(_-0.1)))}var u=d||r;c=e.createRadialGradient(u.x,u.y,0,r.x,r.y,_)}else c=e.createLinearGradient(r.x,r.y,o.x,o.y);for(var h=0,i=s.length;h<i;h++){var l=s[h],m=l._offset;c.addColorStop(null==m?h/(i-1):m,l._color.toCanvasStyle())}return this._canvasStyle=c},transform:function(e){if('gradient'===this._type){for(var t=this._components,n=1,i=t.length,a;n<i;n++)a=t[n],e._transformPoint(a,a,!0);this._changed()}},statics:{_types:t,random:function(){var e=Math.random;return new re(e(),e(),e())}}})},new function(){return A.each({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}},function(e,t){this[t]=function(t){t=re.read(arguments);for(var n=this._type,a=this._components,s=t._convert(n),r=0,i=a.length;r<i;r++)s[r]=e(a[r],s[r]);return new re(n,s,null==this._alpha?null:e(this._alpha,t.getAlpha()))}},{})}),oe=A.extend({_class:'Gradient',initialize:function(e,t){this._id=L.get(),e&&A.isPlainObject(e)&&(this.set(e),e=t=null),null==this._stops&&this.setStops(e||['white','black']),null==this._radial&&this.setRadial('string'==typeof t&&'radial'===t||t||!1)},_serialize:function(e,t){return t.add(this,function(){return A.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;-1!=t&&(this._owners.splice(t,1),!this._owners.length&&(this._owners=void 0))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new oe(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(2>e.length)throw new Error('Gradient stop list needs to contain at least two stops.');var t=this._stops;if(t)for(var n=0,i=t.length;n<i;n++)t[n]._owner=void 0;t=this._stops=de.readList(e,0,{clone:!0});for(var n=0,i=t.length;n<i;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,a=t.length;if(a===n.length){for(var s=0;s<a;s++)if(!t[s].equals(n[s]))return!1;return!0}}return!1}}),de=A.extend({_class:'GradientStop',initialize:function(e,t){var n=e,i=t;'object'==typeof e&&void 0===t&&(Array.isArray(e)&&'number'!=typeof e[0]?(n=e[0],i=e[1]):('color'in e||'offset'in e||'rampPoint'in e)&&(n=e.color,i=e.offset||e.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new de(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,i=this._offset;return A.serialize(null==i?[n]:[n,i],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:'#getOffset',setRampPoint:'#setOffset',getColor:function(){return this._color},setColor:function(){var e=re.read(arguments,0,{clone:!0});e&&(e._owner=this),this._color=e,this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),le=A.extend(new function(){var e={fillColor:null,fillRule:'nonzero',strokeColor:null,strokeWidth:1,strokeCap:'butt',strokeJoin:'miter',strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new O,selectedColor:null},t=A.set({},e,{fontFamily:'sans-serif',fontWeight:'normal',fontSize:12,leading:null,justification:'left'}),n=A.set({},t,{fillColor:new re}),i={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},r={_class:'Style',beans:!0,initialize:function(i,s,r){this._values={},this._owner=s,this._project=s&&s._project||r||a.project,this._defaults=!s||s instanceof j?t:s instanceof ae?n:e,i&&this.set(i)}};return A.each(t,function(e,t){var n=/Color$/.test(t),a=A.capitalize(t),o=i[t],d='set'+a,p='get'+a;r[d]=function(e){var a=this._owner,s=a&&a._children;if(s&&0<s.length&&!(a instanceof te))for(var r=0,i=s.length;r<i;r++)s[r]._style[d](e);else if(t in this._defaults){var l=this._values[t];l!==e&&(n&&(l&&void 0!==l._owner&&(l._owner=void 0),e&&e.constructor===re&&(e._owner&&(e=e.clone()),e._owner=a)),this._values[t]=e,a&&a._changed(o||65))}},r[p]=function(e){var a=this._owner,s=a&&a._children,r;if(t in this._defaults&&(!s||!s.length||e||a instanceof te)){var r=this._values[t];if(void 0===r)r=this._defaults[t],r&&r.clone&&(r=r.clone());else{var o=n?re:'shadowOffset'===t?O:null;o&&!(r&&r.constructor===o)&&(this._values[t]=r=o.read([r],0,{readNull:!0,clone:!0}),r&&n&&(r._owner=a))}}else if(s)for(var d=0,c=s.length,l;d<c;d++)if(l=s[d]._style[p](),!d)r=l;else if(!A.equals(r,l))return;return r},s[p]=function(e){return this._style[p](e)},s[d]=function(e){this._style[d](e)}}),A.each({Font:'FontFamily',WindingRule:'FillRule'},function(e,t){var n='get'+t,i='set'+t;r[n]=s[n]='#get'+e,r[i]=s[i]='#set'+e}),q.inject(s),r},{set:function(e){var t=e instanceof le,n=t?e._values:e;if(n)for(var i in n)if(i in this._defaults){var a=n[i];this[i]=a&&t&&a.clone?a.clone():a}},equals:function(e){function t(e,t,n){var i=e._values,a=t._values,s=t._defaults;for(var r in i){var o=i[r],d=a[r];if(!(n&&r in a)&&!A.equals(o,void 0===d?s[r]:d))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},hasFill:function(){var e=this.getFillColor();return!!e&&0<e.alpha},hasStroke:function(){var e=this.getStrokeColor();return!!e&&0<e.alpha&&0<this.getStrokeWidth()},hasShadow:function(){var e=this.getShadowColor();return!!e&&0<e.alpha&&(0<this.getShadowBlur()||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+' '+e+(/[a-z]/i.test(e+'')?' ':'px ')+this.getFontFamily()},getFont:'#getFontFamily',setFont:'#setFontFamily',getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return /pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null==t?1.2*n:t}}),pe=new function(){function e(e,t,n,a){for(var s=['','webkit','moz','Moz','ms','o'],r=t[0].toUpperCase()+t.substring(1),o=0;6>o;o++){var i=s[o],d=i?i+r:t;if(d in e){if(n)e[d]=a;else return e[d];break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,'')},getBounds:function(e,t){var n=e.ownerDocument,i=n.body,a=n.documentElement,s;try{s=e.getBoundingClientRect()}catch(t){s={left:0,top:0,width:0,height:0}}var r=s.left-(a.clientLeft||i.clientLeft||0),o=s.top-(a.clientTop||i.clientTop||0);if(!t){var d=n.defaultView;r+=d.pageXOffset||a.scrollLeft||i.scrollLeft,o+=d.pageYOffset||a.scrollTop||i.scrollTop}return new B(r,o,s.width,s.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,i=t.documentElement;return new B(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(e,t){return pe.getBounds(e,t).getPoint()},getSize:function(e){return pe.getBounds(e,!0).getSize()},isInvisible:function(e){return pe.getSize(e).equals(new z(0,0))},isInView:function(e){return!pe.isInvisible(e)&&pe.getViewportBounds(e).intersects(pe.getBounds(e,!0))},isInserted:function(e){return w.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,i){if('object'==typeof n)for(var a in n)e(t,a,!0,n[a]);else e(t,n,!0,i)}}},ce={add:function(e,t){if(e)for(var n in t)for(var a=t[n],s=n.split(/[\s,]+/g),r=0,i=s.length;r<i;r++)e.addEventListener(s[r],a,!1)},remove:function(e,t){if(e)for(var n in t)for(var a=t[n],s=n.split(/[\s,]+/g),r=0,i=s.length;r<i;r++)e.removeEventListener(s[r],a,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new O(t.pageX||t.clientX+w.documentElement.scrollLeft,t.pageY||t.clientY+w.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return ce.getPoint(e).subtract(pe.getOffset(t||ce.getTarget(e)))}};ce.requestAnimationFrame=new function(){function e(){var s=a;a=[];for(var r=0,i=s.length;r<i;r++)s[r]();n=t&&a.length,n&&t(e)}var t=pe.getPrefixed(v,'requestAnimationFrame'),n=!1,a=[],i;return function(s){a.push(s),t?!n&&(t(e),n=!0):!i&&(i=setInterval(e,1e3/60))}};var _e=A.extend(k,{_class:'View',initialize:function e(t,n){function i(e){return n[e]||parseInt(n.getAttribute(e),10)}function s(){var e=pe.getSize(n);return e.isNaN()||e.isZero()?new z(i('width'),i('height')):e}var r;if(v&&n){this._id=n.getAttribute('id'),null==this._id&&n.setAttribute('id',this._id='view-'+e._id++),ce.add(n,this._viewEvents);var o='none';if(pe.setPrefixed(n.style,{userDrag:o,userSelect:o,touchCallout:o,contentZooming:o,tapHighlightColor:'rgba(0,0,0,0)'}),P.hasAttribute(n,'resize')){var d=this;ce.add(v,this._windowEvents={resize:function(){d.setViewSize(s())}})}if(r=s(),P.hasAttribute(n,'stats')&&'undefined'!=typeof Stats){this._stats=new Stats;var l=this._stats.domElement,p=l.style,c=pe.getOffset(n);p.position='absolute',p.left=c.x+'px',p.top=c.y+'px',w.body.appendChild(l)}}else r=new z(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=v&&v.devicePixelRatio||1),this._setElementSize(r.width,r.height),this._viewSize=r,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new M)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!a.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;_e._focused===this&&(_e._focused=null),_e._views.splice(_e._views.indexOf(this),1),delete _e._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),ce.remove(this._element,this._viewEvents),ce.remove(v,this._windowEvents),this._element=this._project=null,this.off('frame'),this._animate=!1,this._frameItems={},!0},_events:A.each(q._itemHandlers.concat(['onResize','onKeyDown','onKeyUp']),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;ce.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!pe.getPrefixed(w,'hidden')||'true'===P.getAttribute(t,'keepalive'))&&pe.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){a=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit('frame',new A({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1==++this._frameItemCount&&this.on('frame',this._handleFrameItems)):(delete n[e._id],0==--this._frameItemCount&&this.off('frame',this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit('frame',new A(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=void 0},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new R(e.width,e.height,this,'setViewSize')},setViewSize:function(){var e=z.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit('resize',{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new B(new O(),this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return pe.isInView(this._element)},isInserted:function(){return pe.isInserted(this._element)},getPixelSize:function(e){var t=this._element,n;if(t){var i=t.parentNode,a=w.createElement('div');a.style.fontSize=e,i.appendChild(a),n=parseFloat(pe.getStyles(a).fontSize),i.removeChild(a)}else n=parseFloat(n);return n},getTextWidth:function(){return 0}},A.each(['rotate','scale','shear','skew'],function(e){this[e]=function(){var t=('rotate'===e?A:O).read(arguments),n=O.read(arguments,0,{readNull:!0});return this.transform(new M()[e](t,n||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new M;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=O.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose(),t=e&&e.scaling;return t?(t.x+t.y)/2:0},setZoom:function(e){this.transform(new M().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){var e=this._decompose();return e&&e.rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return t?new N(t.x,t.y,this,'setScaling'):void 0},setScaling:function(){var e=this.getScaling(),t=O.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(O.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(O.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(O.read(arguments))},getEventPoint:function(e){return this.viewToProject(ce.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){w&&'string'==typeof t&&(t=w.getElementById(t));var n=v?ge:_e;return new n(e,t)}}},new function(){function e(e){var t=ce.getTarget(e);return t.getAttribute&&_e._viewsById[t.getAttribute('id')]}function t(){var e=_e._focused;if(!e||!e.isVisible())for(var t=0,n=_e._views.length;t<n;t++)if((e=_e._views[t]).isVisible()){_e._focused=p=e;break}}function n(e,t,n){e._handleMouseEvent('mousemove',t,n)}function i(e,t,n,i,a,s,r){function o(e,n){if(!e.responds(n)){var r=y[n];if(r)return o(e,r)}else if(l||(l=new fe(n,i,a,t||e,s?a.subtract(s):null)),e.emit(n,l)&&(m=!0,l.prevented&&(f=!0),l.stopped))return d=!0}for(var d=!1,l;e&&e!==r&&!o(e,n);)e=e._parent;return d}function s(e,t,n,a,s,r){return e._project.removeOn(n),f=m=!1,I&&i(I,null,n,a,s,r)||t&&t!==I&&!t.isDescendant(I)&&i(t,null,n,a,s,r,I)||i(e,I||t||e,n,a,s,r)}if(v){var r=!1,o=!1,d=v.navigator,l,p,c,_,g;d.pointerEnabled||d.msPointerEnabled?(c='pointerdown MSPointerDown',_='pointermove MSPointerMove',g='pointerup pointercancel MSPointerUp MSPointerCancel'):(c='touchstart',_='touchmove',g='touchend touchcancel',!('ontouchstart'in v&&d.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i))&&(c+=' mousedown',_+=' mousemove',g+=' mouseup'));var u={},h={mouseout:function(e){var t=_e._focused,i=ce.getRelatedTarget(e);if(t&&(!i||'HTML'===i.nodeName)){var a=ce.getOffset(e,t._element),s=a.x,r=S,o=r(s),d=o-33554432;a.x=r(d)<o?d*(0>s?-1:1):s,n(t,e,t.viewToProject(a))}},scroll:t};u[c]=function(t){var n=_e._focused=e(t);r||(r=!0,n._handleMouseEvent('mousedown',t))},h[_]=function(i){var a=_e._focused;if(!o){var s=e(i);s?a!==s&&(a&&n(a,i),!l&&(l=a),a=_e._focused=p=s):p&&p===a&&(l&&!l.isInserted()&&(l=null),a=_e._focused=l,l=null,t())}a&&n(a,i)},h[c]=function(){o=!0},h[g]=function(e){var t=_e._focused;t&&r&&t._handleMouseEvent('mouseup',e),o=r=!1},ce.add(w,h),ce.add(v,{load:t});var m=!1,f=!1,y={doubleclick:'click',mousedrag:'mousemove'},x=!1,b={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},C,k,A,P,T,I,E,L,N;return{_viewEvents:u,_handleMouseEvent:function(e,t,n){function a(e){return o.virtual[e]||c.responds(e)||p&&p.responds(e)}var o=this._itemEvents,d=o.native[e],l='mousemove'===e,p=this._scope.tool,c=this;l&&r&&a('mousedrag')&&(e='mousedrag'),n||(n=this.getEventPoint(t));var _=this.getBounds().contains(n),g=d&&_&&c._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),u=g&&g.item||null,h=!1,y={};if(y[e.substr(5)]=!0,d&&u!==T&&(T&&i(T,null,'mouseleave',t,n),u&&i(u,null,'mouseenter',t,n),T=u),x^_&&(i(this,null,_?'mouseenter':'mouseleave',t,n),C=_?this:null,h=!0),(_||y.drag)&&!n.equals(A)&&(s(this,u,l?e:'mousemove',t,n,A),h=!0),x=_,y.down&&_||y.up&&k){if(s(this,u,e,t,n,k),y.down){if(N=u===E&&300>Date.now()-L,P=E=u,!f&&u){for(var b=u;b&&!b.responds('mousedrag');)b=b._parent;b&&(I=u)}k=n}else y.up&&(f||u!==P||(L=Date.now(),s(this,u,N?'doubleclick':'click',t,n,k),N=!1),P=I=null);x=!1,h=!0}A=n,h&&p&&(m=p._handleMouseEvent(e,t,n,y)||m),(m&&!y.move||y.down&&a('mouseup'))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,i){function s(s){s.responds(e)&&(a=r,s.emit(e,d=d||new he(e,t,n,i)))}var r=this._scope,o=r.tool,d;this.isVisible()&&(s(this),o&&o.responds(e)&&s(o))},_countItemEvent:function(e,t){var n=this._itemEvents,i=n.native,a=n.virtual;for(var s in b)i[s]=(i[s]||0)+(b[s][e]||0)*t;a[e]=(a[e]||0)+t},statics:{updateFocus:t}}}}),ge=_e.extend({_class:'CanvasView',initialize:function(e,t){if(!(t instanceof v.HTMLCanvasElement)){var n=z.read(arguments,1);if(n.isZero())throw new Error('Cannot create CanvasView with the provided argument: '+A.slice(arguments,1));t=ve.getCanvas(n)}var i=this._context=t.getContext('2d');if(i.save(),this._pixelRatio=1,!/^off|false$/.test(P.getAttribute(t,'hidpi'))){var a=v.devicePixelRatio||1,s=pe.getPrefixed(i,'backingStorePixelRatio')||1;this._pixelRatio=a/s}_e.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var i=this._pixelRatio;if(e.base.call(this,t*i,n*i),1!==i){var a=this._element,s=this._context;if(!P.hasAttribute(a,'resize')){var r=a.style;r.width=t+'px',r.height=n+'px'}s.restore(),s.save(),s.scale(i,i)}},getPixelSize:function e(t){var n=a.agent,i;if(n&&n.firefox)i=e.base.call(this,t);else{var s=this._context,r=s.font;s.font=t+' serif',i=parseFloat(s.font),s.font=r}return i},getTextWidth:function(e,t){var n=this._context,a=n.font,s=0;n.font=e;for(var r=0,i=t.length;r<i;r++)s=y(s,n.measureText(t[r]).width);return n.font=a,s},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),ue=A.extend({_class:'Event',initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return me.modifiers}}),he=ue.extend({_class:'KeyEvent',initialize:function(e,t,n,i){this.type=e,this.event=t,this.key=n,this.character=i},toString:function(){return'{ type: \''+this.type+'\', key: \''+this.key+'\', character: \''+this.character+'\', modifiers: '+this.getModifiers()+' }'}}),me=new function(){function e(e){var t=e.key||e.keyIdentifier;return t=/^U\+/.test(t)?i(parseInt(t.substr(2),16)):/^Arrow[A-Z]/.test(t)?t.substr(5):'Unidentified'===t||void 0===t?i(e.keyCode):t,n[t]||(1<t.length?A.hyphenate(t):t.toLowerCase())}function t(e,n,i,s){var p=e?'keydown':'keyup',c=_e._focused,_;if(r[n]=e,e?o[n]=i:delete o[n],1<n.length&&(_=A.camelize(n))in d){d[_]=e;var g=a&&a.agent;if('meta'===_&&g&&g.mac)if(e)l={};else{for(var u in l)u in o&&t(!1,u,l[u],s);l=null}}else e&&l&&(l[n]=i);c&&c._handleKeyEvent(e?'keydown':'keyup',s,n,i)}var n={"	":'tab'," ":'space',"":'backspace',"":'delete',Spacebar:'space',Del:'delete',Win:'meta',Esc:'escape'},s={tab:'\t',space:' ',enter:'\r'},r={},o={},d=new A({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=a&&a.agent;return e&&e.mac?this.meta:this.control}}}),l,p;return ce.add(w,{keydown:function(n){var i=e(n),r=a&&a.agent;1<i.length||r&&r.chrome&&(n.altKey||r.mac&&n.metaKey||!r.mac&&n.ctrlKey)?t(!0,i,s[i]||(1<i.length?'':i),n):p=i},keypress:function(n){if(p){var a=e(n),s=n.charCode,r=32<=s?i(s):1<a.length?'':a;a!==p&&(a=r.toLowerCase()),t(!0,a,r,n),p=null}},keyup:function(n){var i=e(n);i in o&&t(!1,i,o[i],n)}}),ce.add(v,{blur:function(e){for(var n in o)t(!1,n,o[n],e)}}),{modifiers:d,isDown:function(e){return!!r[e]}}},fe=ue.extend({_class:'MouseEvent',initialize:function(e,t,n,i,a){this.type=e,this.event=t,this.point=n,this.target=i,this.delta=a},toString:function(){return'{ type: \''+this.type+'\', point: '+this.point+', target: '+this.target+(this.delta?', delta: '+this.delta:'')+', modifiers: '+this.getModifiers()+' }'}}),ye=ue.extend({_class:'ToolEvent',_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e?e:t?t.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?'_downCount':'_moveCount']},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?'downCount':'count']=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return'{ type: '+this.type+', point: '+this.getPoint()+', count: '+this.getCount()+', modifiers: '+this.getModifiers()+' }'}}),xe=T.extend({_class:'Tool',_list:'tools',_reference:'tool',_events:['onMouseDown','onMouseUp','onMouseDrag','onMouseMove','onActivate','onDeactivate','onEditOptions','onKeyDown','onKeyUp'],initialize:function(e){T.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,i){function s(e,t){var a=n,s=o?g._point:g._downPoint||a;if(o){if(g._moveCount&&a.equals(s))return!1;if(s&&(null!=e||null!=t)){var r=a.subtract(s),d=r.getLength();if(d<(e||0))return!1;t&&(a=s.add(r.normalize(_(d,t))))}g._moveCount++}return g._point=a,g._lastPoint=s||a,i.down&&(g._moveCount=-1,g._downPoint=a,g._downCount++),!0}function r(){d&&(c=g.emit(e,new ye(g,e,t))||c)}a=this._scope,i.drag&&!this.responds(e)&&(e='mousemove');var o=i.move||i.drag,d=this.responds(e),l=this.minDistance,p=this.maxDistance,c=!1,g=this;if(i.down)s(),r();else if(i.up)s(null,p),r();else if(d)for(;s(l,p);)r();return c}}),be={request:function(e){var t=new d.XMLHttpRequest;return t.open((e.method||'get').toUpperCase(),e.url,A.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;0===n||200===n?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,i='Could not load "'+e.url+'" (Status: '+n+')';if(e.onError)e.onError(i,n);else throw new Error(i)},t.send(null)}},ve={canvases:[],getCanvas:function(e,t){if(!v)return null;var n=!0,i;'object'==typeof e&&(t=e.height,e=e.width),this.canvases.length?i=this.canvases.pop():(i=w.createElement('canvas'),n=!1);var a=i.getContext('2d');if(!a)throw new Error('Canvas '+i+' is unable to provide a 2D context.');return i.width===e&&i.height===t?n&&a.clearRect(0,0,e+1,t+1):(i.width=e,i.height=t),a.save(),i},getContext:function(e,t){var n=this.getCanvas(e,t);return n?n.getContext('2d'):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext('2d').restore(),this.canvases.push(t))}},Ce=new function(){function e(e,t,n){return 0.2989*e+0.587*t+0.114*n}function t(t,n,i,s){var r=s-e(t,n,i);v=t+r,C=n+r,w=i+r;var s=e(v,C,w),d=a(v,C,w),l=o(v,C,w);if(0>d){var p=s-d;v=s+(v-s)*s/p,C=s+(C-s)*s/p,w=s+(w-s)*s/p}if(255<l){var c=255-s,_=l-s;v=s+(v-s)*c/_,C=s+(C-s)*c/_,w=s+(w-s)*c/_}}function n(e,t,n){return o(e,t,n)-a(e,t,n)}function i(e,t,n,i){var s=[e,t,n],r=o(e,t,n),d=a(e,t,n),l;d=d===e?0:d===t?1:2,r=r===e?0:r===t?1:2,l=0===a(d,r)?1===o(d,r)?2:1:0,s[r]>s[d]?(s[l]=(s[l]-s[d])*i/(s[r]-s[d]),s[r]=i):s[l]=s[r]=0,s[d]=0,v=s[0],C=s[1],w=s[2]}var a=_,o=y,s=S,r={multiply:function(){v=h*p/255,C=m*c/255,w=f*g/255},screen:function(){v=h+p-h*p/255,C=m+c-m*c/255,w=f+g-f*g/255},overlay:function(){v=128>h?2*h*p/255:255-2*(255-h)*(255-p)/255,C=128>m?2*m*c/255:255-2*(255-m)*(255-c)/255,w=128>f?2*f*g/255:255-2*(255-f)*(255-g)/255},"soft-light":function(){var e=p*h/255;v=e+h*(255-(255-h)*(255-p)/255-e)/255,e=c*m/255,C=e+m*(255-(255-m)*(255-c)/255-e)/255,e=g*f/255,w=e+f*(255-(255-f)*(255-g)/255-e)/255},"hard-light":function(){v=128>p?2*p*h/255:255-2*(255-p)*(255-h)/255,C=128>c?2*c*m/255:255-2*(255-c)*(255-m)/255,w=128>g?2*g*f/255:255-2*(255-g)*(255-f)/255},"color-dodge":function(){v=0===h?0:255===p?255:a(255,255*h/(255-p)),C=0===m?0:255===c?255:a(255,255*m/(255-c)),w=0===f?0:255===g?255:a(255,255*f/(255-g))},"color-burn":function(){v=255===h?255:0===p?0:o(0,255-255*(255-h)/p),C=255===m?255:0===c?0:o(0,255-255*(255-m)/c),w=255===f?255:0===g?0:o(0,255-255*(255-f)/g)},darken:function(){v=h<p?h:p,C=m<c?m:c,w=f<g?f:g},lighten:function(){v=h>p?h:p,C=m>c?m:c,w=f>g?f:g},difference:function(){v=h-p,0>v&&(v=-v),C=m-c,0>C&&(C=-C),w=f-g,0>w&&(w=-w)},exclusion:function(){v=h+p*(255-h-h)/255,C=m+c*(255-m-m)/255,w=f+g*(255-f-f)/255},hue:function(){i(p,c,g,n(h,m,f)),t(v,C,w,e(h,m,f))},saturation:function(){i(h,m,f,n(p,c,g)),t(v,C,w,e(h,m,f))},luminosity:function(){t(h,m,f,e(p,c,g))},color:function(){t(p,c,g,e(h,m,f))},add:function(){v=a(h+p,255),C=a(m+c,255),w=a(f+g,255)},subtract:function(){v=o(h-p,0),C=o(m-c,0),w=o(f-g,0)},average:function(){v=(h+p)/2,C=(m+c)/2,w=(f+g)/2},negation:function(){v=255-s(255-p-h),C=255-s(255-c-m),w=255-s(255-g-f)}},d=this.nativeModes=A.each(['source-over','source-in','source-out','source-atop','destination-over','destination-in','destination-out','destination-atop','lighter','darker','copy','xor'],function(e){this[e]=!0},{}),l=ve.getContext(1,1),p,c,g,u,h,m,f,x,v,C,w;l&&(A.each(r,function(e,t){var n='darken'===t,i=!1;l.save();try{l.fillStyle=n?'#300':'#a00',l.fillRect(0,0,1,1),l.globalCompositeOperation=t,l.globalCompositeOperation===t&&(l.fillStyle=n?'#a00':'#300',l.fillRect(0,0,1,1),i=l.getImageData(0,0,1,1).data[0]===n?51:170)}catch(t){}l.restore(),d[t]=i}),ve.release(l)),this.process=function(e,t,n,a,s){var o=t.canvas,_='normal'===e;if(_||d[e])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=a,_||(n.globalCompositeOperation=e),n.drawImage(o,s.x,s.y),n.restore();else{var y=r[e];if(!y)return;for(var b=n.getImageData(s.x,s.y,o.width,o.height),S=b.data,k=t.getImageData(0,0,o.width,o.height).data,A=0,i=S.length;A<i;A+=4){p=k[A],h=S[A],c=k[A+1],m=S[A+1],g=k[A+2],f=S[A+2],u=k[A+3],x=S[A+3],y();var l=u*a/255,P=1-l;S[A]=l*v+P*h,S[A+1]=l*C+P*m,S[A+2]=l*w+P*f,S[A+3]=u*a+P*x}n.putImageData(b,s.x,s.y)}}},Se=new function(){function e(e,t,n){for(var i in t){var s=t[i],r=a[i];'number'==typeof s&&n&&(s=n.number(s)),r?e.setAttributeNS(r,i,s):e.setAttribute(i,s)}return e}var t='http://www.w3.org/2000/svg',n='http://www.w3.org/2000/xmlns',i='http://www.w3.org/1999/xlink',a={href:i,xlink:n,xmlns:n+'/',"xmlns:xlink":n+'/'};return{svg:t,xmlns:n,xlink:i,create:function(n,i,a){return e(w.createElementNS(t,n),i,a)},get:function(e,t){var n=a[t],i=n?e.getAttributeNS(n,t):e.getAttribute(t);return'null'===i?null:i},set:e}},we=A.each({fillColor:['fill','color'],fillRule:['fill-rule','string'],strokeColor:['stroke','color'],strokeWidth:['stroke-width','number'],strokeCap:['stroke-linecap','string'],strokeJoin:['stroke-linejoin','string'],strokeScaling:['vector-effect','lookup',{true:'none',false:'non-scaling-stroke'},function(e,t){return!t&&(e instanceof $||e instanceof H||e instanceof ae)}],miterLimit:['stroke-miterlimit','number'],dashArray:['stroke-dasharray','array'],dashOffset:['stroke-dashoffset','number'],fontFamily:['font-family','string'],fontWeight:['font-weight','string'],fontSize:['font-size','number'],justification:['text-anchor','lookup',{left:'start',center:'middle',right:'end'}],opacity:['opacity','number'],blendMode:['mix-blend-mode','style']},function(e,t){var n=A.capitalize(t),i=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:i,fromSVG:i&&A.each(i,function(e,t){this[e]=t},{}),exportFilter:e[3],get:'get'+n,set:'set'+n}},{});return new function(){function e(e,t,n){var i=new A,a=e.getTranslation();if(t){e=e._shiftless();var s=e._inverseTransform(a);i[n?'cx':'x']=s.x,i[n?'cy':'y']=s.y,a=null}if(!e.isIdentity()){var r=e.decompose();if(r){var o=[],d=r.rotation,l=r.scaling,p=r.skewing;a&&!a.isZero()&&o.push('translate('+_.point(a)+')'),d&&o.push('rotate('+_.number(d)+')'),E.isZero(l.x-1)&&E.isZero(l.y-1)||o.push('scale('+_.point(l)+')'),p.x&&o.push('skewX('+_.number(p.x)+')'),p.y&&o.push('skewY('+_.number(p.y)+')'),i.transform=o.join(' ')}else i.transform='matrix('+e.getValues().join(',')+')'}return i}function t(t,n){for(var a=e(t._matrix),s=t._children,o=Se.create('g',a,_),d=0,i=s.length;d<i;d++){var l=s[d],c=p(l,n);if(c)if(l.isClipMask()){var g=Se.create('clipPath');g.appendChild(c),r(l,g,'clip'),Se.set(o,{"clip-path":'url(#'+g.id+')'})}else o.appendChild(c)}return o}function n(t){var n=t._type,i=t._radius,a=e(t._matrix,!0,'rectangle'!==n);if('rectangle'===n){n='rect';var s=t._size,r=s.width,o=s.height;a.x-=r/2,a.y-=o/2,a.width=r,a.height=o,i.isZero()&&(i=null)}return i&&('circle'===n?a.r=i:(a.rx=i.width,a.ry=i.height)),Se.create(n,a,_)}function i(e){var t=s(e,'color');if(!t){var n=e.getGradient(),a=n._radial,o=e.getOrigin(),d=e.getDestination(),p;if(a){p={cx:o.x,cy:o.y,r:o.getDistance(d)};var c=e.getHighlight();c&&(p.fx=c.x,p.fy=c.y)}else p={x1:o.x,y1:o.y,x2:d.x,y2:d.y};p.gradientUnits='userSpaceOnUse',t=Se.create((a?'radial':'linear')+'Gradient',p,_);for(var g=n._stops,u=0,i=g.length;u<i;u++){var l=g[u],h=l._color,m=h.getAlpha(),f=l._offset;p={offset:null==f?u/(i-1):f},h&&(p['stop-color']=h.toCSS(!0)),1>m&&(p['stop-opacity']=m),t.appendChild(Se.create('stop',p,_))}r(e,t,'color')}return'url(#'+t.id+')'}function a(e,t,n){var a={},s=!n&&e.getParent(),r=[];return null!=e._name&&(a.id=e._name),A.each(we,function(t){var n=t.get,o=t.type,d=e[n]();if(t.exportFilter?t.exportFilter(e,d):!s||!A.equals(s[n](),d)){if('color'===o&&null!=d){var l=d.getAlpha();1>l&&(a[t.attribute+'-opacity']=l)}'style'===o?r.push(t.attribute+': '+d):a[t.attribute]=null==d?'none':'color'===o?d.gradient?i(d,e):d.toCSS(!0):'array'===o?d.join(','):'lookup'===o?t.toSVG[d]:d}}),r.length&&(a.style=r.join(';')),1===a.opacity&&delete a.opacity,e._visible||(a.visibility='hidden'),Se.set(t,a,_)}function s(e,t){return g||(g={ids:{},svgs:{}}),e&&g.svgs[t+'-'+(e._id||e.__id||(e.__id=L.get('svg')))]}function r(e,t,n){g||s();var i=g.ids[n]=(g.ids[n]||0)+1;t.id=n+'-'+i,g.svgs[n+'-'+(e._id||e.__id)]=t}function o(e,t){var n=e,a=null;if(g){for(var s in n='svg'===e.nodeName.toLowerCase()&&e,g.svgs)a||(!n&&(n=Se.create('svg'),n.appendChild(e)),a=n.insertBefore(Se.create('defs'),n.firstChild)),a.appendChild(g.svgs[s]);g=null}return t.asString?new d.XMLSerializer().serializeToString(n):n}function p(e,t,n){var i=l[e._class],s=i&&i(e,t);if(s){var r=t.onExport;r&&(s=r(e,s,t)||s);var o=JSON.stringify(e._data);o&&'{}'!==o&&'null'!==o&&s.setAttribute('data-paper-data',o)}return s&&a(e,s,n)}function c(e){return e||(e={}),_=new I(e.precision),e}var l={Group:t,Layer:t,Raster:function(t,n){var i=e(t._matrix,!0),a=t.getSize(),s=t.getImage();return i.x-=a.width/2,i.y-=a.height/2,i.width=a.width,i.height=a.height,i.href=!1==n.embedImages&&s&&s.src||t.toDataURL(),Se.create('image',i,_)},Path:function(t,a){var s=a.matchShapes;if(s){var r=t.toShape(!1);if(r)return n(r,a)}var o=t._segments,d=o.length,l=e(t._matrix),p;if(!(s&&2<=d&&!t.hasHandles()))p='path',l.d=t.getPathData(null,a.precision);else if(2<d){p=t._closed?'polygon':'polyline';for(var c=[],g=0;g<d;g++)c.push(_.point(o[g]._point));l.points=c.join(' ')}else{p='line';var i=o[0]._point,u=o[1]._point;l.set({x1:i.x,y1:i.y,x2:u.x,y2:u.y})}return Se.create(p,l,_)},Shape:n,CompoundPath:function(t,n){var i=e(t._matrix),a=t.getPathData(null,n.precision);return a&&(i.d=a),Se.create('path',i,_)},SymbolItem:function(t,n){var i=e(t._matrix,!0),a=t._definition,o=s(a,'symbol'),d=a._item,l=d.getBounds();return o||(o=Se.create('symbol',{viewBox:_.rectangle(l)}),o.appendChild(p(d,n)),r(a,o,'symbol')),i.href='#'+o.id,i.x+=l.x,i.y+=l.y,i.width=l.width,i.height=l.height,i.overflow='visible',Se.create('use',i,_)},PointText:function(t){var n=Se.create('text',e(t._matrix,!0),_);return n.textContent=t._content,n}},_,g;q.inject({exportSVG:function(e){return e=c(e),o(p(this,e,!0),e)}}),F.inject({exportSVG:function(t){t=c(t);var n=this._children,a=this.getView(),s=A.pick(t.bounds,'view'),r=t.matrix||'view'===s&&a._matrix,d=r&&M.read([r]),g='view'===s?new B([0,0],a.getViewSize()):'content'===s?q._getBounds(n,d,{stroke:!0}).rect:B.read([s],0,{readNull:!0}),u={version:'1.1',xmlns:Se.svg,"xmlns:xlink":Se.xlink};g&&(u.width=g.width,u.height=g.height,(g.x||g.y)&&(u.viewBox=_.rectangle(g)));var h=Se.create('svg',u,_),m=h;d&&!d.isIdentity()&&(m=h.appendChild(Se.create('g',e(d),_)));for(var f=0,i=n.length;f<i;f++)m.appendChild(p(n[f],t,!0));return o(h,t)}})},new function(){function e(e,t,n,i,a){var s=Se.get(e,t),r=null==s?i?null:n?'':0:n?s:parseFloat(s);return /%\s*$/.test(s)?r/100*(a?1:x[/x|^width/.test(t)?'width':'height']):r}function t(t,n,i,a,s){return n=e(t,n||'x',!1,a,s),i=e(t,i||'y',!1,a,s),a&&(null==n||null==i)?null:new O(n,i)}function n(t,n,i,a,s){return n=e(t,n||'width',!1,a,s),i=e(t,i||'height',!1,a,s),a&&(null==n||null==i)?null:new z(n,i)}function i(e,t,n){return'none'===e?null:'number'===t?parseFloat(e):'array'===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:'color'===t?g(e)||e:'lookup'===t?n[e]:e}function s(e,t,n,a){var s=e.childNodes,r='clippath'===t,o='defs'===t,d=new j,p=d._project,c=p._currentStyle,g=[];if(r||o||(d=_(d,e,a),p._currentStyle=d._style.clone()),a)for(var h=e.querySelectorAll('defs'),m=0,i=h.length;m<i;m++)u(h[m],n,!1);for(var m=0,i=s.length;m<i;m++){var l=s[m],f;1!==l.nodeType||/^defs$/i.test(l.nodeName)||!(f=u(l,n,!1))||f instanceof G||g.push(f)}return d.addChildren(g),r&&(d=_(d.reduce(),e,a)),p._currentStyle=c,(r||o)&&(d.remove(),d=null),d}function r(e,t){for(var n=e.getAttribute('points').match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),a=[],s=0,i=n.length;s<i;s+=2)a.push(new O(parseFloat(n[s]),parseFloat(n[s+1])));var r=new ee(a);return'polygon'===t&&r.closePath(),r}function o(n,a){var s=(e(n,'href',!0)||'').substring(1),r='radialgradient'===a,o;if(s)o=m[s].getGradient(),o._radial^r&&(o=o.clone(),o._radial=r);else{for(var d=n.childNodes,p=[],c=0,i=d.length,l;c<i;c++)l=d[c],1===l.nodeType&&p.push(_(new de,l));o=new oe(p,r)}var g='userSpaceOnUse'!==e(n,'gradientUnits',!0),u,h,f;r?(u=t(n,'cx','cy',!1,g),h=u.add(e(n,'r',!1,!1,g),0),f=t(n,'fx','fy',!0,g)):(u=t(n,'x1','y1',!1,g),h=t(n,'x2','y2',!1,g));var y=_(new re(o,u,h,f),n);return y._scaleToBounds=g,null}function l(e,t,n,a){if(e.transform){for(var s=(a.getAttribute(n)||'').split(/\)\s*/g),r=new M,o=0,i=s.length,d;o<i&&(d=s[o],!!d);o++){for(var l=d.split(/\(\s*/),p=l[0],c=l[1].split(/[\s,]+/g),_=0,g=c.length;_<g;_++)c[_]=parseFloat(c[_]);'matrix'===p?r.append(new M(c[0],c[1],c[2],c[3],c[4],c[5])):'rotate'===p?r.rotate(c[0],c[1],c[2]):'translate'===p?r.translate(c[0],c[1]):'scale'===p?r.scale(c):'skewX'===p?r.skew(c[0],0):'skewY'===p?r.skew(0,c[0]):void 0}e.transform(r)}}function p(e,t,n){var i='fill-opacity'===n?'getFillColor':'getStrokeColor',a=e[i]&&e[i]();a&&a.setAlpha(parseFloat(t))}function c(e,t,n){var i=e.attributes[t],a=i&&i.value;if(!a){var s=A.camelize(t);a=e.style[s],a||n.node[s]===n.parent[s]||(a=n.node[s])}return a?'none'===a?null:a:void 0}function _(e,t,n){if(t.style){var i=t.parentNode,a={node:pe.getStyles(t)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&pe.getStyles(i)||{}};A.each(y,function(n,i){var s=c(t,i,a);e=void 0!==s&&n(e,s,i,t,a)||e})}return e}function g(e){var t=e&&e.match(/\((?:["'#]*)([^"')]+)/),n=t&&t[1],i=n&&m[v?n.replace(v.location.href.split('#')[0]+'#',''):n];return i&&i._scaleToBounds&&(i=i.clone(),i._scaleToBounds=!0),i}function u(e,t,i){var s=e.nodeName.toLowerCase(),r='#document'!==s,o=w.body,d,l,p;i&&r&&(x=a.getView().getSize(),x=n(e,null,null,!0)||x,d=Se.create('svg',{style:'stroke-width: 1px; stroke-miterlimit: 10'}),l=e.parentNode,p=e.nextSibling,d.appendChild(e),o.appendChild(d));var c=a.settings,g=c.applyMatrix,u=c.insertItems;c.applyMatrix=!1,c.insertItems=!1;var h=f[s],y=h&&h(e,s,t,i)||null;if(c.insertItems=u,c.applyMatrix=g,y){r&&!(y instanceof j)&&(y=_(y,e,i));var b=t.onImport,v=r&&e.getAttribute('data-paper-data');b&&(y=b(e,y,t)||y),t.expandShapes&&y instanceof H&&(y.remove(),y=y.toPath()),v&&(y._data=JSON.parse(v))}return d&&(o.removeChild(d),l&&(p?l.insertBefore(e,p):l.appendChild(e))),i&&(m={},y&&A.pick(t.applyMatrix,g)&&y.matrix.apply(!0,!0)),y}function h(e,t,n){function i(i){try{var l='object'==typeof i?i:new d.DOMParser().parseFromString(i,'image/svg+xml');if(!l.nodeName)throw l=null,new Error('Unsupported SVG source: '+e);a=r,o=u(l,t,!0),t&&!1===t.insert||n._insertItem(void 0,o);var p=t.onLoad;p&&p(o,i)}catch(t){s(t)}}function s(e,n){var i=t.onError;if(i)i(e,n);else throw new Error(e)}if(!e)return null;t='function'==typeof t?{onLoad:t}:t||{};var r=a,o=null;if('string'==typeof e&&!/^.*</.test(e)){var l=w.getElementById(e);l?i(l):be.request({url:e,async:!0,onLoad:i,onError:s})}else{if('undefined'!=typeof File&&e instanceof File){var p=new FileReader;return p.onload=function(){i(p.result)},p.onerror=function(){s(p.error)},p.readAsText(e)}i(e)}return o}var m={},f={"#document":function(e,t,n,a){for(var s=e.childNodes,r=0,i=s.length,o;r<i;r++)if(o=s[r],1===o.nodeType)return u(o,n,a)},g:s,svg:s,clippath:s,polygon:r,polyline:r,path:function(e){return $.create(e.getAttribute('d'))},lineargradient:o,radialgradient:o,image:function(i){var a=new W(e(i,'href',!0));return a.on('load',function(){var e=n(i);this.setSize(e);var a=this._matrix._transformPoint(t(i).add(e.divide(2)));this.translate(a)}),a},symbol:function(e,t,n,i){return new G(s(e,t,n,i),!0)},defs:s,use:function(n){var i=(e(n,'href',!0)||'').substring(1),a=m[i],s=t(n);return a?a instanceof G?a.place(s):a.clone().translate(s):null},circle:function(n){return new H.Circle(t(n,'cx','cy'),e(n,'r'))},ellipse:function(e){return new H.Ellipse({center:t(e,'cx','cy'),radius:n(e,'rx','ry')})},rect:function(e){return new H.Rectangle(new B(t(e),n(e)),n(e,'rx','ry'))},line:function(e){return new ee.Line(t(e,'x1','y1'),t(e,'x2','y2'))},text:function(e){var n=new se(t(e).add(t(e,'dx','dy')));return n.setContent(e.textContent.trim()||''),n}},y=A.set(A.each(we,function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](i(n,e.type,e.fromSVG)),'color'===e.type)){var a=t[e.get]();if(a&&a._scaleToBounds){var s=t.getBounds();a.transform(new M().translate(s.getPoint()).scale(s.getSize()))}}}},{}),{id:function(e,t){m[t]=e,e.setName&&e.setName(t)},"clip-path":function(e,t){var n=g(t);if(n)if(n=n.clone(),n.setClipMask(!0),e instanceof j)e.insertChild(0,n);else return new j(n,e)},gradientTransform:l,transform:l,"fill-opacity":p,"stroke-opacity":p,visibility:function(e,t){e.setVisible&&e.setVisible('visible'===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,a,s,r){var o=new B(i(t,'array')),d=n(s,null,null,!0),l,p;if(e instanceof j){var _=d?d.divide(o.getSize()):1,p=new M().scale(_).translate(o.getPoint().negate());l=e}else e instanceof G&&(d&&o.setSize(d),l=e._item);if(l){if('visible'!==c(s,'overflow',r)){var g=new H.Rectangle(o);g.setClipMask(!0),l.addChild(g)}p&&l.transform(p)}}}),x;q.inject({importSVG:function(e,t){return h(e,t,this)}}),F.inject({importSVG:function(e,t){return this.activate(),h(e,t,this)}})},A.exports.PaperScript=function(){function e(e,t){return(u.acorn||h).parse(e,t)}function t(e,t,n){var i=y[t];if(e&&e[i]){var a=e[i](n);return'!='===t?!a:a}return'+'===t?e+n:'-'===t?e-n:'*'===t?e*n:'/'===t?e/n:'%'===t?e%n:'=='===t?e==n:'!='===t?e!=n:void 0}function l(e,t){var n=x[e];return t&&t[n]?t[n]():'+'===e?+t:'-'===e?-t:void 0}function p(t,n){function s(e){for(var t=0,n=c.length,i;t<n&&(i=c[t],!(i[0]>=e));t++)e+=i[1];return e}function i(e){return t.substring(s(e.range[0]),s(e.range[1]))}function r(e,n){return t.substring(s(e.range[1]),s(n.range[0]))}function o(e,n){for(var a=s(e.range[0]),r=s(e.range[1]),o=0,d=c.length-1;0<=d;d--)if(a>c[d][0]){o=d+1;break}c.splice(o,0,[a,n.length-r+a]),t=t.substring(0,a)+n+t.substring(r)}function p(e,t){if(e){for(var n in e)if('range'!=n&&'loc'!=n){var a=e[n];if(Array.isArray(a))for(var s=0,d=a.length;s<d;s++)p(a[s],e);else a&&'object'==typeof a&&p(a,e)}switch(e.type){case'UnaryExpression':if(e.operator in x&&'Literal'!==e.argument.type){var l=i(e.argument);o(e,'$__("'+e.operator+'", '+l+')')}break;case'BinaryExpression':if(e.operator in y&&'Literal'!==e.left.type){var c=i(e.left),_=i(e.right),g=r(e.left,e.right),u=e.operator;o(e,'__$__('+c+','+g.replace(new RegExp('\\'+u),'"'+u+'"')+', '+_+')')}break;case'UpdateExpression':case'AssignmentExpression':var h=t&&t.type;if(!('ForStatement'===h||'BinaryExpression'===h&&/^[=!<>]/.test(t.operator)||'MemberExpression'===h&&t.computed))if('UpdateExpression'===e.type){var l=i(e.argument),m='__$__('+l+', "'+e.operator[0]+'", 1)',f=l+' = '+m;e.prefix||'AssignmentExpression'!==h&&'VariableDeclarator'!==h||(i(t.left||t.id)===l&&(f=m),f=l+'; '+f),o(e,f)}else if(/^.=$/.test(e.operator)&&'Literal'!==e.left.type){var c=i(e.left),_=i(e.right),m=c+' = __$__('+c+', "'+e.operator[0]+'", '+_+')';o(e,/^\(.*\)$/.test(i(e))?'('+m+')':m)}}}}function l(e){var t='';for(e=(S(e)<<1)+(0>e?1:0);e||!t;){var n=31&e;e>>=5,e&&(n|=32),t+='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'[n]}return t}if(!t)return'';n=n||{};var c=[],_=n.url||'',g=a.agent,u=g.versionNumber,h=!1,m=n.sourceMaps,f=n.source||t,b=/\r\n|\n|\r/mg,C=n.offset||0,k;if(m&&(g.chrome&&30<=u||g.webkit&&537.76<=u||g.firefox&&23<=u||g.node)){if(g.node)C-=2;else if(v&&_&&!v.location.href.indexOf(_)){var A=w.getElementsByTagName('html')[0].innerHTML;C=A.substr(0,A.indexOf(t)+1).match(b).length+1}h=0<C&&!(g.chrome&&36<=u||g.safari&&600<=u||g.firefox&&40<=u||g.node);var P=['AA'+l(h?0:C)+'A'];P.length=(t.match(b)||[]).length+1+(h?C:0),k={version:3,file:_,names:[],mappings:P.join(';AACA'),sourceRoot:'',sources:[_],sourcesContent:[f]}}return p(e(t,{ranges:!0,preserveParens:!0})),k&&(h&&(t=Array(C+1).join('\n')+t),/^(inline|both)$/.test(m)&&(t+='\n//# sourceMappingURL=data:application/json;base64,'+d.btoa(unescape(encodeURIComponent(JSON.stringify(k))))),t+='\n//# sourceURL='+(_||'paperscript')),{url:_,source:f,code:t,map:k}}function c(e,n,i){function s(t,n){for(var i in t)(n||!/^_/.test(i))&&new RegExp('([\\b\\s\\W]|^)'+i.replace(/\$/g,'\\$')+'\\b').test(e)&&(_.push(i),g.push(t[i]))}a=n;var r=n.getView(),o=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new xe:null,d=o?o._events:[],c=['onFrame','onResize'].concat(d),_=[],g=[],u='object'==typeof e?e:p(e,i),h;e=u.code,s({__$__:t,$__:l,paper:n,view:r,tool:o},!0),s(n),c=A.each(c,function(t){new RegExp('\\s+'+t+'\\b').test(e)&&(_.push(t),this.push(t+': '+t))},[]).join(', '),c&&(e+='\nreturn { '+c+' };');var m=a.agent;if(w&&(m.chrome||m.firefox&&40>m.versionNumber)){var f=w.createElement('script'),y=w.head||w.getElementsByTagName('head')[0];m.firefox&&(e='\n'+e),f.appendChild(w.createTextNode('paper._execute = function('+_+') {'+e+'\n}')),y.appendChild(f),h=a._execute,delete a._execute,y.removeChild(f)}else h=Function(_,e);var x=h.apply(n,g)||{};return A.each(d,function(e){var t=x[e];t&&(o[e]=t)}),r&&(x.onResize&&r.setOnResize(x.onResize),r.emit('resize',{size:r.size,delta:new O}),x.onFrame&&r.setOnFrame(x.onFrame),r.requestUpdate()),u}function _(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&'true'!==P.getAttribute(e,'ignore')){var t=P.getAttribute(e,'canvas'),n=w.getElementById(t),i=e.src||e.getAttribute('data-src'),a=P.hasAttribute(e,'async'),s='data-paper-scope';if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var r=P.get(n.getAttribute(s))||new P().setup(n);return n.setAttribute(s,r._id),i?be.request({url:i,async:a,mimeType:'text/plain',onLoad:function(e){c(e,r,i)}}):c(e.innerHTML,r,e.baseURI),e.setAttribute('data-paper-ignore','true'),r}}function g(){A.each(w&&w.getElementsByTagName('script'),_)}var u=this,h=u.acorn;if(!h&&!0)try{h=n('Wqy/')}catch(t){}if(!h){var m,f;h=m=f={},function(e,t){return'object'==typeof m&&'object'==typeof f?t(m):(r=[m],s=t,o='function'==typeof s?s.apply(m,r):s,!(void 0!==o&&(f.exports=o)))}(this,function(e){'use strict';function n(e){for(var t in _e=e||{},me)Object.prototype.hasOwnProperty.call(_e,t)||(_e[t]=me[t]);he=_e.sourceFile||null}function t(e,t){var n=fe(ge,e);t+=' ('+n.line+':'+n.column+')';var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=Ct,i}function a(e){function t(e){if(1==e.length)return n+='return str === '+JSON.stringify(e[0])+';';n+='switch(str){';for(var t=0;t<e.length;++t)n+='case '+JSON.stringify(e[t])+':';n+='return true}return false;'}e=e.split(' ');var n='',a=[];out:for(var s=0;s<e.length;++s){for(var i=0;i<a.length;++i)if(a[i][0].length==e[s].length){a[i].push(e[s]);continue out}a.push([e[s]])}if(3<a.length){a.sort(function(e,t){return t.length-e.length}),n+='switch(str.length){';for(var s=0,r;s<a.length;++s)r=a[s],n+='case '+r[0].length+':',t(r);n+='}'}else t(e);return new Function('str',n)}function s(){this.line=Et,this.column=Ct-Lt}function r(){Et=1,Ct=Lt=0,It=!0,p()}function o(e,t){wt=Ct,_e.locations&&(At=new s),Pt=e,p(),Tt=t,It=e.beforeExpr}function d(){var e=_e.onComment&&_e.locations&&new s,n=Ct,i=ge.indexOf('*/',Ct+=2);if(-1===i&&t(Ct-2,'Unterminated comment'),Ct=i+2,_e.locations){Xt.lastIndex=n;for(var a;(a=Xt.exec(ge))&&a.index<Ct;)++Et,Lt=a.index+a[0].length}_e.onComment&&_e.onComment(!0,ge.slice(n+2,i),n,Ct,e,_e.locations&&new s)}function l(){for(var e=Ct,t=_e.onComment&&_e.locations&&new s,n=ge.charCodeAt(Ct+=2);Ct<ue&&10!==n&&13!==n&&8232!==n&&8233!==n;)++Ct,n=ge.charCodeAt(Ct);_e.onComment&&_e.onComment(!1,ge.slice(e+2,Ct),e,Ct,t,_e.locations&&new s)}function p(){for(;Ct<ue;){var e=ge.charCodeAt(Ct);if(32===e)++Ct;else if(13===e){++Ct;var t=ge.charCodeAt(Ct);10===t&&++Ct,_e.locations&&(++Et,Lt=Ct)}else if(10===e||8232===e||8233===e)++Ct,_e.locations&&(++Et,Lt=Ct);else if(8<e&&14>e)++Ct;else if(47===e){var t=ge.charCodeAt(Ct+1);if(42===t)d();else if(47===t)l();else break}else if(160===e)++Ct;else if(5760<=e&&Ht.test(i(e)))++Ct;else break}}function c(){var e=ge.charCodeAt(Ct+1);return 48<=e&&57>=e?k(!0):(++Ct,o(st))}function _(){var e=ge.charCodeAt(Ct+1);return It?(++Ct,C()):61===e?v(lt,2):v(ot,1)}function g(){var e=ge.charCodeAt(Ct+1);return 61===e?v(lt,2):v(vt,1)}function u(e){var t=ge.charCodeAt(Ct+1);return t===e?v(124===e?_t:gt,2):61===t?v(lt,2):v(124===e?ut:mt,1)}function h(){var e=ge.charCodeAt(Ct+1);return 61===e?v(lt,2):v(ht,1)}function m(e){var t=ge.charCodeAt(Ct+1);return t===e?45==t&&62==ge.charCodeAt(Ct+2)&&Gt.test(ge.slice(Ot,Ct))?(Ct+=3,l(),p(),b()):v(pt,2):61===t?v(lt,2):v(bt,1)}function f(e){var t=ge.charCodeAt(Ct+1),n=1;return t===e?(n=62===e&&62===ge.charCodeAt(Ct+2)?3:2,61===ge.charCodeAt(Ct+n)?v(lt,n+1):v(xt,n)):33==t&&60==e&&45==ge.charCodeAt(Ct+2)&&45==ge.charCodeAt(Ct+3)?(Ct+=4,l(),p(),b()):(61===t&&(n=61===ge.charCodeAt(Ct+2)?3:2),v(yt,n))}function y(e){var t=ge.charCodeAt(Ct+1);return 61===t?v(ft,61===ge.charCodeAt(Ct+2)?3:2):v(61===e?dt:ct,1)}function x(e){switch(e){case 46:return c();case 40:return++Ct,o(et);case 41:return++Ct,o(tt);case 59:return++Ct,o(it);case 44:return++Ct,o(nt);case 91:return++Ct,o(Je);case 93:return++Ct,o(Ke);case 123:return++Ct,o(Qe);case 125:return++Ct,o($e);case 58:return++Ct,o(at);case 63:return++Ct,o(rt);case 48:var t=ge.charCodeAt(Ct+1);if(120===t||88===t)return w();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return k(!1);case 34:case 39:return A(e);case 47:return _(e);case 37:case 42:return g();case 124:case 38:return u(e);case 94:return h();case 43:case 45:return m(e);case 60:case 62:return f(e);case 61:case 33:return y(e);case 126:return v(ct,1);}return!1}function b(e){if(e?Ct=St+1:St=Ct,_e.locations&&(kt=new s),e)return C();if(Ct>=ue)return o(Se);var n=ge.charCodeAt(Ct);if(Yt(n)||92===n)return I();var a=x(n);if(!1===a){var r=i(n);if('\\'===r||Wt.test(r))return I();t(Ct,'Unexpected character \''+r+'\'')}return a}function v(e,t){var n=ge.slice(Ct,Ct+t);Ct+=t,o(e,n)}function C(){for(var e='',n=Ct,i,a;;){Ct>=ue&&t(n,'Unterminated regular expression');var s=ge.charAt(Ct);if(Gt.test(s)&&t(n,'Unterminated regular expression'),!i){if('['===s)a=!0;else if(']'===s&&a)a=!1;else if('/'===s&&!a)break;i='\\'===s}else i=!1;++Ct}var e=ge.slice(n,Ct);++Ct;var r=T();r&&!/^[gmsiy]*$/.test(r)&&t(n,'Invalid regexp flag');try{var d=new RegExp(e,r)}catch(i){i instanceof SyntaxError&&t(n,i.message),t(i)}return o(be,d)}function S(t,n){for(var a=Ct,s=0,r=0,i=null==n?Infinity:n;r<i;++r){var e=ge.charCodeAt(Ct),o;if(o=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity,o>=t)break;++Ct,s=s*t+o}return Ct===a||null!=n&&Ct-a!==n?null:s}function w(){Ct+=2;var e=S(16);return null==e&&t(St+2,'Expected hexadecimal number'),Yt(ge.charCodeAt(Ct))&&t(Ct,'Identifier directly after number'),o(xe,e)}function k(e){var n=Ct,i=!1,a=48===ge.charCodeAt(Ct);e||null!==S(10)||t(n,'Invalid number'),46===ge.charCodeAt(Ct)&&(++Ct,S(10),i=!0);var s=ge.charCodeAt(Ct);(69===s||101===s)&&(s=ge.charCodeAt(++Ct),(43===s||45===s)&&++Ct,null===S(10)&&t(n,'Invalid number'),i=!0),Yt(ge.charCodeAt(Ct))&&t(Ct,'Identifier directly after number');var r=ge.slice(n,Ct),d;return i?d=parseFloat(r):a&&1!==r.length?/[89]/.test(r)||Vt?t(n,'Invalid number'):d=parseInt(r,8):d=parseInt(r,10),o(xe,d)}function A(e){Ct++;for(var n='';;){Ct>=ue&&t(St,'Unterminated string constant');var a=ge.charCodeAt(Ct);if(a===e)return++Ct,o(ve,n);if(92===a){a=ge.charCodeAt(++Ct);var s=/^[0-7]+/.exec(ge.slice(Ct,Ct+3));for(s&&(s=s[0]);s&&255<parseInt(s,8);)s=s.slice(0,-1);if('0'===s&&(s=null),++Ct,s)Vt&&t(Ct-2,'Octal literal in strict mode'),n+=i(parseInt(s,8)),Ct+=s.length-1;else switch(a){case 110:n+='\n';break;case 114:n+='\r';break;case 120:n+=i(P(2));break;case 117:n+=i(P(4));break;case 85:n+=i(P(8));break;case 116:n+='\t';break;case 98:n+='\b';break;case 118:n+='\x0B';break;case 102:n+='\f';break;case 48:n+='\0';break;case 13:10===ge.charCodeAt(Ct)&&++Ct;case 10:_e.locations&&(Lt=Ct,++Et);break;default:n+=i(a);}}else(13==a||10==a||8232==a||8233==a)&&t(St,'Unterminated string constant'),n+=i(a),++Ct}}function P(e){var i=S(16,e);return null===i&&t(St,'Bad character escape sequence'),i}function T(){$t=!1;for(var e=!0,n=Ct,a,s;;){if(s=ge.charCodeAt(Ct),Jt(s))$t&&(a+=ge.charAt(Ct)),++Ct;else if(92===s){$t||(a=ge.slice(n,Ct)),$t=!0,117!=ge.charCodeAt(++Ct)&&t(Ct,'Expecting Unicode escape sequence \\uXXXX'),++Ct;var r=P(4),o=i(r);o||t(Ct-1,'Invalid Unicode escape'),(e?Yt(r):Jt(r))||t(Ct-4,'Invalid Unicode escape'),a+=o}else break;e=!1}return $t?a:ge.slice(n,Ct)}function I(){var e=T(),t=Ce;return!$t&&Ut(e)&&(t=Ye[e]),o(t,e)}function E(){Nt=St,Ot=wt,zt=At,b()}function L(e){if(Vt=e,Ct=St,_e.locations)for(;Ct<Lt;)Lt=ge.lastIndexOf('\n',Lt-2)+1,--Et;p(),b()}function N(){this.type=null,this.start=St,this.end=null}function O(){this.start=kt,this.end=null,null!==he&&(this.source=he)}function z(){var e=new N;return _e.locations&&(e.loc=new O),_e.directSourceFile&&(e.sourceFile=_e.directSourceFile),_e.ranges&&(e.range=[St,0]),e}function R(e){var t=new N;return t.start=e.start,_e.locations&&(t.loc=new O,t.loc.start=e.loc.start),_e.ranges&&(t.range=[e.range[0],0]),t}function B(e,t){return e.type=t,e.end=Ot,_e.locations&&(e.loc.end=zt),_e.ranges&&(e.range[1]=Ot),e}function V(e){return 5<=_e.ecmaVersion&&'ExpressionStatement'===e.type&&'Literal'===e.expression.type&&'use strict'===e.expression.value}function M(e){if(Pt===e)return E(),!0}function D(){return!_e.strictSemicolons&&(Pt===Se||Pt===$e||Gt.test(ge.slice(Ot,St)))}function F(){M(it)||D()||q()}function j(e){Pt===e?E():q()}function q(){t(St,'Unexpected token')}function U(e){'Identifier'!==e.type&&'MemberExpression'!==e.type&&t(e.start,'Assigning to rvalue'),Vt&&'Identifier'===e.type&&qt(e.name)&&t(e.start,'Assigning to '+e.name+' in strict mode')}function H(e){Nt=Ot=Ct,_e.locations&&(zt=new s),Rt=Vt=null,Bt=[],b();var t=e||z(),n=!0;for(e||(t.body=[]);Pt!==Se;){var i=W();t.body.push(i),n&&V(i)&&L(!0),n=!1}return B(t,'Program')}function W(){(Pt===ot||Pt===lt&&'/='==Tt)&&b(!0);var e=Pt,n=z();switch(e){case we:case Pe:E();var a=e===we;M(it)||D()?n.label=null:Pt===Ce?(n.label=ce(),F()):q();for(var s=0,i;s<Bt.length;++s)if(i=Bt[s],null==n.label||i.name===n.label.name){if(null!=i.kind&&(a||'loop'===i.kind))break;if(n.label&&a)break}return s===Bt.length&&t(n.start,'Unsyntactic '+e.keyword),B(n,a?'BreakStatement':'ContinueStatement');case Te:return E(),F(),B(n,'DebuggerStatement');case Ee:return E(),Bt.push(Kt),n.body=W(),Bt.pop(),j(je),n.test=Z(),F(),B(n,'DoWhileStatement');case Oe:if(E(),Bt.push(Kt),j(et),Pt===it)return X(n,null);if(Pt===Fe){var r=z();return E(),J(r,!0),B(r,'VariableDeclaration'),1===r.declarations.length&&M(Xe)?Y(n,r):X(n,r)}var r=K(!1,!0);return M(Xe)?(U(r),Y(n,r)):X(n,r);case ze:return E(),le(n,!0);case Re:return E(),n.test=Z(),n.consequent=W(),n.alternate=M(Le)?W():null,B(n,'IfStatement');case Be:return Rt||_e.allowReturnOutsideFunction||t(St,'\'return\' outside of function'),E(),M(it)||D()?n.argument=null:(n.argument=K(),F()),B(n,'ReturnStatement');case Ve:E(),n.discriminant=Z(),n.cases=[],j(Qe),Bt.push(Qt);for(var o,d;Pt!=$e;)if(Pt===ke||Pt===Ie){var l=Pt===ke;o&&B(o,'SwitchCase'),n.cases.push(o=z()),o.consequent=[],E(),l?o.test=K():(d&&t(Nt,'Multiple default clauses'),d=!0,o.test=null),j(at)}else o||q(),o.consequent.push(W());return o&&B(o,'SwitchCase'),E(),Bt.pop(),B(n,'SwitchStatement');case Me:return E(),Gt.test(ge.slice(Ot,St))&&t(Ot,'Illegal newline after throw'),n.argument=K(),F(),B(n,'ThrowStatement');case De:if(E(),n.block=G(),n.handler=null,Pt===Ae){var p=z();E(),j(et),p.param=ce(),Vt&&qt(p.param.name)&&t(p.param.start,'Binding '+p.param.name+' in strict mode'),j(tt),p.guard=null,p.body=G(),n.handler=B(p,'CatchClause')}return n.guardedHandlers=ye,n.finalizer=M(Ne)?G():null,n.handler||n.finalizer||t(n.start,'Missing catch or finally clause'),B(n,'TryStatement');case Fe:return E(),J(n),F(),B(n,'VariableDeclaration');case je:return E(),n.test=Z(),Bt.push(Kt),n.body=W(),Bt.pop(),B(n,'WhileStatement');case qe:return Vt&&t(St,'\'with\' in strict mode'),E(),n.object=Z(),n.body=W(),B(n,'WithStatement');case Qe:return G();case it:return E(),B(n,'EmptyStatement');default:var c=Tt,_=K();if(e===Ce&&'Identifier'===_.type&&M(at)){for(var s=0;s<Bt.length;++s)Bt[s].name===c&&t(_.start,'Label \''+c+'\' is already declared');var g=Pt.isLoop?'loop':Pt===Ve?'switch':null;return Bt.push({name:c,kind:g}),n.body=W(),Bt.pop(),n.label=_,B(n,'LabeledStatement')}return n.expression=_,F(),B(n,'ExpressionStatement');}}function Z(){j(et);var e=K();return j(tt),e}function G(e){var t=z(),n=!0,i=!1,a;for(t.body=[],j(Qe);!M($e);){var s=W();t.body.push(s),n&&e&&V(s)&&(a=i,L(i=!0)),n=!1}return i&&!a&&L(!1),B(t,'BlockStatement')}function X(e,t){return e.init=t,j(it),e.test=Pt===it?null:K(),j(it),e.update=Pt===tt?null:K(),j(tt),e.body=W(),Bt.pop(),B(e,'ForStatement')}function Y(e,t){return e.left=t,e.right=K(),j(tt),e.body=W(),Bt.pop(),B(e,'ForInStatement')}function J(e,n){for(e.declarations=[],e.kind='var';;){var i=z();if(i.id=ce(),Vt&&qt(i.id.name)&&t(i.id.start,'Binding '+i.id.name+' in strict mode'),i.init=M(dt)?K(!0,n):null,e.declarations.push(B(i,'VariableDeclarator')),!M(nt))break}return e}function K(e,t){var n=Q(t);if(!e&&Pt===nt){var i=R(n);for(i.expressions=[n];M(nt);)i.expressions.push(Q(t));return B(i,'SequenceExpression')}return n}function Q(e){var t=$(e);if(Pt.isAssign){var n=R(t);return n.operator=Tt,n.left=t,E(),n.right=Q(e),U(t),B(n,'AssignmentExpression')}return t}function $(e){var t=ee(e);if(M(rt)){var n=R(t);return n.test=t,n.consequent=K(!0),j(at),n.alternate=K(!0,e),B(n,'ConditionalExpression')}return t}function ee(e){return te(ne(),-1,e)}function te(e,t,n){var i=Pt.binop;if(null!=i&&(!n||Pt!==Xe)&&i>t){var a=R(e);a.left=e,a.operator=Tt;var s=Pt;E(),a.right=te(ne(),i,n);var r=B(a,s===_t||s===gt?'LogicalExpression':'BinaryExpression');return te(r,t,n)}return e}function ne(){if(Pt.prefix){var e=z(),n=Pt.isUpdate;return e.operator=Tt,e.prefix=!0,It=!0,E(),e.argument=ne(),n?U(e.argument):Vt&&'delete'===e.operator&&'Identifier'===e.argument.type&&t(e.start,'Deleting local variable in strict mode'),B(e,n?'UpdateExpression':'UnaryExpression')}for(var i=ie(),e;Pt.postfix&&!D();)e=R(i),e.operator=Tt,e.prefix=!1,e.argument=i,U(i),E(),i=B(e,'UpdateExpression');return i}function ie(){return ae(se())}function ae(e,t){if(M(st)){var n=R(e);return n.object=e,n.property=ce(!0),n.computed=!1,ae(B(n,'MemberExpression'),t)}if(M(Je)){var n=R(e);return n.object=e,n.property=K(),n.computed=!0,j(Ke),ae(B(n,'MemberExpression'),t)}if(!t&&M(et)){var n=R(e);return n.callee=e,n.arguments=pe(tt,!1),ae(B(n,'CallExpression'),t)}return e}function se(){switch(Pt){case He:var e=z();return E(),B(e,'ThisExpression');case Ce:return ce();case xe:case ve:case be:var e=z();return e.value=Tt,e.raw=ge.slice(St,wt),E(),B(e,'Literal');case We:case Ze:case Ge:var e=z();return e.value=Pt.atomValue,e.raw=Pt.keyword,E(),B(e,'Literal');case et:var t=kt,n=St;E();var i=K();return i.start=n,i.end=wt,_e.locations&&(i.loc.start=t,i.loc.end=At),_e.ranges&&(i.range=[n,wt]),j(tt),i;case Je:var e=z();return E(),e.elements=pe(Ke,!0,!0),B(e,'ArrayExpression');case Qe:return oe();case ze:var e=z();return E(),le(e,!1);case Ue:return re();default:q();}}function re(){var e=z();return E(),e.callee=ae(se(),!0),e.arguments=M(et)?pe(tt,!1):ye,B(e,'NewExpression')}function oe(){var e=z(),n=!0,a=!1;for(e.properties=[],E();!M($e);){if(!!n)n=!1;else if(j(nt),_e.allowTrailingCommas&&M($e))break;var s={key:de()},r=!1,o;if(M(at)?(s.value=K(!0),o=s.kind='init'):5<=_e.ecmaVersion&&'Identifier'===s.key.type&&('get'===s.key.name||'set'===s.key.name)?(r=a=!0,o=s.kind=s.key.name,s.key=de(),Pt!==et&&q(),s.value=le(z(),!1)):q(),'Identifier'===s.key.type&&(Vt||a))for(var d=0,i;d<e.properties.length;++d)if(i=e.properties[d],i.key.name===s.key.name){var l=o==i.kind||r&&'init'===i.kind||'init'===o&&('get'===i.kind||'set'===i.kind);l&&!Vt&&'init'===o&&'init'===i.kind&&(l=!1),l&&t(s.key.start,'Redefinition of property')}e.properties.push(s)}return B(e,'ObjectExpression')}function de(){return Pt===xe||Pt===ve?se():ce(!0)}function le(e,n){Pt===Ce?e.id=ce():n?q():e.id=null,e.params=[];var a=!0;for(j(et);!M(tt);)a?a=!1:j(nt),e.params.push(ce());var s=Rt,r=Bt;if(Rt=!0,Bt=[],e.body=G(!0),Rt=s,Bt=r,Vt||e.body.body.length&&V(e.body.body[0]))for(var o=e.id?-1:0,i;o<e.params.length;++o)if(i=0>o?e.id:e.params[o],(jt(i.name)||qt(i.name))&&t(i.start,'Defining \''+i.name+'\' in strict mode'),0<=o)for(var d=0;d<o;++d)i.name===e.params[d].name&&t(i.start,'Argument name clash in strict mode');return B(e,n?'FunctionDeclaration':'FunctionExpression')}function pe(e,t,n){for(var i=[],a=!0;!M(e);){if(!!a)a=!1;else if(j(nt),t&&_e.allowTrailingCommas&&M(e))break;n&&Pt===nt?i.push(null):i.push(K(!0))}return i}function ce(e){var n=z();return e&&'everywhere'==_e.forbidReserved&&(e=!1),Pt===Ce?(!e&&(_e.forbidReserved&&(3===_e.ecmaVersion?Dt:Ft)(Tt)||Vt&&jt(Tt))&&-1==ge.slice(St,wt).indexOf('\\')&&t(St,'The keyword \''+Tt+'\' is reserved'),n.name=Tt):e&&Pt.keyword?n.name=Pt.keyword:q(),It=!1,E(),B(n,'Identifier')}e.version='0.5.0';var _e,ge,ue,he;e.parse=function(e,t){return ge=e+'',ue=ge.length,n(t),r(),H(_e.program)};var me=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},fe=e.getLineInfo=function(e,t){for(var n=1,i=0;;){Xt.lastIndex=i;var a=Xt.exec(e);if(a&&a.index<t)++n,i=a.index+a[0].length;else break}return{line:n,column:t-i}};e.tokenize=function(e,i){function a(e){return Ot=wt,b(e),s.start=St,s.end=wt,s.startLoc=kt,s.endLoc=At,s.type=Pt,s.value=Tt,s}ge=e+'',ue=ge.length,n(i),r();var s={};return a.jumpTo=function(e,t){if(Ct=e,_e.locations){Et=1,Lt=Xt.lastIndex=0;for(var n;(n=Xt.exec(ge))&&n.index<e;)++Et,Lt=n.index+n[0].length}It=t,p()},a};var ye=[],xe={type:'num'},be={type:'regexp'},ve={type:'string'},Ce={type:'name'},Se={type:'eof'},we={keyword:'break'},ke={keyword:'case',beforeExpr:!0},Ae={keyword:'catch'},Pe={keyword:'continue'},Te={keyword:'debugger'},Ie={keyword:'default'},Ee={keyword:'do',isLoop:!0},Le={keyword:'else',beforeExpr:!0},Ne={keyword:'finally'},Oe={keyword:'for',isLoop:!0},ze={keyword:'function'},Re={keyword:'if'},Be={keyword:'return',beforeExpr:!0},Ve={keyword:'switch'},Me={keyword:'throw',beforeExpr:!0},De={keyword:'try'},Fe={keyword:'var'},je={keyword:'while',isLoop:!0},qe={keyword:'with'},Ue={keyword:'new',beforeExpr:!0},He={keyword:'this'},We={keyword:'null',atomValue:null},Ze={keyword:'true',atomValue:!0},Ge={keyword:'false',atomValue:!1},Xe={keyword:'in',binop:7,beforeExpr:!0},Ye={break:we,case:ke,catch:Ae,continue:Pe,debugger:Te,default:Ie,do:Ee,else:Le,finally:Ne,for:Oe,function:ze,if:Re,return:Be,switch:Ve,throw:Me,try:De,var:Fe,while:je,with:qe,null:We,true:Ze,false:Ge,new:Ue,in:Xe,instanceof:{keyword:'instanceof',binop:7,beforeExpr:!0},this:He,typeof:{keyword:'typeof',prefix:!0,beforeExpr:!0},void:{keyword:'void',prefix:!0,beforeExpr:!0},delete:{keyword:'delete',prefix:!0,beforeExpr:!0}},Je={type:'[',beforeExpr:!0},Ke={type:']'},Qe={type:'{',beforeExpr:!0},$e={type:'}'},et={type:'(',beforeExpr:!0},tt={type:')'},nt={type:',',beforeExpr:!0},it={type:';',beforeExpr:!0},at={type:':',beforeExpr:!0},st={type:'.'},rt={type:'?',beforeExpr:!0},ot={binop:10,beforeExpr:!0},dt={isAssign:!0,beforeExpr:!0},lt={isAssign:!0,beforeExpr:!0},pt={postfix:!0,prefix:!0,isUpdate:!0},ct={prefix:!0,beforeExpr:!0},_t={binop:1,beforeExpr:!0},gt={binop:2,beforeExpr:!0},ut={binop:3,beforeExpr:!0},ht={binop:4,beforeExpr:!0},mt={binop:5,beforeExpr:!0},ft={binop:6,beforeExpr:!0},yt={binop:7,beforeExpr:!0},xt={binop:8,beforeExpr:!0},bt={binop:9,prefix:!0,beforeExpr:!0},vt={binop:10,beforeExpr:!0},Ct,St,wt,kt,At,Pt,Tt,It,Et,Lt,Nt,Ot,zt,Rt,Bt,Vt;for(var Mt in e.tokTypes={bracketL:Je,bracketR:Ke,braceL:Qe,braceR:$e,parenL:et,parenR:tt,comma:nt,semi:it,colon:at,dot:st,question:rt,slash:ot,eq:dt,name:Ce,eof:Se,num:xe,regexp:be,string:ve},Ye)e.tokTypes['_'+Mt]=Ye[Mt];var Dt=a('abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile'),Ft=a('class enum extends super const export import'),jt=a('implements interface let package private protected public static yield'),qt=a('eval arguments'),Ut=a('break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this'),Ht=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Wt=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,Zt=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]/,Gt=/[\n\r\u2028\u2029]/,Xt=/\r\n|[\n\r\u2028\u2029]/g,Yt=e.isIdentifierStart=function(e){return 65>e?36==e:!!(91>e)||(97>e?95==e:!!(123>e)||170<=e&&Wt.test(i(e)))},Jt=e.isIdentifierChar=function(e){return 48>e?36==e:!!(58>e)||!(65>e)&&(!!(91>e)||(97>e?95==e:!!(123>e)||170<=e&&Zt.test(i(e))))},Kt={kind:'loop'},Qt={kind:'switch'},$t}),h.version||(h=null)}var y={"+":'__add',"-":'__subtract',"*":'__multiply',"/":'__divide',"%":'__modulo',"==":'__equals',"!=":'__equals'},x={"-":'__negate',"+":'__self'},b=A.each(['add','subtract','multiply','divide','modulo','equals','negate'],function(e){this['__'+e]='#'+e},{__self:function(){return this}});return O.inject(b),z.inject(b),re.inject(b),v&&('complete'===w.readyState?setTimeout(g):ce.add(v,{load:g})),{compile:p,execute:c,load:function(e){return e?_(e):g()},parse:e}}.call(this),a=new(P.inject(A.exports,{Base:A,Numerical:E,Key:me,DomEvent:ce,DomElement:pe,document:w,window:v,Symbol:G,PlacedSymbol:Z})),a.agent.node&&n(1)(a),(s=a,o='function'==typeof s?s.call(t,n,t,e):s,!(void 0!==o&&(e.exports=o))),a}.call(this,'object'==typeof self?self:null),s,r,o,s,o},"Wqy/":function(e,t,n){'use strict';function i(e,t){for(var n=65536,a=0;a<t.length;a+=2){if(n+=t[a],n>e)return!1;if(n+=t[a+1],n>=e)return!0}}function a(e,t){return 65>e?36==e:!!(91>e)||(97>e?95==e:!!(123>e)||(65535>=e?170<=e&&I.test(C(e)):!1!==t&&i(e,L)))}function s(e,t){return 48>e?36==e:!!(58>e)||!(65>e)&&(!!(91>e)||(97>e?95==e:!!(123>e)||(65535>=e?170<=e&&E.test(C(e)):!1!==t&&(i(e,L)||i(e,N)))))}function r(e,t){return new O(e,{beforeExpr:!0,binop:t})}function o(e,t){return void 0===t&&(t={}),t.keyword=e,B[e]=new O(e,t)}function d(e){return 10===e||13===e||8232===e||8233===e}function l(e,t){return U.call(e,t)}function p(e,t){for(var n=1,i=0;;){D.lastIndex=i;var a=D.exec(e);if(a&&a.index<t)++n,i=a.index+a[0].length;else return new Z(n,t-i)}}function c(e){var t={};for(var n in X)t[n]=e&&l(e,n)?e[n]:X[n];if(2015<=t.ecmaVersion&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=5>t.ecmaVersion),W(t.onToken)){var i=t.onToken;t.onToken=function(e){return i.push(e)}}return W(t.onComment)&&(t.onComment=_(t,t.onComment)),t}function _(e,t){return function(n,i,a,s,r,o){var d={type:n?'Block':'Line',value:i,start:a,end:s};e.locations&&(d.loc=new G(this,r,o)),e.ranges&&(d.range=[a,s]),t.push(d)}}function g(e){return new RegExp('^(?:'+e.replace(/ /g,'|')+')$')}function u(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function h(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}function m(e,t,n,i){try{return new RegExp(e,t)}catch(t){if(void 0!==n)throw t instanceof SyntaxError&&i.raise(n,'Error parsing regular expression: '+t.message),t}}function f(e){return 65535>=e?C(e):(e-=65536,C((e>>10)+55296,(1023&e)+56320))}function y(e,t){return new J(t,e).parse()}function x(e,t,n){var i=new J(n,e,t);return i.nextToken(),i.parseExpression()}function b(e,t){return new J(t,e)}function v(e,t,n){be=e,ve=t,Ce=n}var C=String.fromCharCode;Object.defineProperty(t,'__esModule',{value:!0}),n.d(t,'version',function(){return xe}),n.d(t,'parse',function(){return y}),n.d(t,'parseExpressionAt',function(){return x}),n.d(t,'tokenizer',function(){return b}),n.d(t,'parse_dammit',function(){return be}),n.d(t,'LooseParser',function(){return ve}),n.d(t,'pluginsLoose',function(){return Ce}),n.d(t,'addLooseExports',function(){return v}),n.d(t,'Parser',function(){return J}),n.d(t,'plugins',function(){return Y}),n.d(t,'defaultOptions',function(){return X}),n.d(t,'Position',function(){return Z}),n.d(t,'SourceLocation',function(){return G}),n.d(t,'getLineInfo',function(){return p}),n.d(t,'Node',function(){return le}),n.d(t,'TokenType',function(){return O}),n.d(t,'tokTypes',function(){return V}),n.d(t,'keywordTypes',function(){return B}),n.d(t,'TokContext',function(){return ce}),n.d(t,'tokContexts',function(){return _e}),n.d(t,'isIdentifierChar',function(){return s}),n.d(t,'isIdentifierStart',function(){return a}),n.d(t,'Token',function(){return ue}),n.d(t,'isNewLine',function(){return d}),n.d(t,'lineBreak',function(){return M}),n.d(t,'lineBreakG',function(){return D}),n.d(t,'nonASCIIwhitespace',function(){return F});var S={3:'abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile',5:'class enum extends super const export import',6:'enum',strict:'implements interface let package private protected public static yield',strictBind:'eval arguments'},w='break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this',k={5:w,6:w+' const class extends export import super'},A=/^in(stanceof)?$/,P='\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC',T='\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA900-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F',I=new RegExp('['+P+']'),E=new RegExp('['+P+T+']');P=T=null;var L=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,264,8,2,36,18,0,50,29,881,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,65,0,32,6124,20,754,9486,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],N=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,7,0,161,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,87,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,838,7,2,7,17,9,57,21,2,13,19882,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239],O=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null},z={beforeExpr:!0},R={startsExpr:!0},B={},V={num:new O('num',R),regexp:new O('regexp',R),string:new O('string',R),name:new O('name',R),eof:new O('eof'),bracketL:new O('[',{beforeExpr:!0,startsExpr:!0}),bracketR:new O(']'),braceL:new O('{',{beforeExpr:!0,startsExpr:!0}),braceR:new O('}'),parenL:new O('(',{beforeExpr:!0,startsExpr:!0}),parenR:new O(')'),comma:new O(',',z),semi:new O(';',z),colon:new O(':',z),dot:new O('.'),question:new O('?',z),arrow:new O('=>',z),template:new O('template'),invalidTemplate:new O('invalidTemplate'),ellipsis:new O('...',z),backQuote:new O('`',R),dollarBraceL:new O('${',{beforeExpr:!0,startsExpr:!0}),eq:new O('=',{beforeExpr:!0,isAssign:!0}),assign:new O('_=',{beforeExpr:!0,isAssign:!0}),incDec:new O('++/--',{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new O('!/~',{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:r('||',1),logicalAND:r('&&',2),bitwiseOR:r('|',3),bitwiseXOR:r('^',4),bitwiseAND:r('&',5),equality:r('==/!=/===/!==',6),relational:r('</>/<=/>=',7),bitShift:r('<</>>/>>>',8),plusMin:new O('+/-',{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:r('%',10),star:r('*',10),slash:r('/',10),starstar:new O('**',{beforeExpr:!0}),_break:o('break'),_case:o('case',z),_catch:o('catch'),_continue:o('continue'),_debugger:o('debugger'),_default:o('default',z),_do:o('do',{isLoop:!0,beforeExpr:!0}),_else:o('else',z),_finally:o('finally'),_for:o('for',{isLoop:!0}),_function:o('function',R),_if:o('if'),_return:o('return',z),_switch:o('switch'),_throw:o('throw',z),_try:o('try'),_var:o('var'),_const:o('const'),_while:o('while',{isLoop:!0}),_with:o('with'),_new:o('new',{beforeExpr:!0,startsExpr:!0}),_this:o('this',R),_super:o('super',R),_class:o('class',R),_extends:o('extends',z),_export:o('export'),_import:o('import'),_null:o('null',R),_true:o('true',R),_false:o('false',R),_in:o('in',{beforeExpr:!0,binop:7}),_instanceof:o('instanceof',{beforeExpr:!0,binop:7}),_typeof:o('typeof',{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:o('void',{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:o('delete',{beforeExpr:!0,prefix:!0,startsExpr:!0})},M=/\r\n?|\n|\u2028|\u2029/,D=new RegExp(M.source,'g'),F=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,j=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,q=Object.prototype,U=q.hasOwnProperty,H=q.toString,W=Array.isArray||function(e){return'[object Array]'===H.call(e)},Z=function(e,t){this.line=e,this.column=t};Z.prototype.offset=function(e){return new Z(this.line,this.column+e)};var G=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)},X={ecmaVersion:7,sourceType:'script',onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}},Y={},J=function(e,t,n){this.options=e=c(e),this.sourceFile=e.sourceFile,this.keywords=g(k[6<=e.ecmaVersion?6:5]);var i='';if(!e.allowReserved){for(var a=e.ecmaVersion;;a--)if(i=S[a])break;'module'==e.sourceType&&(i+=' await')}this.reservedWords=g(i);var s=(i?i+' ':'')+S.strict;this.reservedWordsStrict=g(s),this.reservedWordsStrictBind=g(s+' '+S.strictBind),this.input=t+'',this.containsEsc=!1,this.loadPlugins(e.plugins),n?(this.pos=n,this.lineStart=this.input.lastIndexOf('\n',n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(M).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=V.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule='module'===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&'#!'===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope()};J.prototype.isKeyword=function(e){return this.keywords.test(e)},J.prototype.isReservedWord=function(e){return this.reservedWords.test(e)},J.prototype.extend=function(e,t){this[e]=t(this[e])},J.prototype.loadPlugins=function(e){var t=this;for(var n in e){var i=Y[n];if(!i)throw new Error('Plugin \''+n+'\' not found');i(t,e[n])}},J.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};var K=J.prototype,Q=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;K.strictDirective=function(e){for(var t=this;;){j.lastIndex=e,e+=j.exec(t.input)[0].length;var n=Q.exec(t.input.slice(e));if(!n)return!1;if('use strict'==(n[1]||n[2]))return!0;e+=n[0].length}},K.eat=function(e){return this.type===e&&(this.next(),!0)},K.isContextual=function(e){return this.type===V.name&&this.value===e&&!this.containsEsc},K.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},K.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},K.canInsertSemicolon=function(){return this.type===V.eof||this.type===V.braceR||M.test(this.input.slice(this.lastTokEnd,this.start))},K.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},K.semicolon=function(){this.eat(V.semi)||this.insertSemicolon()||this.unexpected()},K.afterTrailingComma=function(e,t){if(this.type==e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},K.expect=function(e){this.eat(e)||this.unexpected()},K.unexpected=function(e){this.raise(null==e?this.start:e,'Unexpected token')},K.checkPatternErrors=function(e,t){if(e){-1<e.trailingComma&&this.raiseRecoverable(e.trailingComma,'Comma is not permitted after the rest element');var n=t?e.parenthesizedAssign:e.parenthesizedBind;-1<n&&this.raiseRecoverable(n,'Parenthesized pattern')}},K.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,i=e.doubleProto;return t?void(0<=n&&this.raise(n,'Shorthand property assignments are valid only in destructuring patterns'),0<=i&&this.raiseRecoverable(i,'Redefinition of __proto__ property')):0<=n||0<=i},K.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,'Yield expression cannot be a default value'),this.awaitPos&&this.raise(this.awaitPos,'Await expression cannot be a default value')},K.isSimpleAssignTarget=function(e){return'ParenthesizedExpression'===e.type?this.isSimpleAssignTarget(e.expression):'Identifier'===e.type||'MemberExpression'===e.type};var $=J.prototype;$.parseTopLevel=function(e){var t=this,n={};for(e.body||(e.body=[]);this.type!==V.eof;){var i=t.parseStatement(!0,!0,n);e.body.push(i)}return this.adaptDirectivePrologue(e.body),this.next(),6<=this.options.ecmaVersion&&(e.sourceType=this.options.sourceType),this.finishNode(e,'Program')};var ee={kind:'loop'},te={kind:'switch'};$.isLet=function(){if(6>this.options.ecmaVersion||!this.isContextual('let'))return!1;j.lastIndex=this.pos;var e=j.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123==n)return!0;if(a(n,!0)){for(var i=t+1;s(this.input.charCodeAt(i),!0);)++i;var r=this.input.slice(t,i);if(!A.test(r))return!0}return!1},$.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual('async'))return!1;j.lastIndex=this.pos;var e=j.exec(this.input),t=this.pos+e[0].length;return!M.test(this.input.slice(this.pos,t))&&'function'===this.input.slice(t,t+8)&&(t+8==this.input.length||!s(this.input.charAt(t+8)))},$.parseStatement=function(e,t,n){var i=this.type,a=this.startNode(),s;switch(this.isLet()&&(i=V._var,s='let'),i){case V._break:case V._continue:return this.parseBreakContinueStatement(a,i.keyword);case V._debugger:return this.parseDebuggerStatement(a);case V._do:return this.parseDoStatement(a);case V._for:return this.parseForStatement(a);case V._function:return!e&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(a,!1);case V._class:return e||this.unexpected(),this.parseClass(a,!0);case V._if:return this.parseIfStatement(a);case V._return:return this.parseReturnStatement(a);case V._switch:return this.parseSwitchStatement(a);case V._throw:return this.parseThrowStatement(a);case V._try:return this.parseTryStatement(a);case V._const:case V._var:return s=s||this.value,e||'var'==s||this.unexpected(),this.parseVarStatement(a,s);case V._while:return this.parseWhileStatement(a);case V._with:return this.parseWithStatement(a);case V.braceL:return this.parseBlock();case V.semi:return this.parseEmptyStatement(a);case V._export:case V._import:return this.options.allowImportExportEverywhere||(!t&&this.raise(this.start,'\'import\' and \'export\' may only appear at the top level'),!this.inModule&&this.raise(this.start,'\'import\' and \'export\' may appear only with \'sourceType: module\'')),i===V._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e||this.unexpected(),this.next(),this.parseFunctionStatement(a,!0);var r=this.value,o=this.parseExpression();return i===V.name&&'Identifier'===o.type&&this.eat(V.colon)?this.parseLabeledStatement(a,r,o):this.parseExpressionStatement(a,o);}},$.parseBreakContinueStatement=function(e,t){var n=this,a='break'==t;this.next(),this.eat(V.semi)||this.insertSemicolon()?e.label=null:this.type===V.name?(e.label=this.parseIdent(),this.semicolon()):this.unexpected();for(var s=0,i;s<this.labels.length;++s)if(i=n.labels[s],null==e.label||i.name===e.label.name){if(null!=i.kind&&(a||'loop'===i.kind))break;if(e.label&&a)break}return s===this.labels.length&&this.raise(e.start,'Unsyntactic '+t),this.finishNode(e,a?'BreakStatement':'ContinueStatement')},$.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,'DebuggerStatement')},$.parseDoStatement=function(e){return this.next(),this.labels.push(ee),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(V._while),e.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(V.semi):this.semicolon(),this.finishNode(e,'DoWhileStatement')},$.parseForStatement=function(e){if(this.next(),this.labels.push(ee),this.enterLexicalScope(),this.expect(V.parenL),this.type===V.semi)return this.parseFor(e,null);var t=this.isLet();if(this.type===V._var||this.type===V._const||t){var n=this.startNode(),i=t?'let':this.value;return this.next(),this.parseVar(n,!0,i),this.finishNode(n,'VariableDeclaration'),(this.type===V._in||6<=this.options.ecmaVersion&&this.isContextual('of'))&&1===n.declarations.length&&!('var'!==i&&n.declarations[0].init)?this.parseForIn(e,n):this.parseFor(e,n)}var a=new u,s=this.parseExpression(!0,a);return this.type===V._in||6<=this.options.ecmaVersion&&this.isContextual('of')?(this.toAssignable(s,!1,a),this.checkLVal(s),this.parseForIn(e,s)):(this.checkExpressionErrors(a,!0),this.parseFor(e,s))},$.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},$.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.type==V._function),e.alternate=this.eat(V._else)?this.parseStatement(!this.strict&&this.type==V._function):null,this.finishNode(e,'IfStatement')},$.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,'\'return\' outside of function'),this.next(),this.eat(V.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,'ReturnStatement')},$.parseSwitchStatement=function(e){var t=this;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(V.braceL),this.labels.push(te),this.enterLexicalScope();for(var n=!1,i;this.type!=V.braceR;)if(t.type===V._case||t.type===V._default){var a=t.type===V._case;i&&t.finishNode(i,'SwitchCase'),e.cases.push(i=t.startNode()),i.consequent=[],t.next(),a?i.test=t.parseExpression():(n&&t.raiseRecoverable(t.lastTokStart,'Multiple default clauses'),n=!0,i.test=null),t.expect(V.colon)}else i||t.unexpected(),i.consequent.push(t.parseStatement(!0));return this.exitLexicalScope(),i&&this.finishNode(i,'SwitchCase'),this.next(),this.labels.pop(),this.finishNode(e,'SwitchStatement')},$.parseThrowStatement=function(e){return this.next(),M.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,'Illegal newline after throw'),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,'ThrowStatement')};var ne=[];$.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===V._catch){var t=this.startNode();this.next(),this.expect(V.parenL),t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,'let'),this.expect(V.parenR),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,'CatchClause')}return e.finalizer=this.eat(V._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,'Missing catch or finally clause'),this.finishNode(e,'TryStatement')},$.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,'VariableDeclaration')},$.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ee),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,'WhileStatement')},$.parseWithStatement=function(e){return this.strict&&this.raise(this.start,'\'with\' in strict mode'),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,'WithStatement')},$.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,'EmptyStatement')},$.parseLabeledStatement=function(e,t,n){for(var a=this,s=0,r=a.labels,o;s<r.length;s+=1)o=r[s],o.name===t&&a.raise(n.start,'Label \''+t+'\' is already declared');for(var d=this.type.isLoop?'loop':this.type===V._switch?'switch':null,l=this.labels.length-1,i;0<=l&&(i=a.labels[l],i.statementStart==e.start);l--)i.statementStart=a.start,i.kind=d;return this.labels.push({name:t,kind:d,statementStart:this.start}),e.body=this.parseStatement(!0),('ClassDeclaration'==e.body.type||'VariableDeclaration'==e.body.type&&'var'!=e.body.kind||'FunctionDeclaration'==e.body.type&&(this.strict||e.body.generator))&&this.raiseRecoverable(e.body.start,'Invalid labeled declaration'),this.labels.pop(),e.label=n,this.finishNode(e,'LabeledStatement')},$.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,'ExpressionStatement')},$.parseBlock=function(e){var t=this;void 0===e&&(e=!0);var n=this.startNode();for(n.body=[],this.expect(V.braceL),e&&this.enterLexicalScope();!this.eat(V.braceR);){var i=t.parseStatement(!0);n.body.push(i)}return e&&this.exitLexicalScope(),this.finishNode(n,'BlockStatement')},$.parseFor=function(e,t){return e.init=t,this.expect(V.semi),e.test=this.type===V.semi?null:this.parseExpression(),this.expect(V.semi),e.update=this.type===V.parenR?null:this.parseExpression(),this.expect(V.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,'ForStatement')},$.parseForIn=function(e,t){var n=this.type===V._in?'ForInStatement':'ForOfStatement';return this.next(),'ForInStatement'==n&&('AssignmentPattern'===t.type||'VariableDeclaration'===t.type&&null!=t.declarations[0].init&&(this.strict||'Identifier'!==t.declarations[0].id.type))&&this.raise(t.start,'Invalid assignment in for-in loop head'),e.left=t,e.right='ForInStatement'==n?this.parseExpression():this.parseMaybeAssign(),this.expect(V.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,n)},$.parseVar=function(e,t,n){var i=this;for(e.declarations=[],e.kind=n;;){var a=i.startNode();if(i.parseVarId(a,n),i.eat(V.eq)?a.init=i.parseMaybeAssign(t):'const'!==n||i.type===V._in||6<=i.options.ecmaVersion&&i.isContextual('of')?'Identifier'==a.id.type||t&&(i.type===V._in||i.isContextual('of'))?a.init=null:i.raise(i.lastTokEnd,'Complex binding patterns require an initialization value'):i.unexpected(),e.declarations.push(i.finishNode(a,'VariableDeclarator')),!i.eat(V.comma))break}return e},$.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},$.parseFunction=function(e,t,n,i){this.initFunction(e),6<=this.options.ecmaVersion&&!i&&(e.generator=this.eat(V.star)),8<=this.options.ecmaVersion&&(e.async=!!i),t&&(e.id='nullableID'===t&&this.type!=V.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,'var'));var a=this.inGenerator,s=this.inAsync,r=this.yieldPos,o=this.awaitPos,d=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type==V.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.inGenerator=a,this.inAsync=s,this.yieldPos=r,this.awaitPos=o,this.inFunction=d,this.finishNode(e,t?'FunctionDeclaration':'FunctionExpression')},$.parseFunctionParams=function(e){this.expect(V.parenL),e.params=this.parseBindingList(V.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams()},$.parseClass=function(e,t){var n=this;this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var i=this.startNode(),a=!1;for(i.body=[],this.expect(V.braceL);!this.eat(V.braceR);){var s=n.parseClassMember(i);s&&'MethodDefinition'===s.type&&'constructor'===s.kind&&(a&&n.raise(s.start,'Duplicate constructor in the same class'),a=!0)}return e.body=this.finishNode(i,'ClassBody'),this.finishNode(e,t?'ClassDeclaration':'ClassExpression')},$.parseClassMember=function(e){var t=this;if(this.eat(V.semi))return null;var n=this.startNode(),i=function(e,i){void 0===i&&(i=!1);var a=t.start,s=t.startLoc;return!!t.eatContextual(e)&&(t.type===V.parenL||i&&t.canInsertSemicolon()?(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(a,s),n.key.name=e,t.finishNode(n.key,'Identifier'),!1):!0)};n.kind='method',n.static=i('static');var a=this.eat(V.star),s=!1;a||(8<=this.options.ecmaVersion&&i('async',!0)?s=!0:i('get')?n.kind='get':i('set')&&(n.kind='set')),n.key||this.parsePropertyName(n);var r=n.key;return n.computed||n.static||('Identifier'!==r.type||'constructor'!==r.name)&&('Literal'!==r.type||'constructor'!==r.value)?n.static&&'Identifier'===r.type&&'prototype'===r.name&&this.raise(r.start,'Classes may not have a static property named prototype'):('method'!==n.kind&&this.raise(r.start,'Constructor can\'t have get/set modifier'),a&&this.raise(r.start,'Constructor can\'t be a generator'),s&&this.raise(r.start,'Constructor can\'t be an async method'),n.kind='constructor'),this.parseClassMethod(e,n,a,s),'get'===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,'getter should have no params'),'set'===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,'setter should have exactly one param'),'set'===n.kind&&'RestElement'===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,'Setter cannot use rest params'),n},$.parseClassMethod=function(e,t,n,i){t.value=this.parseMethod(n,i),e.body.push(this.finishNode(t,'MethodDefinition'))},$.parseClassId=function(e,t){e.id=this.type===V.name?this.parseIdent():!0===t?this.unexpected():null},$.parseClassSuper=function(e){e.superClass=this.eat(V._extends)?this.parseExprSubscripts():null},$.parseExport=function(e,t){var n=this;if(this.next(),this.eat(V.star))return this.expectContextual('from'),this.type!==V.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,'ExportAllDeclaration');if(this.eat(V._default)){this.checkExport(t,'default',this.lastTokStart);var a;if(this.type===V._function||(a=this.isAsyncFunction())){var s=this.startNode();this.next(),a&&this.next(),e.declaration=this.parseFunction(s,'nullableID',!1,a)}else if(this.type===V._class){var r=this.startNode();e.declaration=this.parseClass(r,'nullableID')}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,'ExportDefaultDeclaration')}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),'VariableDeclaration'===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual('from'))this.type!==V.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,i=e.specifiers,d;o<i.length;o+=1)d=i[o],n.checkUnreserved(d.local);e.source=null}this.semicolon()}return this.finishNode(e,'ExportNamedDeclaration')},$.checkExport=function(e,t,n){e&&(l(e,t)&&this.raiseRecoverable(n,'Duplicate export \''+t+'\''),e[t]=!0)},$.checkPatternExport=function(e,t){var n=this,a=t.type;if('Identifier'==a)this.checkExport(e,t.name,t.start);else if('ObjectPattern'==a)for(var s=0,i=t.properties,r;s<i.length;s+=1)r=i[s],n.checkPatternExport(e,r.value);else if('ArrayPattern'==a)for(var o=0,d=t.elements,l;o<d.length;o+=1)l=d[o],l&&n.checkPatternExport(e,l);else'AssignmentPattern'==a?this.checkPatternExport(e,t.left):'ParenthesizedExpression'==a&&this.checkPatternExport(e,t.expression)},$.checkVariableExport=function(e,t){var n=this;if(e)for(var a=0,i=t,s;a<i.length;a+=1)s=i[a],n.checkPatternExport(e,s.id)},$.shouldParseExportStatement=function(){return'var'===this.type.keyword||'const'===this.type.keyword||'class'===this.type.keyword||'function'===this.type.keyword||this.isLet()||this.isAsyncFunction()},$.parseExportSpecifiers=function(e){var t=this,n=[],i=!0;for(this.expect(V.braceL);!this.eat(V.braceR);){if(!!i)i=!1;else if(t.expect(V.comma),t.afterTrailingComma(V.braceR))break;var a=t.startNode();a.local=t.parseIdent(!0),a.exported=t.eatContextual('as')?t.parseIdent(!0):a.local,t.checkExport(e,a.exported.name,a.exported.start),n.push(t.finishNode(a,'ExportSpecifier'))}return n},$.parseImport=function(e){return this.next(),this.type===V.string?(e.specifiers=ne,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual('from'),e.source=this.type===V.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,'ImportDeclaration')},$.parseImportSpecifiers=function(){var e=this,t=[],n=!0;if(this.type===V.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLVal(i.local,'let'),t.push(this.finishNode(i,'ImportDefaultSpecifier')),!this.eat(V.comma))return t}if(this.type===V.star){var a=this.startNode();return this.next(),this.expectContextual('as'),a.local=this.parseIdent(),this.checkLVal(a.local,'let'),t.push(this.finishNode(a,'ImportNamespaceSpecifier')),t}for(this.expect(V.braceL);!this.eat(V.braceR);){if(!!n)n=!1;else if(e.expect(V.comma),e.afterTrailingComma(V.braceR))break;var s=e.startNode();s.imported=e.parseIdent(!0),e.eatContextual('as')?s.local=e.parseIdent():(e.checkUnreserved(s.imported),s.local=s.imported),e.checkLVal(s.local,'let'),t.push(e.finishNode(s,'ImportSpecifier'))}return t},$.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},$.isDirectiveCandidate=function(e){return'ExpressionStatement'===e.type&&'Literal'===e.expression.type&&'string'==typeof e.expression.value&&('"'===this.input[e.start]||'\''===this.input[e.start])};var ie=J.prototype;ie.toAssignable=function(e,t,n){var a=this;if(6<=this.options.ecmaVersion&&e)switch(e.type){case'Identifier':this.inAsync&&'await'===e.name&&this.raise(e.start,'Can not use \'await\' as identifier inside an async function');break;case'ObjectPattern':case'ArrayPattern':case'RestElement':break;case'ObjectExpression':e.type='ObjectPattern',n&&this.checkPatternErrors(n,!0);for(var s=0,i=e.properties,r;s<i.length;s+=1)r=i[s],a.toAssignable(r,t);break;case'Property':'init'!==e.kind&&this.raise(e.key.start,'Object pattern can\'t contain getter or setter'),this.toAssignable(e.value,t);break;case'ArrayExpression':e.type='ArrayPattern',n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case'SpreadElement':e.type='RestElement',this.toAssignable(e.argument,t),'AssignmentPattern'===e.argument.type&&this.raise(e.argument.start,'Rest elements cannot have a default value');break;case'AssignmentExpression':'='!==e.operator&&this.raise(e.left.end,'Only \'=\' operator can be used for specifying default value.'),e.type='AssignmentPattern',delete e.operator,this.toAssignable(e.left,t);case'AssignmentPattern':break;case'ParenthesizedExpression':this.toAssignable(e.expression,t);break;case'MemberExpression':if(!t)break;default:this.raise(e.start,'Assigning to rvalue');}else n&&this.checkPatternErrors(n,!0);return e},ie.toAssignableList=function(e,t){for(var n=this,a=e.length,s=0,i;s<a;s++)i=e[s],i&&n.toAssignable(i,t);if(a){var r=e[a-1];6===this.options.ecmaVersion&&t&&r&&'RestElement'===r.type&&'Identifier'!==r.argument.type&&this.unexpected(r.argument.start)}return e},ie.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,'SpreadElement')},ie.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==V.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,'RestElement')},ie.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case V.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(V.bracketR,!0,!0),this.finishNode(e,'ArrayPattern');case V.braceL:return this.parseObj(!0);}return this.parseIdent()},ie.parseBindingList=function(e,t,n){for(var i=this,a=[],s=!0;!this.eat(e);)if(s?s=!1:i.expect(V.comma),t&&i.type===V.comma)a.push(null);else if(n&&i.afterTrailingComma(e))break;else if(i.type===V.ellipsis){var r=i.parseRestBinding();i.parseBindingListItem(r),a.push(r),i.type===V.comma&&i.raise(i.start,'Comma is not permitted after the rest element'),i.expect(e);break}else{var o=i.parseMaybeDefault(i.start,i.startLoc);i.parseBindingListItem(o),a.push(o)}return a},ie.parseBindingListItem=function(e){return e},ie.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),6>this.options.ecmaVersion||!this.eat(V.eq))return n;var i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,'AssignmentPattern')},ie.checkLVal=function(e,t,n){var a=this;switch(e.type){case'Identifier':this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?'Binding ':'Assigning to ')+e.name+' in strict mode'),n&&(l(n,e.name)&&this.raiseRecoverable(e.start,'Argument name clash'),n[e.name]=!0),t&&'none'!==t&&(('var'===t&&!this.canDeclareVarName(e.name)||'var'!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,'Identifier \''+e.name+'\' has already been declared'),'var'===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case'MemberExpression':t&&this.raiseRecoverable(e.start,'Binding member expression');break;case'ObjectPattern':for(var s=0,i=e.properties,r;s<i.length;s+=1)r=i[s],a.checkLVal(r,t,n);break;case'Property':this.checkLVal(e.value,t,n);break;case'ArrayPattern':for(var o=0,d=e.elements,p;o<d.length;o+=1)p=d[o],p&&a.checkLVal(p,t,n);break;case'AssignmentPattern':this.checkLVal(e.left,t,n);break;case'RestElement':this.checkLVal(e.argument,t,n);break;case'ParenthesizedExpression':this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?'Binding':'Assigning to')+' rvalue');}};var ae=J.prototype;ae.checkPropClash=function(e,t,n){if(!(6<=this.options.ecmaVersion&&(e.computed||e.method||e.shorthand))){var i=e.key,a;switch(i.type){case'Identifier':a=i.name;break;case'Literal':a=i.value+'';break;default:return;}var s=e.kind;if(6<=this.options.ecmaVersion)return void('__proto__'===a&&'init'===s&&(t.proto&&(n&&0>n.doubleProto?n.doubleProto=i.start:this.raiseRecoverable(i.start,'Redefinition of __proto__ property')),t.proto=!0));a='$'+a;var r=t[a];if(r){var o;o='init'===s?this.strict&&r.init||r.get||r.set:r.init||r[s],o&&this.raiseRecoverable(i.start,'Redefinition of property')}else r=t[a]={init:!1,get:!1,set:!1};r[s]=!0}},ae.parseExpression=function(e,t){var n=this,i=this.start,a=this.startLoc,s=this.parseMaybeAssign(e,t);if(this.type===V.comma){var r=this.startNodeAt(i,a);for(r.expressions=[s];this.eat(V.comma);)r.expressions.push(n.parseMaybeAssign(e,t));return this.finishNode(r,'SequenceExpression')}return s},ae.parseMaybeAssign=function(e,t,n){if(this.inGenerator&&this.isContextual('yield'))return this.parseYield();var i=!1,a=-1,s=-1;t?(a=t.parenthesizedAssign,s=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new u,i=!0);var r=this.start,o=this.startLoc;(this.type==V.parenL||this.type==V.name)&&(this.potentialArrowAt=this.start);var d=this.parseMaybeConditional(e,t);if(n&&(d=n.call(this,d,r,o)),this.type.isAssign){var l=this.startNodeAt(r,o);return l.operator=this.value,l.left=this.type===V.eq?this.toAssignable(d,!1,t):d,i||u.call(t),t.shorthandAssign=-1,this.checkLVal(d),this.next(),l.right=this.parseMaybeAssign(e),this.finishNode(l,'AssignmentExpression')}return i&&this.checkExpressionErrors(t,!0),-1<a&&(t.parenthesizedAssign=a),-1<s&&(t.trailingComma=s),d},ae.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,a=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return a;if(this.eat(V.question)){var s=this.startNodeAt(n,i);return s.test=a,s.consequent=this.parseMaybeAssign(),this.expect(V.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,'ConditionalExpression')}return a},ae.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,a=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?a:a.start==n&&'ArrowFunctionExpression'===a.type?a:this.parseExprOp(a,n,i,-1,e)},ae.parseExprOp=function(e,t,n,i,a){var s=this.type.binop;if(null!=s&&(!a||this.type!==V._in)&&s>i){var r=this.type===V.logicalOR||this.type===V.logicalAND,o=this.value;this.next();var d=this.start,l=this.startLoc,p=this.parseExprOp(this.parseMaybeUnary(null,!1),d,l,s,a),c=this.buildBinary(t,n,e,p,o,r);return this.parseExprOp(c,t,n,i,a)}return e},ae.buildBinary=function(e,t,n,i,a,s){var r=this.startNodeAt(e,t);return r.left=n,r.operator=a,r.right=i,this.finishNode(r,s?'LogicalExpression':'BinaryExpression')},ae.parseMaybeUnary=function(e,t){var n=this,i=this.start,a=this.startLoc,s;if(this.inAsync&&this.isContextual('await'))s=this.parseAwait(),t=!0;else if(this.type.prefix){var r=this.startNode(),o=this.type===V.incDec;r.operator=this.value,r.prefix=!0,this.next(),r.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),o?this.checkLVal(r.argument):this.strict&&'delete'===r.operator&&'Identifier'===r.argument.type?this.raiseRecoverable(r.start,'Deleting local variable in strict mode'):t=!0,s=this.finishNode(r,o?'UpdateExpression':'UnaryExpression')}else{if(s=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return s;for(;this.type.postfix&&!this.canInsertSemicolon();){var d=n.startNodeAt(i,a);d.operator=n.value,d.prefix=!1,d.argument=s,n.checkLVal(s),n.next(),s=n.finishNode(d,'UpdateExpression')}}return!t&&this.eat(V.starstar)?this.buildBinary(i,a,s,this.parseMaybeUnary(null,!1),'**',!1):s},ae.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,i=this.parseExprAtom(e),a='ArrowFunctionExpression'===i.type&&')'!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||a)return i;var s=this.parseSubscripts(i,t,n);return e&&'MemberExpression'===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},ae.parseSubscripts=function(e,t,n,i){for(var a=this,s=8<=this.options.ecmaVersion&&'Identifier'===e.type&&'async'===e.name&&this.lastTokEnd==e.end&&!this.canInsertSemicolon()&&'async'===this.input.slice(e.start,e.end),r=void 0;;)if((r=a.eat(V.bracketL))||a.eat(V.dot)){var o=a.startNodeAt(t,n);o.object=e,o.property=r?a.parseExpression():a.parseIdent(!0),o.computed=!!r,r&&a.expect(V.bracketR),e=a.finishNode(o,'MemberExpression')}else if(!i&&a.eat(V.parenL)){var d=new u,l=a.yieldPos,p=a.awaitPos;a.yieldPos=0,a.awaitPos=0;var c=a.parseExprList(V.parenR,8<=a.options.ecmaVersion,!1,d);if(s&&!a.canInsertSemicolon()&&a.eat(V.arrow))return a.checkPatternErrors(d,!1),a.checkYieldAwaitInDefaultParams(),a.yieldPos=l,a.awaitPos=p,a.parseArrowExpression(a.startNodeAt(t,n),c,!0);a.checkExpressionErrors(d,!0),a.yieldPos=l||a.yieldPos,a.awaitPos=p||a.awaitPos;var _=a.startNodeAt(t,n);_.callee=e,_.arguments=c,e=a.finishNode(_,'CallExpression')}else if(a.type===V.backQuote){var g=a.startNodeAt(t,n);g.tag=e,g.quasi=a.parseTemplate({isTagged:!0}),e=a.finishNode(g,'TaggedTemplateExpression')}else return e},ae.parseExprAtom=function(e){var t=this.potentialArrowAt==this.start,n;switch(this.type){case V._super:return this.inFunction||this.raise(this.start,'\'super\' outside of function or class'),n=this.startNode(),this.next(),this.type!==V.dot&&this.type!==V.bracketL&&this.type!==V.parenL&&this.unexpected(),this.finishNode(n,'Super');case V._this:return n=this.startNode(),this.next(),this.finishNode(n,'ThisExpression');case V.name:var i=this.start,a=this.startLoc,s=this.containsEsc,r=this.parseIdent(this.type!==V.name);if(8<=this.options.ecmaVersion&&!s&&'async'===r.name&&!this.canInsertSemicolon()&&this.eat(V._function))return this.parseFunction(this.startNodeAt(i,a),!1,!1,!0);if(t&&!this.canInsertSemicolon()){if(this.eat(V.arrow))return this.parseArrowExpression(this.startNodeAt(i,a),[r],!1);if(8<=this.options.ecmaVersion&&'async'===r.name&&this.type===V.name&&!s)return r=this.parseIdent(),(this.canInsertSemicolon()||!this.eat(V.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,a),[r],!0)}return r;case V.regexp:var o=this.value;return n=this.parseLiteral(o.value),n.regex={pattern:o.pattern,flags:o.flags},n;case V.num:case V.string:return this.parseLiteral(this.value);case V._null:case V._true:case V._false:return n=this.startNode(),n.value=this.type===V._null?null:this.type===V._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,'Literal');case V.parenL:var d=this.start,l=this.parseParenAndDistinguishExpression(t);return e&&(0>e.parenthesizedAssign&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=d),0>e.parenthesizedBind&&(e.parenthesizedBind=d)),l;case V.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(V.bracketR,!0,!0,e),this.finishNode(n,'ArrayExpression');case V.braceL:return this.parseObj(!1,e);case V._function:return n=this.startNode(),this.next(),this.parseFunction(n,!1);case V._class:return this.parseClass(this.startNode(),!1);case V._new:return this.parseNew();case V.backQuote:return this.parseTemplate();default:this.unexpected();}},ae.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,'Literal')},ae.parseParenExpression=function(){this.expect(V.parenL);var e=this.parseExpression();return this.expect(V.parenR),e},ae.parseParenAndDistinguishExpression=function(e){var t=this,n=this.start,i=this.startLoc,a=8<=this.options.ecmaVersion,s;if(6<=this.options.ecmaVersion){this.next();var r=this.start,o=this.startLoc,d=[],l=!0,p=!1,c=new u,_=this.yieldPos,g=this.awaitPos,h;for(this.yieldPos=0,this.awaitPos=0;this.type!==V.parenR;)if(l?l=!1:t.expect(V.comma),a&&t.afterTrailingComma(V.parenR,!0)){p=!0;break}else if(t.type===V.ellipsis){h=t.start,d.push(t.parseParenItem(t.parseRestBinding())),t.type===V.comma&&t.raise(t.start,'Comma is not permitted after the rest element');break}else d.push(t.parseMaybeAssign(!1,c,t.parseParenItem));var m=this.start,f=this.startLoc;if(this.expect(V.parenR),e&&!this.canInsertSemicolon()&&this.eat(V.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=_,this.awaitPos=g,this.parseParenArrowList(n,i,d);(!d.length||p)&&this.unexpected(this.lastTokStart),h&&this.unexpected(h),this.checkExpressionErrors(c,!0),this.yieldPos=_||this.yieldPos,this.awaitPos=g||this.awaitPos,1<d.length?(s=this.startNodeAt(r,o),s.expressions=d,this.finishNodeAt(s,'SequenceExpression',m,f)):s=d[0]}else s=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,i);return y.expression=s,this.finishNode(y,'ParenthesizedExpression')}return s},ae.parseParenItem=function(e){return e},ae.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var se=[];ae.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(V.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),('target'!==e.property.name||n)&&this.raiseRecoverable(e.property.start,'The only valid meta property for new is new.target'),this.inFunction||this.raiseRecoverable(e.start,'new.target can only be used in functions'),this.finishNode(e,'MetaProperty')}var i=this.start,a=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),i,a,!0),e.arguments=this.eat(V.parenL)?this.parseExprList(V.parenR,8<=this.options.ecmaVersion,!1):se,this.finishNode(e,'NewExpression')},ae.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===V.invalidTemplate?(!t&&this.raiseRecoverable(this.start,'Bad escape sequence in untagged template literal'),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,'\n'),cooked:this.value},this.next(),n.tail=this.type===V.backQuote,this.finishNode(n,'TemplateElement')},ae.parseTemplate=function(e){var t=this;void 0===e&&(e={});var n=e.isTagged;void 0===n&&(n=!1);var i=this.startNode();this.next(),i.expressions=[];var a=this.parseTemplateElement({isTagged:n});for(i.quasis=[a];!a.tail;)t.expect(V.dollarBraceL),i.expressions.push(t.parseExpression()),t.expect(V.braceR),i.quasis.push(a=t.parseTemplateElement({isTagged:n}));return this.next(),this.finishNode(i,'TemplateLiteral')},ae.isAsyncProp=function(e){return!e.computed&&'Identifier'===e.key.type&&'async'===e.key.name&&(this.type===V.name||this.type===V.num||this.type===V.string||this.type===V.bracketL||this.type.keyword)&&!M.test(this.input.slice(this.lastTokEnd,this.start))},ae.parseObj=function(e,t){var n=this,i=this.startNode(),a=!0,s={};for(i.properties=[],this.next();!this.eat(V.braceR);){if(!!a)a=!1;else if(n.expect(V.comma),n.afterTrailingComma(V.braceR))break;var r=n.parseProperty(e,t);e||n.checkPropClash(r,s,t),i.properties.push(r)}return this.finishNode(i,e?'ObjectPattern':'ObjectExpression')},ae.parseProperty=function(e,t){var n=this.startNode(),i,a,s,r;6<=this.options.ecmaVersion&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,r=this.startLoc),!e&&(i=this.eat(V.star)));var o=this.containsEsc;return this.parsePropertyName(n),e||o||!(8<=this.options.ecmaVersion)||i||!this.isAsyncProp(n)?a=!1:(a=!0,this.parsePropertyName(n,t)),this.parsePropertyValue(n,e,i,a,s,r,t,o),this.finishNode(n,'Property')},ae.parsePropertyValue=function(e,t,n,i,a,s,r,o){if((n||i)&&this.type===V.colon&&this.unexpected(),this.eat(V.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,r),e.kind='init';else if(6<=this.options.ecmaVersion&&this.type===V.parenL)t&&this.unexpected(),e.kind='init',e.method=!0,e.value=this.parseMethod(n,i);else if(!t&&!o&&5<=this.options.ecmaVersion&&!e.computed&&'Identifier'===e.key.type&&('get'===e.key.name||'set'===e.key.name)&&this.type!=V.comma&&this.type!=V.braceR){(n||i)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var d='get'===e.kind?0:1;if(e.value.params.length!==d){var l=e.value.start;'get'===e.kind?this.raiseRecoverable(l,'getter should have no params'):this.raiseRecoverable(l,'setter should have exactly one param')}else'set'===e.kind&&'RestElement'===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,'Setter cannot use rest params')}else 6<=this.options.ecmaVersion&&!e.computed&&'Identifier'===e.key.type?(this.checkUnreserved(e.key),e.kind='init',t?e.value=this.parseMaybeDefault(a,s,e.key):this.type===V.eq&&r?(0>r.shorthandAssign&&(r.shorthandAssign=this.start),e.value=this.parseMaybeDefault(a,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected()},ae.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(V.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(V.bracketR),e.key;e.computed=!1}return e.key=this.type===V.num||this.type===V.string?this.parseExprAtom():this.parseIdent(!0)},ae.initFunction=function(e){e.id=null,6<=this.options.ecmaVersion&&(e.generator=!1,e.expression=!1),8<=this.options.ecmaVersion&&(e.async=!1)},ae.parseMethod=function(e,t){var n=this.startNode(),i=this.inGenerator,a=this.inAsync,s=this.yieldPos,r=this.awaitPos,o=this.inFunction;return this.initFunction(n),6<=this.options.ecmaVersion&&(n.generator=e),8<=this.options.ecmaVersion&&(n.async=!!t),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(V.parenL),n.params=this.parseBindingList(V.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=i,this.inAsync=a,this.yieldPos=s,this.awaitPos=r,this.inFunction=o,this.finishNode(n,'FunctionExpression')},ae.parseArrowExpression=function(e,t,n){var i=this.inGenerator,a=this.inAsync,s=this.yieldPos,r=this.awaitPos,o=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),8<=this.options.ecmaVersion&&(e.async=!!n),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=i,this.inAsync=a,this.yieldPos=s,this.awaitPos=r,this.inFunction=o,this.finishNode(e,'ArrowFunctionExpression')},ae.parseFunctionBody=function(e,t){var n=t&&this.type!==V.braceL,i=this.strict,a=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var s=7<=this.options.ecmaVersion&&!this.isSimpleParamList(e.params);(!i||s)&&(a=this.strictDirective(this.end),a&&s&&this.raiseRecoverable(e.start,'Illegal \'use strict\' directive in function with non-simple parameter list'));var r=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!i&&!a&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=r}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,'none'),this.strict=i},ae.isSimpleParamList=function(e){for(var t=0,n=e,i;t<n.length;t+=1)if(i=n[t],'Identifier'!==i.type)return!1;return!0},ae.checkParams=function(e,t){for(var n=this,a={},s=0,i=e.params,r;s<i.length;s+=1)r=i[s],n.checkLVal(r,'var',t?null:a)},ae.parseExprList=function(e,t,n,i){for(var a=this,s=[],r=!0;!this.eat(e);){if(!!r)r=!1;else if(a.expect(V.comma),t&&a.afterTrailingComma(e))break;var o=void 0;n&&a.type===V.comma?o=null:a.type===V.ellipsis?(o=a.parseSpread(i),i&&a.type===V.comma&&0>i.trailingComma&&(i.trailingComma=a.start)):o=a.parseMaybeAssign(!1,i),s.push(o)}return s},ae.checkUnreserved=function(e){var t=e.start,n=e.end,i=e.name;if(this.inGenerator&&'yield'===i&&this.raiseRecoverable(t,'Can not use \'yield\' as identifier inside a generator'),this.inAsync&&'await'===i&&this.raiseRecoverable(t,'Can not use \'await\' as identifier inside an async function'),this.isKeyword(i)&&this.raise(t,'Unexpected keyword \''+i+'\''),!(6>this.options.ecmaVersion&&-1!=this.input.slice(t,n).indexOf('\\'))){var a=this.strict?this.reservedWordsStrict:this.reservedWords;a.test(i)&&(!this.inAsync&&'await'===i&&this.raiseRecoverable(t,'Can not use keyword \'await\' outside an async function'),this.raiseRecoverable(t,'The keyword \''+i+'\' is reserved'))}},ae.parseIdent=function(e){var t=this.startNode();return e&&'never'==this.options.allowReserved&&(e=!1),this.type===V.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,('class'===t.name||'function'===t.name)&&(this.lastTokEnd!==this.lastTokStart+1||46!==this.input.charCodeAt(this.lastTokStart))&&this.context.pop()):this.unexpected(),this.next(),this.finishNode(t,'Identifier'),e||this.checkUnreserved(t),t},ae.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type==V.semi||this.canInsertSemicolon()||this.type!=V.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(V.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,'YieldExpression')},ae.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,'AwaitExpression')};var re=J.prototype;re.raise=function(e,t){var n=p(this.input,e);t+=' ('+n.line+':'+n.column+')';var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i},re.raiseRecoverable=re.raise,re.curPosition=function(){if(this.options.locations)return new Z(this.curLine,this.pos-this.lineStart)};var oe=J.prototype,de=Object.assign||function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];for(var a=0,i=t,s;a<i.length;a+=1)for(var r in s=i[a],s)l(s,r)&&(e[r]=s[r]);return e};oe.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},oe.exitFunctionScope=function(){this.scopeStack.pop()},oe.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),de(t.parentLexical,e.lexical,e.parentLexical)},oe.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];de(t.childVar,e.var,e.childVar)},oe.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!l(t.lexical,e)&&!l(t.parentLexical,e)},oe.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!l(t.lexical,e)&&!l(t.var,e)&&!l(t.childVar,e)},oe.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1].var[e]=!0},oe.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0};var le=function(e,t,n){this.type='',this.start=t,this.end=0,e.options.locations&&(this.loc=new G(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},pe=J.prototype;pe.startNode=function(){return new le(this,this.start,this.startLoc)},pe.startNodeAt=function(e,t){return new le(this,e,t)},pe.finishNode=function(e,t){return h.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},pe.finishNodeAt=function(e,t,n,i){return h.call(this,e,t,n,i)};var ce=function(e,t,n,i,a){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=i,this.generator=!!a},_e={b_stat:new ce('{',!1),b_expr:new ce('{',!0),b_tmpl:new ce('${',!1),p_stat:new ce('(',!1),p_expr:new ce('(',!0),q_tmpl:new ce('`',!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new ce('function',!1),f_expr:new ce('function',!0),f_expr_gen:new ce('function',!0,!1,null,!0),f_gen:new ce('function',!1,!1,null,!0)},ge=J.prototype;ge.initialContext=function(){return[_e.b_stat]},ge.braceIsBlock=function(e){var t=this.curContext();return t===_e.f_expr||t===_e.f_stat||(e===V.colon&&(t===_e.b_stat||t===_e.b_expr)?!t.isExpr:e===V._return||e==V.name&&this.exprAllowed?M.test(this.input.slice(this.lastTokEnd,this.start)):e===V._else||e===V.semi||e===V.eof||e===V.parenR||e==V.arrow||(e==V.braceL?t===_e.b_stat:e==V._var||e==V.name?!1:!this.exprAllowed))},ge.inGeneratorContext=function(){for(var e=this,t=this.context.length-1,n;1<=t;t--)if(n=e.context[t],'function'===n.token)return n.generator;return!1},ge.updateContext=function(e){var t=this.type,n;t.keyword&&e==V.dot?this.exprAllowed=!1:(n=t.updateContext)?n.call(this,e):this.exprAllowed=t.beforeExpr},V.parenR.updateContext=V.braceR.updateContext=function(){if(1==this.context.length)return void(this.exprAllowed=!0);var e=this.context.pop();e===_e.b_stat&&'function'===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},V.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?_e.b_stat:_e.b_expr),this.exprAllowed=!0},V.dollarBraceL.updateContext=function(){this.context.push(_e.b_tmpl),this.exprAllowed=!0},V.parenL.updateContext=function(e){var t=e===V._if||e===V._for||e===V._with||e===V._while;this.context.push(t?_e.p_stat:_e.p_expr),this.exprAllowed=!0},V.incDec.updateContext=function(){},V._function.updateContext=V._class.updateContext=function(e){e.beforeExpr&&e!==V.semi&&e!==V._else&&(e!==V.colon&&e!==V.braceL||this.curContext()!==_e.b_stat)?this.context.push(_e.f_expr):this.context.push(_e.f_stat),this.exprAllowed=!1},V.backQuote.updateContext=function(){this.curContext()===_e.q_tmpl?this.context.pop():this.context.push(_e.q_tmpl),this.exprAllowed=!1},V.star.updateContext=function(e){if(e==V._function){var t=this.context.length-1;this.context[t]=this.context[t]===_e.f_expr?_e.f_expr_gen:_e.f_gen}this.exprAllowed=!0},V.name.updateContext=function(){var e=!1;6<=this.options.ecmaVersion&&('of'==this.value&&!this.exprAllowed||'yield'==this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var ue=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new G(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},he=J.prototype,me='object'==typeof Packages&&'[object JavaPackage]'==Object.prototype.toString.call(Packages);he.next=function(){this.options.onToken&&this.options.onToken(new ue(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},he.getToken=function(){return this.next(),new ue(this)},'undefined'!=typeof Symbol&&(he[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===V.eof,value:t}}}}),he.curContext=function(){return this.context[this.context.length-1]},he.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(V.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},he.readToken=function(e){return a(e,6<=this.options.ecmaVersion)||92===e?this.readWord():this.getTokenFromCode(e)},he.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(55295>=e||57344<=e)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888},he.skipBlockComment=function(){var e=this,t=this.options.onComment&&this.curPosition(),n=this.pos,i=this.input.indexOf('*/',this.pos+=2);if(-1===i&&this.raise(this.pos-2,'Unterminated comment'),this.pos=i+2,this.options.locations){D.lastIndex=n;for(var a;(a=D.exec(this.input))&&a.index<this.pos;)++e.curLine,e.lineStart=a.index+a[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,i),n,this.pos,t,this.curPosition())},he.skipLineComment=function(e){for(var t=this,n=this.pos,i=this.options.onComment&&this.curPosition(),a=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!d(a);)a=t.input.charCodeAt(++t.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(n+e,this.pos),n,this.pos,i,this.curPosition())},he.skipSpace=function(){var e=this;loop:for(;this.pos<this.input.length;){var t=e.input.charCodeAt(e.pos);switch(t){case 32:case 160:++e.pos;break;case 13:10===e.input.charCodeAt(e.pos+1)&&++e.pos;case 10:case 8232:case 8233:++e.pos,e.options.locations&&(++e.curLine,e.lineStart=e.pos);break;case 47:switch(e.input.charCodeAt(e.pos+1)){case 42:e.skipBlockComment();break;case 47:e.skipLineComment(2);break;default:break loop;}break;default:if(8<t&&14>t||5760<=t&&F.test(C(t)))++e.pos;else break loop;}}},he.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},he.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(48<=e&&57>=e)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return 6<=this.options.ecmaVersion&&46===e&&46===t?(this.pos+=3,this.finishToken(V.ellipsis)):(++this.pos,this.finishToken(V.dot))},he.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(V.assign,2):this.finishOp(V.slash,1)},he.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,i=42===e?V.star:V.modulo;return 7<=this.options.ecmaVersion&&42==e&&42===t&&(++n,i=V.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(V.assign,n+1):this.finishOp(i,n)},he.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?V.logicalOR:V.logicalAND,2):61===t?this.finishOp(V.assign,2):this.finishOp(124===e?V.bitwiseOR:V.bitwiseAND,1)},he.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(V.assign,2):this.finishOp(V.bitwiseXOR,1)},he.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45==t&&!this.inModule&&62==this.input.charCodeAt(this.pos+2)&&(0===this.lastTokEnd||M.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(V.incDec,2):61===t?this.finishOp(V.assign,2):this.finishOp(V.plusMin,1)},he.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(V.assign,n+1):this.finishOp(V.bitShift,n)):33!=t||60!=e||this.inModule||45!=this.input.charCodeAt(this.pos+2)||45!=this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(V.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},he.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(V.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(V.arrow)):this.finishOp(61===e?V.eq:V.prefix,1)},he.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(V.parenL);case 41:return++this.pos,this.finishToken(V.parenR);case 59:return++this.pos,this.finishToken(V.semi);case 44:return++this.pos,this.finishToken(V.comma);case 91:return++this.pos,this.finishToken(V.bracketL);case 93:return++this.pos,this.finishToken(V.bracketR);case 123:return++this.pos,this.finishToken(V.braceL);case 125:return++this.pos,this.finishToken(V.braceR);case 58:return++this.pos,this.finishToken(V.colon);case 63:return++this.pos,this.finishToken(V.question);case 96:if(6>this.options.ecmaVersion)break;return++this.pos,this.finishToken(V.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(V.prefix,1);}this.raise(this.pos,'Unexpected character \''+f(e)+'\'')},he.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};var fe=!!m('\uFFFF','u');he.readRegexp=function(){for(var e=this,t=this.pos,n,i;;){e.pos>=e.input.length&&e.raise(t,'Unterminated regular expression');var a=e.input.charAt(e.pos);if(M.test(a)&&e.raise(t,'Unterminated regular expression'),!n){if('['===a)i=!0;else if(']'===a&&i)i=!1;else if('/'===a&&!i)break;n='\\'===a}else n=!1;++e.pos}var s=this.input.slice(t,this.pos);++this.pos;var r=this.readWord1(),o=s,d='';if(r){var l=/^[gim]*$/;6<=this.options.ecmaVersion&&(l=/^[gimuy]*$/),9<=this.options.ecmaVersion&&(l=/^[gimsuy]*$/),l.test(r)||this.raise(t,'Invalid regular expression flag'),0<=r.indexOf('u')&&(fe?d='u':(o=o.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(n,i,a){return i=+('0x'+i),1114111<i&&e.raise(t+a+3,'Code point out of bounds'),'x'}),o=o.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,'x'),d=d.replace('u','')))}var p=null;return me||(m(o,d,t,this),p=m(s,r)),this.finishToken(V.regexp,{pattern:s,flags:r,value:p})},he.readInt=function(t,n){for(var a=this,s=this.pos,r=0,o=0,i=null==n?Infinity:n;o<i;++o){var e=a.input.charCodeAt(a.pos),d=void 0;if(d=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity,d>=t)break;++a.pos,r=r*t+d}return this.pos===s||null!=n&&this.pos-s!==n?null:r},he.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,'Expected number in radix '+e),a(this.fullCharCodeAtPos())&&this.raise(this.pos,'Identifier directly after number'),this.finishToken(V.num,t)},he.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,'Invalid number');var n=2<=this.pos-t&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,'Invalid number'),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var i=this.input.charCodeAt(this.pos);46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(i=this.input.charCodeAt(++this.pos),(43===i||45===i)&&++this.pos,null===this.readInt(10)&&this.raise(t,'Invalid number')),a(this.fullCharCodeAtPos())&&this.raise(this.pos,'Identifier directly after number');var s=this.input.slice(t,this.pos),r=n?parseInt(s,8):parseFloat(s);return this.finishToken(V.num,r)},he.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(123===e){6>this.options.ecmaVersion&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf('}',this.pos)-this.pos),++this.pos,1114111<t&&this.invalidStringToken(n,'Code point out of bounds')}else t=this.readHexChar(4);return t},he.readString=function(e){for(var t=this,n='',i=++this.pos;;){t.pos>=t.input.length&&t.raise(t.start,'Unterminated string constant');var a=t.input.charCodeAt(t.pos);if(a===e)break;92===a?(n+=t.input.slice(i,t.pos),n+=t.readEscapedChar(!1),i=t.pos):(d(a)&&t.raise(t.start,'Unterminated string constant'),++t.pos)}return n+=this.input.slice(i,this.pos++),this.finishToken(V.string,n)};var ye={};he.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===ye)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1},he.invalidStringToken=function(e,t){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw ye;else this.raise(e,t)},he.readTmplToken=function(){for(var e=this,t='',n=this.pos;;){e.pos>=e.input.length&&e.raise(e.start,'Unterminated template');var i=e.input.charCodeAt(e.pos);if(96===i||36===i&&123===e.input.charCodeAt(e.pos+1))return e.pos===e.start&&(e.type===V.template||e.type===V.invalidTemplate)?36===i?(e.pos+=2,e.finishToken(V.dollarBraceL)):(++e.pos,e.finishToken(V.backQuote)):(t+=e.input.slice(n,e.pos),e.finishToken(V.template,t));if(92===i)t+=e.input.slice(n,e.pos),t+=e.readEscapedChar(!0),n=e.pos;else if(d(i)){switch(t+=e.input.slice(n,e.pos),++e.pos,i){case 13:10===e.input.charCodeAt(e.pos)&&++e.pos;case 10:t+='\n';break;default:t+=C(i);}e.options.locations&&(++e.curLine,e.lineStart=e.pos),n=e.pos}else++e.pos}},he.readInvalidTemplateToken=function(){for(var e=this;this.pos<this.input.length;this.pos++)switch(e.input[e.pos]){case'\\':++e.pos;break;case'$':if('{'!==e.input[e.pos+1])break;case'`':return e.finishToken(V.invalidTemplate,e.input.slice(e.start,e.pos));}this.raise(this.start,'Unterminated template')},he.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return'\n';case 114:return'\r';case 120:return C(this.readHexChar(2));case 117:return f(this.readCodePoint());case 116:return'\t';case 98:return'\b';case 118:return'\x0B';case 102:return'\f';case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),'';default:if(48<=t&&55>=t){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return 255<i&&(n=n.slice(0,-1),i=parseInt(n,8)),'0'!==n&&(this.strict||e)&&this.invalidStringToken(this.pos-2,'Octal literal in strict mode'),this.pos+=n.length-1,C(i)}return C(t);}},he.readHexChar=function(e){var t=this.pos,i=this.readInt(16,e);return null===i&&this.invalidStringToken(t,'Bad character escape sequence'),i},he.readWord1=function(){var e=this;this.containsEsc=!1;for(var t='',n=!0,i=this.pos,r=6<=this.options.ecmaVersion,o;this.pos<this.input.length;){if(o=e.fullCharCodeAtPos(),s(o,r))e.pos+=65535>=o?1:2;else if(92===o){e.containsEsc=!0,t+=e.input.slice(i,e.pos);var d=e.pos;117!=e.input.charCodeAt(++e.pos)&&e.invalidStringToken(e.pos,'Expecting Unicode escape sequence \\uXXXX'),++e.pos;var l=e.readCodePoint();(n?a:s)(l,r)||e.invalidStringToken(d,'Invalid Unicode escape'),t+=f(l),i=e.pos}else break;n=!1}return t+this.input.slice(i,this.pos)},he.readWord=function(){var e=this.readWord1(),t=V.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,'Escape sequence in keyword '+e),t=B[e]),this.finishToken(t,e)};var xe='5.3.0',be,ve,Ce}});